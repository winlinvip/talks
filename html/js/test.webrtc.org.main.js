function runAllSequentially(e,t){var i=-1,n=setTimeout.bind(null,function(){++i!==e.length?e[i].run(n):t()});n()}function createLineChart(){return currentTest.createLineChart()}function reportSuccess(e){currentTest.reportSuccess(e)}function reportError(e){currentTest.reportError(e)}function reportFatal(e){currentTest.reportFatal(e)}function reportWarning(e){currentTest.reportWarning(e)}function reportInfo(e){currentTest.reportInfo(e)}function setTestProgress(e){currentTest.setProgress(e)}function setTestFinished(){currentTest.done()}function expectEquals(){currentTest.expectEquals.apply(currentTest,arguments)}function setTimeoutWithProgressBar(e,t){var i=window.performance.now(),n=setInterval(function(){setTestProgress(100*(window.performance.now()-i)/t)},100),r=function(){clearInterval(n),setTestProgress(100),e()},o=setTimeout(r,t);return function(){clearTimeout(o),r()}}function Report(){this.output_=[],this.nextAsyncId_=0,this.nativeLog_=console.log.bind(console),console.log=this.logHook_.bind(this),window.addEventListener("error",this.onWindowError_.bind(this)),this.traceEventInstant("system-info",Report.getSystemInfo())}function parseUrlParameters(){var e={};if(""!==window.location.search)for(var t=window.location.search.replace(/\//g,"").substr(1).split("&"),i=0;i!==t.length;++i){var n=t[i].split("=");e[decodeURIComponent(n[0])]=decodeURIComponent(n[1])}return e}function addTest(e,t,i){if(!isTestDisabled(t)){for(var n=0;n!==enumeratedTestSuites.length;++n)if(enumeratedTestSuites[n].name===e)return void enumeratedTestSuites[n].addTest(t,i);var r=document.createElement("testrtc-suite");r.name=e,r.addTest(t,i),enumeratedTestSuites.push(r),document.getElementById("content").appendChild(r)}}function addExplicitTest(e,t,i){isTestExplicitlyEnabled(t)&&addTest(e,t,i)}function isTestDisabled(e){return 0!==enumeratedTestFilters.length&&!isTestExplicitlyEnabled(e)}function isTestExplicitlyEnabled(e){for(var t=0;t!==enumeratedTestFilters.length;++t)if(enumeratedTestFilters[t]===e)return!0;return!1}function Call(e,t){this.test=t,this.traceEvent=report.traceEventAsync("call"),this.traceEvent({config:e}),this.statsGatheringRunning=!1,this.pc1=new RTCPeerConnection(e),this.pc2=new RTCPeerConnection(e),this.pc1.addEventListener("icecandidate",this.onIceCandidate_.bind(this,this.pc2)),this.pc2.addEventListener("icecandidate",this.onIceCandidate_.bind(this,this.pc1)),this.iceCandidateFilter_=Call.noFilter}function StatisticsAggregate(e){this.startTime_=0,this.sum_=0,this.count_=0,this.max_=0,this.rampUpThreshold_=e,this.rampUpTime_=1/0}function Ssim(){}function VideoFrameChecker(e){this.frameStats={numFrozenFrames:0,numBlackFrames:0,numFrames:0},this.running_=!0,this.nonBlackPixelLumaThreshold=20,this.previousFrame_=[],this.identicalFrameSsimThreshold=.985,this.frameComparator=new Ssim,this.canvas_=document.createElement("canvas"),this.videoElement_=e,this.listener_=this.checkVideoFrame_.bind(this),this.videoElement_.addEventListener("play",this.listener_,!1)}function arrayAverage(e){for(var t=e.length,i=0,n=0;n<t;n++)i+=e[n];return Math.floor(i/t)}function arrayMax(e){return 0===e.length?NaN:Math.max.apply(Math,e)}function arrayMin(e){return 0===e.length?NaN:Math.min.apply(Math,e)}function enumerateStats(e,t,i){var n={audio:{local:{audioLevel:0,bytesSent:0,clockRate:0,codecId:"",mimeType:"",packetsSent:0,payloadType:0,timestamp:0,trackId:"",transportId:""},remote:{audioLevel:0,bytesReceived:0,clockRate:0,codecId:"",fractionLost:0,jitter:0,mimeType:"",packetsLost:-1,packetsReceived:0,payloadType:0,timestamp:0,trackId:"",transportId:""}},video:{local:{bytesSent:0,clockRate:0,codecId:"",firCount:0,framesEncoded:0,frameHeight:0,framesSent:-1,frameWidth:0,nackCount:0,packetsSent:-1,payloadType:0,pliCount:0,qpSum:0,timestamp:0,trackId:"",transportId:""},remote:{bytesReceived:-1,clockRate:0,codecId:"",firCount:-1,fractionLost:0,frameHeight:0,framesDecoded:0,framesDropped:0,framesReceived:0,frameWidth:0,nackCount:-1,packetsLost:-1,packetsReceived:0,payloadType:0,pliCount:-1,qpSum:0,timestamp:0,trackId:"",transportId:""}},connection:{availableOutgoingBitrate:0,bytesReceived:0,bytesSent:0,consentRequestsSent:0,currentRoundTripTime:0,localCandidateId:"",localCandidateType:"",localIp:"",localPort:0,localPriority:0,localProtocol:"",remoteCandidateId:"",remoteCandidateType:"",remoteIp:"",remotePort:0,remotePriority:0,remoteProtocol:"",requestsReceived:0,requestsSent:0,responsesReceived:0,responsesSent:0,timestamp:0,totalRoundTripTime:0}};return e&&(e.forEach(function(e,r){switch(e.type){case"outbound-rtp":e.hasOwnProperty("trackId")&&(1!==e.trackId.indexOf(t.audio)&""!==t.audio?(n.audio.local.bytesSent=e.bytesSent,n.audio.local.codecId=e.codecId,n.audio.local.packetsSent=e.packetsSent,n.audio.local.timestamp=e.timestamp,n.audio.local.trackId=e.trackId,n.audio.local.transportId=e.transportId):1!==e.trackId.indexOf(t.video)&""!==t.video&&(n.video.local.bytesSent=e.bytesSent,n.video.local.codecId=e.codecId,n.video.local.firCount=e.firCount,n.video.local.framesEncoded=e.framesEncoded,n.video.local.framesSent=e.framesSent,n.video.local.packetsSent=e.packetsSent,n.video.local.pliCount=e.pliCount,n.video.local.qpSum=e.qpSum,n.video.local.timestamp=e.timestamp,n.video.local.trackId=e.trackId,n.video.local.transportId=e.transportId));break;case"inbound-rtp":e.hasOwnProperty("trackId")&&(1!==e.trackId.indexOf(i.audio)&""!==i.audio&&(n.audio.remote.bytesReceived=e.bytesReceived,n.audio.remote.codecId=e.codecId,n.audio.remote.fractionLost=e.fractionLost,n.audio.remote.jitter=e.jitter,n.audio.remote.packetsLost=e.packetsLost,n.audio.remote.packetsReceived=e.packetsReceived,n.audio.remote.timestamp=e.timestamp,n.audio.remote.trackId=e.trackId,n.audio.remote.transportId=e.transportId),1!==e.trackId.indexOf(i.video)&""!==i.video&&(n.video.remote.bytesReceived=e.bytesReceived,n.video.remote.codecId=e.codecId,n.video.remote.firCount=e.firCount,n.video.remote.fractionLost=e.fractionLost,n.video.remote.nackCount=e.nackCount,n.video.remote.packetsLost=e.packetsLost,n.video.remote.packetsReceived=e.packetsReceived,n.video.remote.pliCount=e.pliCount,n.video.remote.qpSum=e.qpSum,n.video.remote.timestamp=e.timestamp,n.video.remote.trackId=e.trackId,n.video.remote.transportId=e.transportId));break;case"candidate-pair":e.hasOwnProperty("availableOutgoingBitrate")&&(n.connection.availableOutgoingBitrate=e.availableOutgoingBitrate,n.connection.bytesReceived=e.bytesReceived,n.connection.bytesSent=e.bytesSent,n.connection.consentRequestsSent=e.consentRequestsSent,n.connection.currentRoundTripTime=e.currentRoundTripTime,n.connection.localCandidateId=e.localCandidateId,n.connection.remoteCandidateId=e.remoteCandidateId,n.connection.requestsReceived=e.requestsReceived,n.connection.requestsSent=e.requestsSent,n.connection.responsesReceived=e.responsesReceived,n.connection.responsesSent=e.responsesSent,n.connection.timestamp=e.timestamp,n.connection.totalRoundTripTime=e.totalRoundTripTime);break;default:return}}.bind()),e.forEach(function(e){switch(e.type){case"track":e.hasOwnProperty("trackIdentifier")&&(1!==e.trackIdentifier.indexOf(t.video)&""!==t.video&&(n.video.local.frameHeight=e.frameHeight,n.video.local.framesSent=e.framesSent,n.video.local.frameWidth=e.frameWidth),1!==e.trackIdentifier.indexOf(i.video)&""!==i.video&&(n.video.remote.frameHeight=e.frameHeight,n.video.remote.framesDecoded=e.framesDecoded,n.video.remote.framesDropped=e.framesDropped,n.video.remote.framesReceived=e.framesReceived,n.video.remote.frameWidth=e.frameWidth),1!==e.trackIdentifier.indexOf(t.audio)&""!==t.audio&&(n.audio.local.audioLevel=e.audioLevel),1!==e.trackIdentifier.indexOf(i.audio)&""!==i.audio&&(n.audio.remote.audioLevel=e.audioLevel));break;case"codec":e.hasOwnProperty("id")&&(1!==e.id.indexOf(n.audio.local.codecId)&""!==t.audio&&(n.audio.local.clockRate=e.clockRate,n.audio.local.mimeType=e.mimeType,n.audio.local.payloadType=e.payloadType),1!==e.id.indexOf(n.audio.remote.codecId)&""!==i.audio&&(n.audio.remote.clockRate=e.clockRate,n.audio.remote.mimeType=e.mimeType,n.audio.remote.payloadType=e.payloadType),1!==e.id.indexOf(n.video.local.codecId)&""!==t.video&&(n.video.local.clockRate=e.clockRate,n.video.local.mimeType=e.mimeType,n.video.local.payloadType=e.payloadType),1!==e.id.indexOf(n.video.remote.codecId)&""!==i.video&&(n.video.remote.clockRate=e.clockRate,n.video.remote.mimeType=e.mimeType,n.video.remote.payloadType=e.payloadType));break;case"local-candidate":e.hasOwnProperty("id")&&-1!==e.id.indexOf(n.connection.localCandidateId)&&(n.connection.localIp=e.ip,n.connection.localPort=e.port,n.connection.localPriority=e.priority,n.connection.localProtocol=e.protocol,n.connection.localType=e.candidateType);break;case"remote-candidate":e.hasOwnProperty("id")&&-1!==e.id.indexOf(n.connection.remoteCandidateId)&&(n.connection.remoteIp=e.ip,n.connection.remotePort=e.port,n.connection.remotePriority=e.priority,n.connection.remoteProtocol=e.protocol,n.connection.remoteType=e.candidateType);break;default:return}}.bind())),n}function TestCaseNames(){return this.testCases={AUDIOCAPTURE:"Audio capture",CHECKRESOLUTION240:"Check resolution 320x240",CHECKRESOLUTION480:"Check resolution 640x480",CHECKRESOLUTION720:"Check resolution 1280x720",CHECKSUPPORTEDRESOLUTIONS:"Check supported resolutions",DATATHROUGHPUT:"Data throughput",IPV6ENABLED:"Ipv6 enabled",NETWORKLATENCY:"Network latency",NETWORKLATENCYRELAY:"Network latency - Relay",UDPENABLED:"Udp enabled",TCPENABLED:"Tcp enabled",VIDEOBANDWIDTH:"Video bandwidth",RELAYCONNECTIVITY:"Relay connectivity",REFLEXIVECONNECTIVITY:"Reflexive connectivity",HOSTCONNECTIVITY:"Host connectivity"},this.testCases}function TestSuiteNames(){return this.testSuites={CAMERA:"Camera",MICROPHONE:"Microphone",NETWORK:"Network",CONNECTIVITY:"Connectivity",THROUGHPUT:"Throughput"},this.testSuites}function MicTest(e){this.test=e,this.inputChannelCount=6,this.outputChannelCount=2,this.bufferSize=0,this.constraints={audio:{optional:[{echoCancellation:!1}]}},this.collectSeconds=2,this.silentThreshold=1/32767,this.lowVolumeThreshold=-60,this.monoDetectThreshold=1/65536,this.clipCountThreshold=6,this.clipThreshold=1,this.collectedAudio=[],this.collectedSampleCount=0;for(var t=0;t<this.inputChannelCount;++t)this.collectedAudio[t]=[]}function CamResolutionsTest(e,t){this.test=e,this.resolutions=t,this.currentResolution=0,this.isMuted=!1,this.isShuttingDown=!1}function RunConnectivityTest(e,t){this.test=e,this.iceCandidateFilter=t,this.timeout=null,this.parsedCandidates=[],this.call=null}function DataChannelThroughputTest(e){this.test=e,this.testDurationSeconds=5,this.startTime=null,this.sentPayloadBytes=0,this.receivedPayloadBytes=0,this.stopSending=!1,this.samplePacket="";for(var t=0;1024!==t;++t)this.samplePacket+="h";this.maxNumberOfPacketsToSend=1,this.bytesToKeepBuffered=1024*this.maxNumberOfPacketsToSend,this.lastBitrateMeasureTime=null,this.lastReceivedPayloadBytes=0,this.call=null,this.senderChannel=null,this.receiveChannel=null}function VideoBandwidthTest(e){this.test=e,this.maxVideoBitrateKbps=2e3,this.durationMs=4e4,this.statStepMs=100,this.bweStats=new StatisticsAggregate(.75*this.maxVideoBitrateKbps*1e3),this.rttStats=new StatisticsAggregate,this.packetsLost=-1,this.nackCount=-1,this.pliCount=-1,this.qpSum=-1,this.packetsSent=-1,this.packetsReceived=-1,this.framesEncoded=-1,this.framesDecoded=-1,this.framesSent=-1,this.bytesSent=-1,this.videoStats=[],this.startTime=null,this.call=null,this.constraints={audio:!1,video:{optional:[{minWidth:1280},{minHeight:720}]}}}function WiFiPeriodicScanTest(e,t){this.test=e,this.candidateFilter=t,this.testDurationMs=3e5,this.sendIntervalMs=100,this.delays=[],this.recvTimeStamps=[],this.running=!1,this.call=null,this.senderChannel=null,this.receiveChannel=null}!function(e,t,i,n,r,o,s){e.GoogleAnalyticsObject=r,e.ga=e.ga||function(){(e.ga.q=e.ga.q||[]).push(arguments)},e.ga.l=1*new Date,o=t.createElement("script"),s=t.getElementsByTagName("script")[0],o.async=1,o.src="js/www.google-analytics.com.analytics.js",s.parentNode.insertBefore(o,s)}(window,document,0,0,"ga"),ga("create","UA-48530561-3","auto"),ga("send","pageview"),function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).adapter=e()}}(function(){return function e(t,i,n){function r(s,a){if(!i[s]){if(!t[s]){var c="function"==typeof require&&require;if(!a&&c)return c(s,!0);if(o)return o(s,!0);var l=new Error("Cannot find module '"+s+"'");throw l.code="MODULE_NOT_FOUND",l}var d=i[s]={exports:{}};t[s][0].call(d.exports,function(e){var i=t[s][1][e];return r(i||e)},d,d.exports,e,t,i,n)}return i[s].exports}for(var o="function"==typeof require&&require,s=0;s<n.length;s++)r(n[s]);return r}({1:[function(e,t,i){"use strict";function n(e,t,i,n,r){var o=a.writeRtpDescription(e.kind,t);if(o+=a.writeIceParameters(e.iceGatherer.getLocalParameters()),o+=a.writeDtlsParameters(e.dtlsTransport.getLocalParameters(),"offer"===i?"actpass":r||"active"),o+="a=mid:"+e.mid+"\r\n",e.direction?o+="a="+e.direction+"\r\n":e.rtpSender&&e.rtpReceiver?o+="a=sendrecv\r\n":e.rtpSender?o+="a=sendonly\r\n":e.rtpReceiver?o+="a=recvonly\r\n":o+="a=inactive\r\n",e.rtpSender){var s="msid:"+n.id+" "+e.rtpSender.track.id+"\r\n";o+="a="+s,o+="a=ssrc:"+e.sendEncodingParameters[0].ssrc+" "+s,e.sendEncodingParameters[0].rtx&&(o+="a=ssrc:"+e.sendEncodingParameters[0].rtx.ssrc+" "+s,o+="a=ssrc-group:FID "+e.sendEncodingParameters[0].ssrc+" "+e.sendEncodingParameters[0].rtx.ssrc+"\r\n")}return o+="a=ssrc:"+e.sendEncodingParameters[0].ssrc+" cname:"+a.localCName+"\r\n",e.rtpSender&&e.sendEncodingParameters[0].rtx&&(o+="a=ssrc:"+e.sendEncodingParameters[0].rtx.ssrc+" cname:"+a.localCName+"\r\n"),o}function r(e,t){var i={codecs:[],headerExtensions:[],fecMechanisms:[]},n=function(e,t){e=parseInt(e,10);for(var i=0;i<t.length;i++)if(t[i].payloadType===e||t[i].preferredPayloadType===e)return t[i]},r=function(e,t,i,r){var o=n(e.parameters.apt,i),s=n(t.parameters.apt,r);return o&&s&&o.name.toLowerCase()===s.name.toLowerCase()};return e.codecs.forEach(function(n){for(var o=0;o<t.codecs.length;o++){var s=t.codecs[o];if(n.name.toLowerCase()===s.name.toLowerCase()&&n.clockRate===s.clockRate){if("rtx"===n.name.toLowerCase()&&n.parameters&&s.parameters.apt&&!r(n,s,e.codecs,t.codecs))continue;(s=JSON.parse(JSON.stringify(s))).numChannels=Math.min(n.numChannels,s.numChannels),i.codecs.push(s),s.rtcpFeedback=s.rtcpFeedback.filter(function(e){for(var t=0;t<n.rtcpFeedback.length;t++)if(n.rtcpFeedback[t].type===e.type&&n.rtcpFeedback[t].parameter===e.parameter)return!0;return!1});break}}}),e.headerExtensions.forEach(function(e){for(var n=0;n<t.headerExtensions.length;n++){var r=t.headerExtensions[n];if(e.uri===r.uri){i.headerExtensions.push(r);break}}}),i}function o(e,t,i){return-1!=={offer:{setLocalDescription:["stable","have-local-offer"],setRemoteDescription:["stable","have-remote-offer"]},answer:{setLocalDescription:["have-remote-offer","have-local-pranswer"],setRemoteDescription:["have-local-offer","have-remote-pranswer"]}}[t][e].indexOf(i)}function s(e,t){var i=e.getRemoteCandidates().find(function(e){return t.foundation===e.foundation&&t.ip===e.ip&&t.port===e.port&&t.priority===e.priority&&t.protocol===e.protocol&&t.type===e.type});return i||e.addRemoteCandidate(t),!i}var a=e("sdp");t.exports=function(e,t){var i=function(i){var n=this,r=document.createDocumentFragment();if(["addEventListener","removeEventListener","dispatchEvent"].forEach(function(e){n[e]=r[e].bind(r)}),this.onicecandidate=null,this.onaddstream=null,this.ontrack=null,this.onremovestream=null,this.onsignalingstatechange=null,this.oniceconnectionstatechange=null,this.onicegatheringstatechange=null,this.onnegotiationneeded=null,this.ondatachannel=null,this.canTrickleIceCandidates=null,this.needNegotiation=!1,this.localStreams=[],this.remoteStreams=[],this.localDescription=null,this.remoteDescription=null,this.signalingState="stable",this.iceConnectionState="new",this.iceGatheringState="new",i=JSON.parse(JSON.stringify(i||{})),this.usingBundle="max-bundle"===i.bundlePolicy,"negotiate"===i.rtcpMuxPolicy){var o=new Error("rtcpMuxPolicy 'negotiate' is not supported");throw o.name="NotSupportedError",o}switch(i.rtcpMuxPolicy||(i.rtcpMuxPolicy="require"),i.iceTransportPolicy){case"all":case"relay":break;default:i.iceTransportPolicy="all"}switch(i.bundlePolicy){case"balanced":case"max-compat":case"max-bundle":break;default:i.bundlePolicy="balanced"}if(i.iceServers=function(e,t){var i=!1;return(e=JSON.parse(JSON.stringify(e))).filter(function(e){if(e&&(e.urls||e.url)){var n=e.urls||e.url;e.url&&!e.urls&&console.warn("RTCIceServer.url is deprecated! Use urls instead.");var r="string"==typeof n;return r&&(n=[n]),n=n.filter(function(e){return 0!==e.indexOf("turn:")||-1===e.indexOf("transport=udp")||-1!==e.indexOf("turn:[")||i?0===e.indexOf("stun:")&&t>=14393&&-1===e.indexOf("?transport=udp"):(i=!0,!0)}),delete e.url,e.urls=r?n[0]:n,!!n.length}return!1})}(i.iceServers||[],t),this._iceGatherers=[],i.iceCandidatePoolSize)for(var s=i.iceCandidatePoolSize;s>0;s--)this._iceGatherers=new e.RTCIceGatherer({iceServers:i.iceServers,gatherPolicy:i.iceTransportPolicy});else i.iceCandidatePoolSize=0;this._config=i,this.transceivers=[],this._sdpSessionId=a.generateSessionId(),this._sdpSessionVersion=0,this._dtlsRole=void 0};return i.prototype._emitGatheringStateChange=function(){var e=new Event("icegatheringstatechange");this.dispatchEvent(e),"function"==typeof this.onicegatheringstatechange&&this.onicegatheringstatechange(e)},i.prototype.getConfiguration=function(){return this._config},i.prototype.getLocalStreams=function(){return this.localStreams},i.prototype.getRemoteStreams=function(){return this.remoteStreams},i.prototype._createTransceiver=function(e){var t=this.transceivers.length>0,i={track:null,iceGatherer:null,iceTransport:null,dtlsTransport:null,localCapabilities:null,remoteCapabilities:null,rtpSender:null,rtpReceiver:null,kind:e,mid:null,sendEncodingParameters:null,recvEncodingParameters:null,stream:null,wantReceive:!0};if(this.usingBundle&&t)i.iceTransport=this.transceivers[0].iceTransport,i.dtlsTransport=this.transceivers[0].dtlsTransport;else{var n=this._createIceAndDtlsTransports();i.iceTransport=n.iceTransport,i.dtlsTransport=n.dtlsTransport}return this.transceivers.push(i),i},i.prototype.addTrack=function(t,i){for(var n,r=0;r<this.transceivers.length;r++)this.transceivers[r].track||this.transceivers[r].kind!==t.kind||(n=this.transceivers[r]);return n||(n=this._createTransceiver(t.kind)),this._maybeFireNegotiationNeeded(),-1===this.localStreams.indexOf(i)&&this.localStreams.push(i),n.track=t,n.stream=i,n.rtpSender=new e.RTCRtpSender(t,n.dtlsTransport),n.rtpSender},i.prototype.addStream=function(e){var i=this;if(t>=15025)e.getTracks().forEach(function(t){i.addTrack(t,e)});else{var n=e.clone();e.getTracks().forEach(function(e,t){var i=n.getTracks()[t];e.addEventListener("enabled",function(e){i.enabled=e.enabled})}),n.getTracks().forEach(function(e){i.addTrack(e,n)})}},i.prototype.removeStream=function(e){var t=this.localStreams.indexOf(e);t>-1&&(this.localStreams.splice(t,1),this._maybeFireNegotiationNeeded())},i.prototype.getSenders=function(){return this.transceivers.filter(function(e){return!!e.rtpSender}).map(function(e){return e.rtpSender})},i.prototype.getReceivers=function(){return this.transceivers.filter(function(e){return!!e.rtpReceiver}).map(function(e){return e.rtpReceiver})},i.prototype._createIceGatherer=function(t,i){var n=this;if(i&&t>0)return this.transceivers[0].iceGatherer;if(this._iceGatherers.length)return this._iceGatherers.shift();var r=new e.RTCIceGatherer({iceServers:this._config.iceServers,gatherPolicy:this._config.iceTransportPolicy});return Object.defineProperty(r,"state",{value:"new",writable:!0}),this.transceivers[t].candidates=[],this.transceivers[t].bufferCandidates=function(e){var i=!e.candidate||0===Object.keys(e.candidate).length;r.state=i?"completed":"gathering",null!==n.transceivers[t].candidates&&n.transceivers[t].candidates.push(e.candidate)},r.addEventListener("localcandidate",this.transceivers[t].bufferCandidates),r},i.prototype._gather=function(t,i){var n=this,r=this.transceivers[i].iceGatherer;if(!r.onlocalcandidate){var o=this.transceivers[i].candidates;this.transceivers[i].candidates=null,r.removeEventListener("localcandidate",this.transceivers[i].bufferCandidates),r.onlocalcandidate=function(e){if(!(n.usingBundle&&i>0)){var o=new Event("icecandidate");o.candidate={sdpMid:t,sdpMLineIndex:i};var s=e.candidate,c=!s||0===Object.keys(s).length;c?"new"!==r.state&&"gathering"!==r.state||(r.state="completed"):("new"===r.state&&(r.state="gathering"),s.component=1,o.candidate.candidate=a.writeCandidate(s));var l=a.splitSections(n.localDescription.sdp);l[o.candidate.sdpMLineIndex+1]+=c?"a=end-of-candidates\r\n":"a="+o.candidate.candidate+"\r\n",n.localDescription.sdp=l.join("");var d=n.transceivers.every(function(e){return e.iceGatherer&&"completed"===e.iceGatherer.state});"gathering"!==n.iceGatheringState&&(n.iceGatheringState="gathering",n._emitGatheringStateChange()),c||(n.dispatchEvent(o),"function"==typeof n.onicecandidate&&n.onicecandidate(o)),d&&(n.dispatchEvent(new Event("icecandidate")),"function"==typeof n.onicecandidate&&n.onicecandidate(new Event("icecandidate")),n.iceGatheringState="complete",n._emitGatheringStateChange())}},e.setTimeout(function(){o.forEach(function(e){var t=new Event("RTCIceGatherEvent");t.candidate=e,r.onlocalcandidate(t)})},0)}},i.prototype._createIceAndDtlsTransports=function(){var t=this,i=new e.RTCIceTransport(null);i.onicestatechange=function(){t._updateConnectionState()};var n=new e.RTCDtlsTransport(i);return n.ondtlsstatechange=function(){t._updateConnectionState()},n.onerror=function(){Object.defineProperty(n,"state",{value:"failed",writable:!0}),t._updateConnectionState()},{iceTransport:i,dtlsTransport:n}},i.prototype._disposeIceAndDtlsTransports=function(e){var t=this.transceivers[e].iceGatherer;t&&(delete t.onlocalcandidate,delete this.transceivers[e].iceGatherer);var i=this.transceivers[e].iceTransport;i&&(delete i.onicestatechange,delete this.transceivers[e].iceTransport);var n=this.transceivers[e].dtlsTransport;n&&(delete n.ondtlsstatechange,delete n.onerror,delete this.transceivers[e].dtlsTransport)},i.prototype._transceive=function(e,i,n){var o=r(e.localCapabilities,e.remoteCapabilities);i&&e.rtpSender&&(o.encodings=e.sendEncodingParameters,o.rtcp={cname:a.localCName,compound:e.rtcpParameters.compound},e.recvEncodingParameters.length&&(o.rtcp.ssrc=e.recvEncodingParameters[0].ssrc),e.rtpSender.send(o)),n&&e.rtpReceiver&&o.codecs.length>0&&("video"===e.kind&&e.recvEncodingParameters&&t<15019&&e.recvEncodingParameters.forEach(function(e){delete e.rtx}),o.encodings=e.recvEncodingParameters,o.rtcp={cname:e.rtcpParameters.cname,compound:e.rtcpParameters.compound},e.sendEncodingParameters.length&&(o.rtcp.ssrc=e.sendEncodingParameters[0].ssrc),e.rtpReceiver.receive(o))},i.prototype.setLocalDescription=function(e){var t=this,i=arguments;if(!o("setLocalDescription",e.type,this.signalingState))return new Promise(function(n,r){var o=new Error("Can not set local "+e.type+" in state "+t.signalingState);o.name="InvalidStateError",i.length>2&&"function"==typeof i[2]&&i[2].apply(null,[o]),r(o)});var n,s;if("offer"===e.type)n=a.splitSections(e.sdp),s=n.shift(),n.forEach(function(e,i){var n=a.parseRtpParameters(e);t.transceivers[i].localCapabilities=n}),this.transceivers.forEach(function(e,i){t._gather(e.mid,i)});else if("answer"===e.type){n=a.splitSections(t.remoteDescription.sdp),s=n.shift();var c=a.matchPrefix(s,"a=ice-lite").length>0;n.forEach(function(e,i){var n=t.transceivers[i],o=n.iceGatherer,l=n.iceTransport,d=n.dtlsTransport,h=n.localCapabilities,u=n.remoteCapabilities;if(!(a.isRejected(e)&&1===!a.matchPrefix(e,"a=bundle-only").length)&&!n.isDatachannel){var p=a.getIceParameters(e,s),f=a.getDtlsParameters(e,s);c&&(f.role="server"),t.usingBundle&&0!==i||(t._gather(n.mid,i),"new"===l.state&&l.start(o,p,c?"controlling":"controlled"),"new"===d.state&&d.start(f));var m=r(h,u);t._transceive(n,m.codecs.length>0,!1)}})}switch(this.localDescription={type:e.type,sdp:e.sdp},e.type){case"offer":this._updateSignalingState("have-local-offer");break;case"answer":this._updateSignalingState("stable");break;default:throw new TypeError('unsupported type "'+e.type+'"')}var l=arguments.length>1&&"function"==typeof arguments[1]&&arguments[1];return new Promise(function(e){l&&l.apply(null),e()})},i.prototype.setRemoteDescription=function(i){var n=this,r=arguments;if(!o("setRemoteDescription",i.type,this.signalingState))return new Promise(function(e,t){var o=new Error("Can not set remote "+i.type+" in state "+n.signalingState);o.name="InvalidStateError",r.length>2&&"function"==typeof r[2]&&r[2].apply(null,[o]),t(o)});var c={};this.remoteStreams.forEach(function(e){c[e.id]=e});var l=[],d=a.splitSections(i.sdp),h=d.shift(),u=a.matchPrefix(h,"a=ice-lite").length>0,p=a.matchPrefix(h,"a=group:BUNDLE ").length>0;this.usingBundle=p;var f=a.matchPrefix(h,"a=ice-options:")[0];switch(this.canTrickleIceCandidates=!!f&&f.substr(14).split(" ").indexOf("trickle")>=0,d.forEach(function(r,o){var d=a.splitLines(r),f=a.getKind(r),m=a.isRejected(r)&&1===!a.matchPrefix(r,"a=bundle-only").length,_=d[0].substr(2).split(" ")[2],v=a.getDirection(r,h),y=a.parseMsid(r),g=a.getMid(r)||a.generateIdentifier();if("application"!==f||"DTLS/SCTP"!==_){var b,C,P,S,E,T,w,R,x,I,N,A=a.parseRtpParameters(r);m||(I=a.getIceParameters(r,h),(N=a.getDtlsParameters(r,h)).role="client"),w=a.parseRtpEncodingParameters(r);var k=a.parseRtcpParameters(r),O=a.matchPrefix(r,"a=end-of-candidates",h).length>0,D=a.matchPrefix(r,"a=candidate:").map(function(e){return a.parseCandidate(e)}).filter(function(e){return 1===e.component});if(("offer"===i.type||"answer"===i.type)&&!m&&p&&o>0&&n.transceivers[o]&&(n._disposeIceAndDtlsTransports(o),n.transceivers[o].iceGatherer=n.transceivers[0].iceGatherer,n.transceivers[o].iceTransport=n.transceivers[0].iceTransport,n.transceivers[o].dtlsTransport=n.transceivers[0].dtlsTransport,n.transceivers[o].rtpSender&&n.transceivers[o].rtpSender.setTransport(n.transceivers[0].dtlsTransport),n.transceivers[o].rtpReceiver&&n.transceivers[o].rtpReceiver.setTransport(n.transceivers[0].dtlsTransport)),"offer"!==i.type||m)"answer"!==i.type||m||(C=(b=n.transceivers[o]).iceGatherer,P=b.iceTransport,S=b.dtlsTransport,E=b.rtpReceiver,T=b.sendEncodingParameters,R=b.localCapabilities,n.transceivers[o].recvEncodingParameters=w,n.transceivers[o].remoteCapabilities=A,n.transceivers[o].rtcpParameters=k,D.length&&"new"===P.state&&(!u&&!O||p&&0!==o?D.forEach(function(e){s(b.iceTransport,e)}):P.setRemoteCandidates(D)),p&&0!==o||("new"===P.state&&P.start(C,I,"controlling"),"new"===S.state&&S.start(N)),n._transceive(b,"sendrecv"===v||"recvonly"===v,"sendrecv"===v||"sendonly"===v),!E||"sendrecv"!==v&&"sendonly"!==v?delete b.rtpReceiver:(x=E.track,y?(c[y.stream]||(c[y.stream]=new e.MediaStream),c[y.stream].addTrack(x),l.push([x,E,c[y.stream]])):(c.default||(c.default=new e.MediaStream),c.default.addTrack(x),l.push([x,E,c.default]))));else{(b=n.transceivers[o]||n._createTransceiver(f)).mid=g,b.iceGatherer||(b.iceGatherer=n._createIceGatherer(o,p)),D.length&&"new"===b.iceTransport.state&&(!O||p&&0!==o?D.forEach(function(e){s(b.iceTransport,e)}):b.iceTransport.setRemoteCandidates(D)),R=e.RTCRtpReceiver.getCapabilities(f),t<15019&&(R.codecs=R.codecs.filter(function(e){return"rtx"!==e.name})),T=b.sendEncodingParameters||[{ssrc:1001*(2*o+2)}];var M=!1;if(("sendrecv"===v||"sendonly"===v)&&(M=!b.rtpReceiver,E=b.rtpReceiver||new e.RTCRtpReceiver(b.dtlsTransport,f),M)){var L;x=E.track,y?(c[y.stream]||(c[y.stream]=new e.MediaStream,Object.defineProperty(c[y.stream],"id",{get:function(){return y.stream}})),Object.defineProperty(x,"id",{get:function(){return y.track}}),L=c[y.stream]):(c.default||(c.default=new e.MediaStream),L=c.default),L.addTrack(x),l.push([x,E,L])}b.localCapabilities=R,b.remoteCapabilities=A,b.rtpReceiver=E,b.rtcpParameters=k,b.sendEncodingParameters=T,b.recvEncodingParameters=w,n._transceive(n.transceivers[o],!1,M)}}else n.transceivers[o]={mid:g,isDatachannel:!0}}),void 0===this._dtlsRole&&(this._dtlsRole="offer"===i.type?"active":"passive"),this.remoteDescription={type:i.type,sdp:i.sdp},i.type){case"offer":this._updateSignalingState("have-remote-offer");break;case"answer":this._updateSignalingState("stable");break;default:throw new TypeError('unsupported type "'+i.type+'"')}return Object.keys(c).forEach(function(t){var i=c[t];if(i.getTracks().length){if(-1===n.remoteStreams.indexOf(i)){n.remoteStreams.push(i);var r=new Event("addstream");r.stream=i,e.setTimeout(function(){n.dispatchEvent(r),"function"==typeof n.onaddstream&&n.onaddstream(r)})}l.forEach(function(t){var r=t[0],o=t[1];if(i.id===t[2].id){var s=new Event("track");s.track=r,s.receiver=o,s.transceiver={receiver:o},s.streams=[i],e.setTimeout(function(){n.dispatchEvent(s),"function"==typeof n.ontrack&&n.ontrack(s)})}})}}),e.setTimeout(function(){n&&n.transceivers&&n.transceivers.forEach(function(e){e.iceTransport&&"new"===e.iceTransport.state&&e.iceTransport.getRemoteCandidates().length>0&&(console.warn("Timeout for addRemoteCandidate. Consider sending an end-of-candidates notification"),e.iceTransport.addRemoteCandidate({}))})},4e3),new Promise(function(e){r.length>1&&"function"==typeof r[1]&&r[1].apply(null),e()})},i.prototype.close=function(){this.transceivers.forEach(function(e){e.iceTransport&&e.iceTransport.stop(),e.dtlsTransport&&e.dtlsTransport.stop(),e.rtpSender&&e.rtpSender.stop(),e.rtpReceiver&&e.rtpReceiver.stop()}),this._updateSignalingState("closed")},i.prototype._updateSignalingState=function(e){this.signalingState=e;var t=new Event("signalingstatechange");this.dispatchEvent(t),"function"==typeof this.onsignalingstatechange&&this.onsignalingstatechange(t)},i.prototype._maybeFireNegotiationNeeded=function(){var t=this;"stable"===this.signalingState&&!0!==this.needNegotiation&&(this.needNegotiation=!0,e.setTimeout(function(){if(!1!==t.needNegotiation){t.needNegotiation=!1;var e=new Event("negotiationneeded");t.dispatchEvent(e),"function"==typeof t.onnegotiationneeded&&t.onnegotiationneeded(e)}},0))},i.prototype._updateConnectionState=function(){var e,t={new:0,closed:0,connecting:0,checking:0,connected:0,completed:0,disconnected:0,failed:0};if(this.transceivers.forEach(function(e){t[e.iceTransport.state]++,t[e.dtlsTransport.state]++}),t.connected+=t.completed,e="new",t.failed>0?e="failed":t.connecting>0||t.checking>0?e="connecting":t.disconnected>0?e="disconnected":t.new>0?e="new":(t.connected>0||t.completed>0)&&(e="connected"),e!==this.iceConnectionState){this.iceConnectionState=e;var i=new Event("iceconnectionstatechange");this.dispatchEvent(i),"function"==typeof this.oniceconnectionstatechange&&this.oniceconnectionstatechange(i)}},i.prototype.createOffer=function(){var i,r=this,o=arguments;1===arguments.length&&"function"!=typeof arguments[0]?i=arguments[0]:3===arguments.length&&(i=arguments[2]);var s=this.transceivers.filter(function(e){return"audio"===e.kind}).length,c=this.transceivers.filter(function(e){return"video"===e.kind}).length;if(i){if(i.mandatory||i.optional)throw new TypeError("Legacy mandatory/optional constraints not supported.");void 0!==i.offerToReceiveAudio&&(s=!0===i.offerToReceiveAudio?1:!1===i.offerToReceiveAudio?0:i.offerToReceiveAudio),void 0!==i.offerToReceiveVideo&&(c=!0===i.offerToReceiveVideo?1:!1===i.offerToReceiveVideo?0:i.offerToReceiveVideo)}for(this.transceivers.forEach(function(e){"audio"===e.kind?--s<0&&(e.wantReceive=!1):"video"===e.kind&&--c<0&&(e.wantReceive=!1)});s>0||c>0;)s>0&&(this._createTransceiver("audio"),s--),c>0&&(this._createTransceiver("video"),c--);var l=a.writeSessionBoilerplate(this._sdpSessionId,this._sdpSessionVersion++);this.transceivers.forEach(function(i,n){var o=i.track,s=i.kind,c=a.generateIdentifier();i.mid=c,i.iceGatherer||(i.iceGatherer=r._createIceGatherer(n,r.usingBundle));var l=e.RTCRtpSender.getCapabilities(s);t<15019&&(l.codecs=l.codecs.filter(function(e){return"rtx"!==e.name})),l.codecs.forEach(function(e){"H264"===e.name&&void 0===e.parameters["level-asymmetry-allowed"]&&(e.parameters["level-asymmetry-allowed"]="1")});var d=i.sendEncodingParameters||[{ssrc:1001*(2*n+1)}];o&&t>=15019&&"video"===s&&!d[0].rtx&&(d[0].rtx={ssrc:d[0].ssrc+1}),i.wantReceive&&(i.rtpReceiver=new e.RTCRtpReceiver(i.dtlsTransport,s)),i.localCapabilities=l,i.sendEncodingParameters=d}),"max-compat"!==this._config.bundlePolicy&&(l+="a=group:BUNDLE "+this.transceivers.map(function(e){return e.mid}).join(" ")+"\r\n"),l+="a=ice-options:trickle\r\n",this.transceivers.forEach(function(e,t){l+=n(e,e.localCapabilities,"offer",e.stream,r._dtlsRole),l+="a=rtcp-rsize\r\n",!e.iceGatherer||"new"===r.iceGatheringState||0!==t&&r.usingBundle||(e.iceGatherer.getLocalCandidates().forEach(function(e){e.component=1,l+="a="+a.writeCandidate(e)+"\r\n"}),"completed"===e.iceGatherer.state&&(l+="a=end-of-candidates\r\n"))});var d=new e.RTCSessionDescription({type:"offer",sdp:l});return new Promise(function(e){if(o.length>0&&"function"==typeof o[0])return o[0].apply(null,[d]),void e();e(d)})},i.prototype.createAnswer=function(){var i=this,o=arguments,s=a.writeSessionBoilerplate(this._sdpSessionId,this._sdpSessionVersion++);this.usingBundle&&(s+="a=group:BUNDLE "+this.transceivers.map(function(e){return e.mid}).join(" ")+"\r\n");var c=a.splitSections(this.remoteDescription.sdp).length-1;this.transceivers.forEach(function(e,o){if(!(o+1>c))if(e.isDatachannel)s+="m=application 0 DTLS/SCTP 5000\r\nc=IN IP4 0.0.0.0\r\na=mid:"+e.mid+"\r\n";else{if(e.stream){var a;"audio"===e.kind?a=e.stream.getAudioTracks()[0]:"video"===e.kind&&(a=e.stream.getVideoTracks()[0]),a&&t>=15019&&"video"===e.kind&&!e.sendEncodingParameters[0].rtx&&(e.sendEncodingParameters[0].rtx={ssrc:e.sendEncodingParameters[0].ssrc+1})}var l=r(e.localCapabilities,e.remoteCapabilities);!l.codecs.filter(function(e){return"rtx"===e.name.toLowerCase()}).length&&e.sendEncodingParameters[0].rtx&&delete e.sendEncodingParameters[0].rtx,s+=n(e,l,"answer",e.stream,i._dtlsRole),e.rtcpParameters&&e.rtcpParameters.reducedSize&&(s+="a=rtcp-rsize\r\n")}});var l=new e.RTCSessionDescription({type:"answer",sdp:s});return new Promise(function(e){if(o.length>0&&"function"==typeof o[0])return o[0].apply(null,[l]),void e();e(l)})},i.prototype.addIceCandidate=function(e){var t,i;if(e&&""!==e.candidate){if(void 0===e.sdpMLineIndex&&!e.sdpMid)throw new TypeError("sdpMLineIndex or sdpMid required");if(this.remoteDescription){var n=e.sdpMLineIndex;if(e.sdpMid)for(var r=0;r<this.transceivers.length;r++)if(this.transceivers[r].mid===e.sdpMid){n=r;break}var o=this.transceivers[n];if(o){if(o.isDatachannel)return Promise.resolve();var c=Object.keys(e.candidate).length>0?a.parseCandidate(e.candidate):{};if("tcp"===c.protocol&&(0===c.port||9===c.port))return Promise.resolve();if(c.component&&1!==c.component)return Promise.resolve();if((0===n||n>0&&o.iceTransport!==this.transceivers[0].iceTransport)&&(s(o.iceTransport,c)||((t=new Error("Can not add ICE candidate")).name="OperationError")),!t){var l=e.candidate.trim();0===l.indexOf("a=")&&(l=l.substr(2)),(i=a.splitSections(this.remoteDescription.sdp))[n+1]+="a="+(c.type?l:"end-of-candidates")+"\r\n",this.remoteDescription.sdp=i.join("")}}else(t=new Error("Can not add ICE candidate")).name="OperationError"}else(t=new Error("Can not add ICE candidate without a remote description")).name="InvalidStateError"}else for(var d=0;d<this.transceivers.length&&(this.transceivers[d].isDatachannel||(this.transceivers[d].iceTransport.addRemoteCandidate({}),i=a.splitSections(this.remoteDescription.sdp),i[d+1]+="a=end-of-candidates\r\n",this.remoteDescription.sdp=i.join(""),!this.usingBundle));d++);var h=arguments;return new Promise(function(e,i){t?(h.length>2&&"function"==typeof h[2]&&h[2].apply(null,[t]),i(t)):(h.length>1&&"function"==typeof h[1]&&h[1].apply(null),e())})},i.prototype.getStats=function(){var e=[];this.transceivers.forEach(function(t){["rtpSender","rtpReceiver","iceGatherer","iceTransport","dtlsTransport"].forEach(function(i){t[i]&&e.push(t[i].getStats())})});var t=arguments.length>1&&"function"==typeof arguments[1]&&arguments[1];return new Promise(function(i){var n=new Map;Promise.all(e).then(function(e){e.forEach(function(e){Object.keys(e).forEach(function(t){e[t].type=function(e){return{inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"}[e.type]||e.type}(e[t]),n.set(t,e[t])})}),t&&t.apply(null,n),i(n)})})},i}},{sdp:2}],2:[function(e,t,i){"use strict";var n={};n.generateIdentifier=function(){return Math.random().toString(36).substr(2,10)},n.localCName=n.generateIdentifier(),n.splitLines=function(e){return e.trim().split("\n").map(function(e){return e.trim()})},n.splitSections=function(e){return e.split("\nm=").map(function(e,t){return(t>0?"m="+e:e).trim()+"\r\n"})},n.matchPrefix=function(e,t){return n.splitLines(e).filter(function(e){return 0===e.indexOf(t)})},n.parseCandidate=function(e){for(var t,i={foundation:(t=0===e.indexOf("a=candidate:")?e.substring(12).split(" "):e.substring(10).split(" "))[0],component:parseInt(t[1],10),protocol:t[2].toLowerCase(),priority:parseInt(t[3],10),ip:t[4],port:parseInt(t[5],10),type:t[7]},n=8;n<t.length;n+=2)switch(t[n]){case"raddr":i.relatedAddress=t[n+1];break;case"rport":i.relatedPort=parseInt(t[n+1],10);break;case"tcptype":i.tcpType=t[n+1];break;case"ufrag":i.ufrag=t[n+1],i.usernameFragment=t[n+1];break;default:i[t[n]]=t[n+1]}return i},n.writeCandidate=function(e){var t=[];t.push(e.foundation),t.push(e.component),t.push(e.protocol.toUpperCase()),t.push(e.priority),t.push(e.ip),t.push(e.port);var i=e.type;return t.push("typ"),t.push(i),"host"!==i&&e.relatedAddress&&e.relatedPort&&(t.push("raddr"),t.push(e.relatedAddress),t.push("rport"),t.push(e.relatedPort)),e.tcpType&&"tcp"===e.protocol.toLowerCase()&&(t.push("tcptype"),t.push(e.tcpType)),e.ufrag&&(t.push("ufrag"),t.push(e.ufrag)),"candidate:"+t.join(" ")},n.parseIceOptions=function(e){return e.substr(14).split(" ")},n.parseRtpMap=function(e){var t=e.substr(9).split(" "),i={payloadType:parseInt(t.shift(),10)};return t=t[0].split("/"),i.name=t[0],i.clockRate=parseInt(t[1],10),i.numChannels=3===t.length?parseInt(t[2],10):1,i},n.writeRtpMap=function(e){var t=e.payloadType;return void 0!==e.preferredPayloadType&&(t=e.preferredPayloadType),"a=rtpmap:"+t+" "+e.name+"/"+e.clockRate+(1!==e.numChannels?"/"+e.numChannels:"")+"\r\n"},n.parseExtmap=function(e){var t=e.substr(9).split(" ");return{id:parseInt(t[0],10),direction:t[0].indexOf("/")>0?t[0].split("/")[1]:"sendrecv",uri:t[1]}},n.writeExtmap=function(e){return"a=extmap:"+(e.id||e.preferredId)+(e.direction&&"sendrecv"!==e.direction?"/"+e.direction:"")+" "+e.uri+"\r\n"},n.parseFmtp=function(e){for(var t,i={},n=e.substr(e.indexOf(" ")+1).split(";"),r=0;r<n.length;r++)i[(t=n[r].trim().split("="))[0].trim()]=t[1];return i},n.writeFmtp=function(e){var t="",i=e.payloadType;if(void 0!==e.preferredPayloadType&&(i=e.preferredPayloadType),e.parameters&&Object.keys(e.parameters).length){var n=[];Object.keys(e.parameters).forEach(function(t){n.push(t+"="+e.parameters[t])}),t+="a=fmtp:"+i+" "+n.join(";")+"\r\n"}return t},n.parseRtcpFb=function(e){var t=e.substr(e.indexOf(" ")+1).split(" ");return{type:t.shift(),parameter:t.join(" ")}},n.writeRtcpFb=function(e){var t="",i=e.payloadType;return void 0!==e.preferredPayloadType&&(i=e.preferredPayloadType),e.rtcpFeedback&&e.rtcpFeedback.length&&e.rtcpFeedback.forEach(function(e){t+="a=rtcp-fb:"+i+" "+e.type+(e.parameter&&e.parameter.length?" "+e.parameter:"")+"\r\n"}),t},n.parseSsrcMedia=function(e){var t=e.indexOf(" "),i={ssrc:parseInt(e.substr(7,t-7),10)},n=e.indexOf(":",t);return n>-1?(i.attribute=e.substr(t+1,n-t-1),i.value=e.substr(n+1)):i.attribute=e.substr(t+1),i},n.getMid=function(e){var t=n.matchPrefix(e,"a=mid:")[0];if(t)return t.substr(6)},n.parseFingerprint=function(e){var t=e.substr(14).split(" ");return{algorithm:t[0].toLowerCase(),value:t[1]}},n.getDtlsParameters=function(e,t){return{role:"auto",fingerprints:n.matchPrefix(e+t,"a=fingerprint:").map(n.parseFingerprint)}},n.writeDtlsParameters=function(e,t){var i="a=setup:"+t+"\r\n";return e.fingerprints.forEach(function(e){i+="a=fingerprint:"+e.algorithm+" "+e.value+"\r\n"}),i},n.getIceParameters=function(e,t){var i=n.splitLines(e);return{usernameFragment:(i=i.concat(n.splitLines(t))).filter(function(e){return 0===e.indexOf("a=ice-ufrag:")})[0].substr(12),password:i.filter(function(e){return 0===e.indexOf("a=ice-pwd:")})[0].substr(10)}},n.writeIceParameters=function(e){return"a=ice-ufrag:"+e.usernameFragment+"\r\na=ice-pwd:"+e.password+"\r\n"},n.parseRtpParameters=function(e){for(var t={codecs:[],headerExtensions:[],fecMechanisms:[],rtcp:[]},i=n.splitLines(e)[0].split(" "),r=3;r<i.length;r++){var o=i[r],s=n.matchPrefix(e,"a=rtpmap:"+o+" ")[0];if(s){var a=n.parseRtpMap(s),c=n.matchPrefix(e,"a=fmtp:"+o+" ");switch(a.parameters=c.length?n.parseFmtp(c[0]):{},a.rtcpFeedback=n.matchPrefix(e,"a=rtcp-fb:"+o+" ").map(n.parseRtcpFb),t.codecs.push(a),a.name.toUpperCase()){case"RED":case"ULPFEC":t.fecMechanisms.push(a.name.toUpperCase())}}}return n.matchPrefix(e,"a=extmap:").forEach(function(e){t.headerExtensions.push(n.parseExtmap(e))}),t},n.writeRtpDescription=function(e,t){var i="";i+="m="+e+" ",i+=t.codecs.length>0?"9":"0",i+=" UDP/TLS/RTP/SAVPF ",i+=t.codecs.map(function(e){return void 0!==e.preferredPayloadType?e.preferredPayloadType:e.payloadType}).join(" ")+"\r\n",i+="c=IN IP4 0.0.0.0\r\n",i+="a=rtcp:9 IN IP4 0.0.0.0\r\n",t.codecs.forEach(function(e){i+=n.writeRtpMap(e),i+=n.writeFmtp(e),i+=n.writeRtcpFb(e)});var r=0;return t.codecs.forEach(function(e){e.maxptime>r&&(r=e.maxptime)}),r>0&&(i+="a=maxptime:"+r+"\r\n"),i+="a=rtcp-mux\r\n",t.headerExtensions.forEach(function(e){i+=n.writeExtmap(e)}),i},n.parseRtpEncodingParameters=function(e){var t,i=[],r=n.parseRtpParameters(e),o=-1!==r.fecMechanisms.indexOf("RED"),s=-1!==r.fecMechanisms.indexOf("ULPFEC"),a=n.matchPrefix(e,"a=ssrc:").map(function(e){return n.parseSsrcMedia(e)}).filter(function(e){return"cname"===e.attribute}),c=a.length>0&&a[0].ssrc,l=n.matchPrefix(e,"a=ssrc-group:FID").map(function(e){var t=e.split(" ");return t.shift(),t.map(function(e){return parseInt(e,10)})});l.length>0&&l[0].length>1&&l[0][0]===c&&(t=l[0][1]),r.codecs.forEach(function(e){if("RTX"===e.name.toUpperCase()&&e.parameters.apt){var n={ssrc:c,codecPayloadType:parseInt(e.parameters.apt,10),rtx:{ssrc:t}};i.push(n),o&&((n=JSON.parse(JSON.stringify(n))).fec={ssrc:t,mechanism:s?"red+ulpfec":"red"},i.push(n))}}),0===i.length&&c&&i.push({ssrc:c});var d=n.matchPrefix(e,"b=");return d.length&&(d=0===d[0].indexOf("b=TIAS:")?parseInt(d[0].substr(7),10):0===d[0].indexOf("b=AS:")?1e3*parseInt(d[0].substr(5),10)*.95-16e3:void 0,i.forEach(function(e){e.maxBitrate=d})),i},n.parseRtcpParameters=function(e){var t={},i=n.matchPrefix(e,"a=ssrc:").map(function(e){return n.parseSsrcMedia(e)}).filter(function(e){return"cname"===e.attribute})[0];i&&(t.cname=i.value,t.ssrc=i.ssrc);var r=n.matchPrefix(e,"a=rtcp-rsize");t.reducedSize=r.length>0,t.compound=0===r.length;var o=n.matchPrefix(e,"a=rtcp-mux");return t.mux=o.length>0,t},n.parseMsid=function(e){var t,i=n.matchPrefix(e,"a=msid:");if(1===i.length)return t=i[0].substr(7).split(" "),{stream:t[0],track:t[1]};var r=n.matchPrefix(e,"a=ssrc:").map(function(e){return n.parseSsrcMedia(e)}).filter(function(e){return"msid"===e.attribute});return r.length>0?(t=r[0].value.split(" "),{stream:t[0],track:t[1]}):void 0},n.generateSessionId=function(){return Math.random().toString().substr(2,21)},n.writeSessionBoilerplate=function(e,t){var i=void 0!==t?t:2;return"v=0\r\no=thisisadapterortc "+(e||n.generateSessionId())+" "+i+" IN IP4 127.0.0.1\r\ns=-\r\nt=0 0\r\n"},n.writeMediaSection=function(e,t,i,r){var o=n.writeRtpDescription(e.kind,t);if(o+=n.writeIceParameters(e.iceGatherer.getLocalParameters()),o+=n.writeDtlsParameters(e.dtlsTransport.getLocalParameters(),"offer"===i?"actpass":"active"),o+="a=mid:"+e.mid+"\r\n",e.direction?o+="a="+e.direction+"\r\n":e.rtpSender&&e.rtpReceiver?o+="a=sendrecv\r\n":e.rtpSender?o+="a=sendonly\r\n":e.rtpReceiver?o+="a=recvonly\r\n":o+="a=inactive\r\n",e.rtpSender){var s="msid:"+r.id+" "+e.rtpSender.track.id+"\r\n";o+="a="+s,o+="a=ssrc:"+e.sendEncodingParameters[0].ssrc+" "+s,e.sendEncodingParameters[0].rtx&&(o+="a=ssrc:"+e.sendEncodingParameters[0].rtx.ssrc+" "+s,o+="a=ssrc-group:FID "+e.sendEncodingParameters[0].ssrc+" "+e.sendEncodingParameters[0].rtx.ssrc+"\r\n")}return o+="a=ssrc:"+e.sendEncodingParameters[0].ssrc+" cname:"+n.localCName+"\r\n",e.rtpSender&&e.sendEncodingParameters[0].rtx&&(o+="a=ssrc:"+e.sendEncodingParameters[0].rtx.ssrc+" cname:"+n.localCName+"\r\n"),o},n.getDirection=function(e,t){for(var i=n.splitLines(e),r=0;r<i.length;r++)switch(i[r]){case"a=sendrecv":case"a=sendonly":case"a=recvonly":case"a=inactive":return i[r].substr(2)}return t?n.getDirection(t):"sendrecv"},n.getKind=function(e){return n.splitLines(e)[0].split(" ")[0].substr(2)},n.isRejected=function(e){return"0"===e.split(" ",2)[1]},n.parseMLine=function(e){var t=n.splitLines(e)[0].split(" ");return{kind:t[0].substr(2),port:parseInt(t[1],10),protocol:t[2],fmt:t.slice(3).join(" ")}},"object"==typeof t&&(t.exports=n)},{}],3:[function(e,t,i){(function(i){"use strict";var n=e("./adapter_factory.js");t.exports=n({window:i.window})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./adapter_factory.js":4}],4:[function(e,t,i){"use strict";var n=e("./utils");t.exports=function(t,i){var r=t&&t.window,o={shimChrome:!0,shimFirefox:!0,shimEdge:!0,shimSafari:!0};for(var s in i)hasOwnProperty.call(i,s)&&(o[s]=i[s]);var a=n.log,c=n.detectBrowser(r),l={browserDetails:c,extractVersion:n.extractVersion,disableLog:n.disableLog,disableWarnings:n.disableWarnings},d=e("./chrome/chrome_shim")||null,h=e("./edge/edge_shim")||null,u=e("./firefox/firefox_shim")||null,p=e("./safari/safari_shim")||null,f=e("./common_shim")||null;switch(c.browser){case"chrome":if(!d||!d.shimPeerConnection||!o.shimChrome)return a("Chrome shim is not included in this adapter release."),l;a("adapter.js shimming chrome."),l.browserShim=d,f.shimCreateObjectURL(r),d.shimGetUserMedia(r),d.shimMediaStream(r),d.shimSourceObject(r),d.shimPeerConnection(r),d.shimOnTrack(r),d.shimAddTrackRemoveTrack(r),d.shimGetSendersWithDtmf(r),f.shimRTCIceCandidate(r);break;case"firefox":if(!u||!u.shimPeerConnection||!o.shimFirefox)return a("Firefox shim is not included in this adapter release."),l;a("adapter.js shimming firefox."),l.browserShim=u,f.shimCreateObjectURL(r),u.shimGetUserMedia(r),u.shimSourceObject(r),u.shimPeerConnection(r),u.shimOnTrack(r),u.shimRemoveStream(r),f.shimRTCIceCandidate(r);break;case"edge":if(!h||!h.shimPeerConnection||!o.shimEdge)return a("MS edge shim is not included in this adapter release."),l;a("adapter.js shimming edge."),l.browserShim=h,f.shimCreateObjectURL(r),h.shimGetUserMedia(r),h.shimPeerConnection(r),h.shimReplaceTrack(r);break;case"safari":if(!p||!o.shimSafari)return a("Safari shim is not included in this adapter release."),l;a("adapter.js shimming safari."),l.browserShim=p,f.shimCreateObjectURL(r),p.shimRTCIceServerUrls(r),p.shimCallbacksAPI(r),p.shimLocalStreamsAPI(r),p.shimRemoteStreamsAPI(r),p.shimTrackEventTransceiver(r),p.shimGetUserMedia(r),p.shimCreateOfferLegacy(r),f.shimRTCIceCandidate(r);break;default:a("Unsupported browser!")}return l}},{"./chrome/chrome_shim":5,"./common_shim":7,"./edge/edge_shim":8,"./firefox/firefox_shim":10,"./safari/safari_shim":12,"./utils":13}],5:[function(e,t,i){"use strict";var n=e("../utils.js"),r=n.log,o=function(e){e.MediaStream=e.MediaStream||e.webkitMediaStream},s=function(e){if("object"==typeof e&&e.RTCPeerConnection&&!("ontrack"in e.RTCPeerConnection.prototype)){Object.defineProperty(e.RTCPeerConnection.prototype,"ontrack",{get:function(){return this._ontrack},set:function(e){this._ontrack&&this.removeEventListener("track",this._ontrack),this.addEventListener("track",this._ontrack=e)}});var t=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){var i=this;return i._ontrackpoly||(i._ontrackpoly=function(t){t.stream.addEventListener("addtrack",function(n){var r;r=e.RTCPeerConnection.prototype.getReceivers?i.getReceivers().find(function(e){return e.track&&e.track.id===n.track.id}):{track:n.track};var o=new Event("track");o.track=n.track,o.receiver=r,o.transceiver={receiver:r},o.streams=[t.stream],i.dispatchEvent(o)}),t.stream.getTracks().forEach(function(n){var r;r=e.RTCPeerConnection.prototype.getReceivers?i.getReceivers().find(function(e){return e.track&&e.track.id===n.id}):{track:n};var o=new Event("track");o.track=n,o.receiver=r,o.transceiver={receiver:r},o.streams=[t.stream],i.dispatchEvent(o)})},i.addEventListener("addstream",i._ontrackpoly)),t.apply(i,arguments)}}},a=function(e){if("object"==typeof e&&e.RTCPeerConnection&&!("getSenders"in e.RTCPeerConnection.prototype)&&"createDTMFSender"in e.RTCPeerConnection.prototype){var t=function(e,t){return{track:t,get dtmf(){return void 0===this._dtmf&&("audio"===t.kind?this._dtmf=e.createDTMFSender(t):this._dtmf=null),this._dtmf},_pc:e}};if(!e.RTCPeerConnection.prototype.getSenders){e.RTCPeerConnection.prototype.getSenders=function(){return this._senders=this._senders||[],this._senders.slice()};var i=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addTrack=function(e,n){var r=i.apply(this,arguments);return r||(r=t(this,e),this._senders.push(r)),r};var n=e.RTCPeerConnection.prototype.removeTrack;e.RTCPeerConnection.prototype.removeTrack=function(e){n.apply(this,arguments);var t=this._senders.indexOf(e);-1!==t&&this._senders.splice(t,1)}}var r=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(e){var i=this;i._senders=i._senders||[],r.apply(i,[e]),e.getTracks().forEach(function(e){i._senders.push(t(i,e))})};var o=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(e){var t=this;t._senders=t._senders||[],o.apply(t,[e]),e.getTracks().forEach(function(e){var i=t._senders.find(function(t){return t.track===e});i&&t._senders.splice(t._senders.indexOf(i),1)})}}else if("object"==typeof e&&e.RTCPeerConnection&&"getSenders"in e.RTCPeerConnection.prototype&&"createDTMFSender"in e.RTCPeerConnection.prototype&&e.RTCRtpSender&&!("dtmf"in e.RTCRtpSender.prototype)){var s=e.RTCPeerConnection.prototype.getSenders;e.RTCPeerConnection.prototype.getSenders=function(){var e=this,t=s.apply(e,[]);return t.forEach(function(t){t._pc=e}),t},Object.defineProperty(e.RTCRtpSender.prototype,"dtmf",{get:function(){return void 0===this._dtmf&&("audio"===this.track.kind?this._dtmf=this._pc.createDTMFSender(this.track):this._dtmf=null),this._dtmf}})}},c=function(e){var t=e&&e.URL;"object"==typeof e&&(!e.HTMLMediaElement||"srcObject"in e.HTMLMediaElement.prototype||Object.defineProperty(e.HTMLMediaElement.prototype,"srcObject",{get:function(){return this._srcObject},set:function(e){var i=this;this._srcObject=e,this.src&&t.revokeObjectURL(this.src),e?(this.src=t.createObjectURL(e),e.addEventListener("addtrack",function(){i.src&&t.revokeObjectURL(i.src),i.src=t.createObjectURL(e)}),e.addEventListener("removetrack",function(){i.src&&t.revokeObjectURL(i.src),i.src=t.createObjectURL(e)})):this.src=""}}))},l=function(e){function t(e,t){var i=t.sdp;return Object.keys(e._reverseStreams||[]).forEach(function(t){var n=e._reverseStreams[t],r=e._streams[n.id];i=i.replace(new RegExp(r.id,"g"),n.id)}),new RTCSessionDescription({type:t.type,sdp:i})}var i=n.detectBrowser(e);if(!(e.RTCPeerConnection.prototype.addTrack&&i.version>=64)){var r=e.RTCPeerConnection.prototype.getLocalStreams;e.RTCPeerConnection.prototype.getLocalStreams=function(){var e=this,t=r.apply(this);return e._reverseStreams=e._reverseStreams||{},t.map(function(t){return e._reverseStreams[t.id]})};var o=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(t){var i=this;if(i._streams=i._streams||{},i._reverseStreams=i._reverseStreams||{},t.getTracks().forEach(function(e){if(i.getSenders().find(function(t){return t.track===e}))throw new DOMException("Track already exists.","InvalidAccessError")}),!i._reverseStreams[t.id]){var n=new e.MediaStream(t.getTracks());i._streams[t.id]=n,i._reverseStreams[n.id]=t,t=n}o.apply(i,[t])};var s=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(e){this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},s.apply(this,[this._streams[e.id]||e]),delete this._reverseStreams[this._streams[e.id]?this._streams[e.id].id:e.id],delete this._streams[e.id]},e.RTCPeerConnection.prototype.addTrack=function(t,i){var n=this;if("closed"===n.signalingState)throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");var r=[].slice.call(arguments,1);if(1!==r.length||!r[0].getTracks().find(function(e){return e===t}))throw new DOMException("The adapter.js addTrack polyfill only supports a single  stream which is associated with the specified track.","NotSupportedError");if(n.getSenders().find(function(e){return e.track===t}))throw new DOMException("Track already exists.","InvalidAccessError");n._streams=n._streams||{},n._reverseStreams=n._reverseStreams||{};var o=n._streams[i.id];if(o)o.addTrack(t),Promise.resolve().then(function(){n.dispatchEvent(new Event("negotiationneeded"))});else{var s=new e.MediaStream([t]);n._streams[i.id]=s,n._reverseStreams[s.id]=i,n.addStream(s)}return n.getSenders().find(function(e){return e.track===t})},["createOffer","createAnswer"].forEach(function(i){var n=e.RTCPeerConnection.prototype[i];e.RTCPeerConnection.prototype[i]=function(){var e=this,i=arguments;return arguments.length&&"function"==typeof arguments[0]?n.apply(e,[function(n){var r=t(e,n);i[0].apply(null,[r])},function(e){i[1]&&i[1].apply(null,e)},arguments[2]]):n.apply(e,arguments).then(function(i){return t(e,i)})}});var a=e.RTCPeerConnection.prototype.setLocalDescription;e.RTCPeerConnection.prototype.setLocalDescription=function(){return arguments.length&&arguments[0].type?(arguments[0]=function(e,t){var i=t.sdp;return Object.keys(e._reverseStreams||[]).forEach(function(t){var n=e._reverseStreams[t],r=e._streams[n.id];i=i.replace(new RegExp(n.id,"g"),r.id)}),new RTCSessionDescription({type:t.type,sdp:i})}(this,arguments[0]),a.apply(this,arguments)):a.apply(this,arguments)};var c=Object.getOwnPropertyDescriptor(e.RTCPeerConnection.prototype,"localDescription");Object.defineProperty(e.RTCPeerConnection.prototype,"localDescription",{get:function(){var e=c.get.apply(this);return""===e.type?e:t(this,e)}}),e.RTCPeerConnection.prototype.removeTrack=function(e){var t=this;if("closed"===t.signalingState)throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");if(!e._pc)throw new DOMException("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.","TypeError");if(!(e._pc===t))throw new DOMException("Sender was not created by this connection.","InvalidAccessError");t._streams=t._streams||{};var i;Object.keys(t._streams).forEach(function(n){t._streams[n].getTracks().find(function(t){return e.track===t})&&(i=t._streams[n])}),i&&(1===i.getTracks().length?t.removeStream(t._reverseStreams[i.id]):i.removeTrack(e.track),t.dispatchEvent(new Event("negotiationneeded")))}}},d=function(e){var t=n.detectBrowser(e);if(e.RTCPeerConnection){var i=e.RTCPeerConnection;e.RTCPeerConnection=function(e,t){if(e&&e.iceServers){for(var r=[],o=0;o<e.iceServers.length;o++){var s=e.iceServers[o];!s.hasOwnProperty("urls")&&s.hasOwnProperty("url")?(n.deprecated("RTCIceServer.url","RTCIceServer.urls"),(s=JSON.parse(JSON.stringify(s))).urls=s.url,r.push(s)):r.push(e.iceServers[o])}e.iceServers=r}return new i(e,t)},e.RTCPeerConnection.prototype=i.prototype,Object.defineProperty(e.RTCPeerConnection,"generateCertificate",{get:function(){return i.generateCertificate}})}else e.RTCPeerConnection=function(t,i){return r("PeerConnection"),t&&t.iceTransportPolicy&&(t.iceTransports=t.iceTransportPolicy),new e.webkitRTCPeerConnection(t,i)},e.RTCPeerConnection.prototype=e.webkitRTCPeerConnection.prototype,e.webkitRTCPeerConnection.generateCertificate&&Object.defineProperty(e.RTCPeerConnection,"generateCertificate",{get:function(){return e.webkitRTCPeerConnection.generateCertificate}});var o=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(e,t,i){var n=this,r=arguments;if(arguments.length>0&&"function"==typeof e)return o.apply(this,arguments);if(0===o.length&&(0===arguments.length||"function"!=typeof arguments[0]))return o.apply(this,[]);var s=function(e){var t={};return e.result().forEach(function(e){var i={id:e.id,timestamp:e.timestamp,type:{localcandidate:"local-candidate",remotecandidate:"remote-candidate"}[e.type]||e.type};e.names().forEach(function(t){i[t]=e.stat(t)}),t[i.id]=i}),t},a=function(e){return new Map(Object.keys(e).map(function(t){return[t,e[t]]}))};if(arguments.length>=2){return o.apply(this,[function(e){r[1](a(s(e)))},arguments[0]])}return new Promise(function(e,t){o.apply(n,[function(t){e(a(s(t)))},t])}).then(t,i)},t.version<51&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(t){var i=e.RTCPeerConnection.prototype[t];e.RTCPeerConnection.prototype[t]=function(){var e=arguments,t=this,n=new Promise(function(n,r){i.apply(t,[e[0],n,r])});return e.length<2?n:n.then(function(){e[1].apply(null,[])},function(t){e.length>=3&&e[2].apply(null,[t])})}}),t.version<52&&["createOffer","createAnswer"].forEach(function(t){var i=e.RTCPeerConnection.prototype[t];e.RTCPeerConnection.prototype[t]=function(){var e=this;if(arguments.length<1||1===arguments.length&&"object"==typeof arguments[0]){var t=1===arguments.length?arguments[0]:void 0;return new Promise(function(n,r){i.apply(e,[n,r,t])})}return i.apply(this,arguments)}}),["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(t){var i=e.RTCPeerConnection.prototype[t];e.RTCPeerConnection.prototype[t]=function(){return arguments[0]=new("addIceCandidate"===t?e.RTCIceCandidate:e.RTCSessionDescription)(arguments[0]),i.apply(this,arguments)}});var s=e.RTCPeerConnection.prototype.addIceCandidate;e.RTCPeerConnection.prototype.addIceCandidate=function(){return arguments[0]?s.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),Promise.resolve())}};t.exports={shimMediaStream:o,shimOnTrack:s,shimAddTrackRemoveTrack:l,shimGetSendersWithDtmf:a,shimSourceObject:c,shimPeerConnection:d,shimGetUserMedia:e("./getusermedia")}},{"../utils.js":13,"./getusermedia":6}],6:[function(e,t,i){"use strict";var n=e("../utils.js"),r=n.log;t.exports=function(e){var t=n.detectBrowser(e),i=e&&e.navigator,o=function(e){if("object"!=typeof e||e.mandatory||e.optional)return e;var t={};return Object.keys(e).forEach(function(i){if("require"!==i&&"advanced"!==i&&"mediaSource"!==i){var n="object"==typeof e[i]?e[i]:{ideal:e[i]};void 0!==n.exact&&"number"==typeof n.exact&&(n.min=n.max=n.exact);var r=function(e,t){return e?e+t.charAt(0).toUpperCase()+t.slice(1):"deviceId"===t?"sourceId":t};if(void 0!==n.ideal){t.optional=t.optional||[];var o={};"number"==typeof n.ideal?(o[r("min",i)]=n.ideal,t.optional.push(o),(o={})[r("max",i)]=n.ideal,t.optional.push(o)):(o[r("",i)]=n.ideal,t.optional.push(o))}void 0!==n.exact&&"number"!=typeof n.exact?(t.mandatory=t.mandatory||{},t.mandatory[r("",i)]=n.exact):["min","max"].forEach(function(e){void 0!==n[e]&&(t.mandatory=t.mandatory||{},t.mandatory[r(e,i)]=n[e])})}}),e.advanced&&(t.optional=(t.optional||[]).concat(e.advanced)),t},s=function(e,n){if(t.version>=61)return n(e);if((e=JSON.parse(JSON.stringify(e)))&&"object"==typeof e.audio){var s=function(e,t,i){t in e&&!(i in e)&&(e[i]=e[t],delete e[t])};s((e=JSON.parse(JSON.stringify(e))).audio,"autoGainControl","googAutoGainControl"),s(e.audio,"noiseSuppression","googNoiseSuppression"),e.audio=o(e.audio)}if(e&&"object"==typeof e.video){var a=e.video.facingMode;a=a&&("object"==typeof a?a:{ideal:a});var c=t.version<66;if(a&&("user"===a.exact||"environment"===a.exact||"user"===a.ideal||"environment"===a.ideal)&&(!i.mediaDevices.getSupportedConstraints||!i.mediaDevices.getSupportedConstraints().facingMode||c)){delete e.video.facingMode;var l;if("environment"===a.exact||"environment"===a.ideal?l=["back","rear"]:"user"!==a.exact&&"user"!==a.ideal||(l=["front"]),l)return i.mediaDevices.enumerateDevices().then(function(t){var i=(t=t.filter(function(e){return"videoinput"===e.kind})).find(function(e){return l.some(function(t){return-1!==e.label.toLowerCase().indexOf(t)})});return!i&&t.length&&-1!==l.indexOf("back")&&(i=t[t.length-1]),i&&(e.video.deviceId=a.exact?{exact:i.deviceId}:{ideal:i.deviceId}),e.video=o(e.video),r("chrome: "+JSON.stringify(e)),n(e)})}e.video=o(e.video)}return r("chrome: "+JSON.stringify(e)),n(e)},a=function(e){return{name:{PermissionDeniedError:"NotAllowedError",InvalidStateError:"NotReadableError",DevicesNotFoundError:"NotFoundError",ConstraintNotSatisfiedError:"OverconstrainedError",TrackStartError:"NotReadableError",MediaDeviceFailedDueToShutdown:"NotReadableError",MediaDeviceKillSwitchOn:"NotReadableError"}[e.name]||e.name,message:e.message,constraint:e.constraintName,toString:function(){return this.name+(this.message&&": ")+this.message}}};i.getUserMedia=function(e,t,n){s(e,function(e){i.webkitGetUserMedia(e,t,function(e){n&&n(a(e))})})};var c=function(e){return new Promise(function(t,n){i.getUserMedia(e,t,n)})};if(i.mediaDevices||(i.mediaDevices={getUserMedia:c,enumerateDevices:function(){return new Promise(function(t){var i={audio:"audioinput",video:"videoinput"};return e.MediaStreamTrack.getSources(function(e){t(e.map(function(e){return{label:e.label,kind:i[e.kind],deviceId:e.id,groupId:""}}))})})},getSupportedConstraints:function(){return{deviceId:!0,echoCancellation:!0,facingMode:!0,frameRate:!0,height:!0,width:!0}}}),i.mediaDevices.getUserMedia){var l=i.mediaDevices.getUserMedia.bind(i.mediaDevices);i.mediaDevices.getUserMedia=function(e){return s(e,function(e){return l(e).then(function(t){if(e.audio&&!t.getAudioTracks().length||e.video&&!t.getVideoTracks().length)throw t.getTracks().forEach(function(e){e.stop()}),new DOMException("","NotFoundError");return t},function(e){return Promise.reject(a(e))})})}}else i.mediaDevices.getUserMedia=function(e){return c(e)};void 0===i.mediaDevices.addEventListener&&(i.mediaDevices.addEventListener=function(){r("Dummy mediaDevices.addEventListener called.")}),void 0===i.mediaDevices.removeEventListener&&(i.mediaDevices.removeEventListener=function(){r("Dummy mediaDevices.removeEventListener called.")})}},{"../utils.js":13}],7:[function(e,t,i){"use strict";var n=e("sdp"),r=e("./utils");t.exports={shimRTCIceCandidate:function(e){if(!(e.RTCIceCandidate&&"foundation"in e.RTCIceCandidate.prototype)){var t=e.RTCIceCandidate;e.RTCIceCandidate=function(e){"object"==typeof e&&e.candidate&&0===e.candidate.indexOf("a=")&&((e=JSON.parse(JSON.stringify(e))).candidate=e.candidate.substr(2));var i=new t(e),r=n.parseCandidate(e.candidate),o=Object.assign(i,r);return o.toJSON=function(){return{candidate:o.candidate,sdpMid:o.sdpMid,sdpMLineIndex:o.sdpMLineIndex,usernameFragment:o.usernameFragment}},o},function(e,t,i){if(e.RTCPeerConnection){var n=e.RTCPeerConnection.prototype,r=n.addEventListener;n.addEventListener=function(e,n){if(e!==t)return r.apply(this,arguments);var o=function(e){n(i(e))};return this._eventMap=this._eventMap||{},this._eventMap[n]=o,r.apply(this,[e,o])};var o=n.removeEventListener;n.removeEventListener=function(e,i){if(e!==t||!this._eventMap||!this._eventMap[i])return o.apply(this,arguments);var n=this._eventMap[i];return delete this._eventMap[i],o.apply(this,[e,n])},Object.defineProperty(n,"on"+t,{get:function(){return this["_on"+t]},set:function(e){this["_on"+t]&&(this.removeEventListener(t,this["_on"+t]),delete this["_on"+t]),e&&this.addEventListener(t,this["_on"+t]=e)}})}}(e,"icecandidate",function(t){return t.candidate&&Object.defineProperty(t,"candidate",{value:new e.RTCIceCandidate(t.candidate),writable:"false"}),t})}},shimCreateObjectURL:function(e){var t=e&&e.URL;if("object"==typeof e&&e.HTMLMediaElement&&"srcObject"in e.HTMLMediaElement.prototype&&t.createObjectURL&&t.revokeObjectURL){var i=t.createObjectURL.bind(t),n=t.revokeObjectURL.bind(t),o=new Map,s=0;t.createObjectURL=function(e){if("getTracks"in e){var t="polyblob:"+ ++s;return o.set(t,e),r.deprecated("URL.createObjectURL(stream)","elem.srcObject = stream"),t}return i(e)},t.revokeObjectURL=function(e){n(e),o.delete(e)};var a=Object.getOwnPropertyDescriptor(e.HTMLMediaElement.prototype,"src");Object.defineProperty(e.HTMLMediaElement.prototype,"src",{get:function(){return a.get.apply(this)},set:function(e){return this.srcObject=o.get(e)||null,a.set.apply(this,[e])}});var c=e.HTMLMediaElement.prototype.setAttribute;e.HTMLMediaElement.prototype.setAttribute=function(){return 2===arguments.length&&"src"===(""+arguments[0]).toLowerCase()&&(this.srcObject=o.get(arguments[1])||null),c.apply(this,arguments)}}}}},{"./utils":13,sdp:2}],8:[function(e,t,i){"use strict";var n=e("../utils"),r=e("rtcpeerconnection-shim");t.exports={shimGetUserMedia:e("./getusermedia"),shimPeerConnection:function(e){var t=n.detectBrowser(e);if(e.RTCIceGatherer&&(e.RTCIceCandidate||(e.RTCIceCandidate=function(e){return e}),e.RTCSessionDescription||(e.RTCSessionDescription=function(e){return e}),t.version<15025)){var i=Object.getOwnPropertyDescriptor(e.MediaStreamTrack.prototype,"enabled");Object.defineProperty(e.MediaStreamTrack.prototype,"enabled",{set:function(e){i.set.call(this,e);var t=new Event("enabled");t.enabled=e,this.dispatchEvent(t)}})}!e.RTCRtpSender||"dtmf"in e.RTCRtpSender.prototype||Object.defineProperty(e.RTCRtpSender.prototype,"dtmf",{get:function(){return void 0===this._dtmf&&("audio"===this.track.kind?this._dtmf=new e.RTCDtmfSender(this):"video"===this.track.kind&&(this._dtmf=null)),this._dtmf}}),e.RTCPeerConnection=r(e,t.version)},shimReplaceTrack:function(e){!e.RTCRtpSender||"replaceTrack"in e.RTCRtpSender.prototype||(e.RTCRtpSender.prototype.replaceTrack=e.RTCRtpSender.prototype.setTrack)}}},{"../utils":13,"./getusermedia":9,"rtcpeerconnection-shim":1}],9:[function(e,t,i){"use strict";t.exports=function(e){var t=e&&e.navigator,i=t.mediaDevices.getUserMedia.bind(t.mediaDevices);t.mediaDevices.getUserMedia=function(e){return i(e).catch(function(e){return Promise.reject(function(e){return{name:{PermissionDeniedError:"NotAllowedError"}[e.name]||e.name,message:e.message,constraint:e.constraint,toString:function(){return this.name}}}(e))})}}},{}],10:[function(e,t,i){"use strict";var n=e("../utils"),r=function(e){"object"!=typeof e||!e.RTCPeerConnection||"ontrack"in e.RTCPeerConnection.prototype||Object.defineProperty(e.RTCPeerConnection.prototype,"ontrack",{get:function(){return this._ontrack},set:function(e){this._ontrack&&(this.removeEventListener("track",this._ontrack),this.removeEventListener("addstream",this._ontrackpoly)),this.addEventListener("track",this._ontrack=e),this.addEventListener("addstream",this._ontrackpoly=function(e){e.stream.getTracks().forEach(function(t){var i=new Event("track");i.track=t,i.receiver={track:t},i.transceiver={receiver:i.receiver},i.streams=[e.stream],this.dispatchEvent(i)}.bind(this))}.bind(this))}}),"object"==typeof e&&e.RTCTrackEvent&&"receiver"in e.RTCTrackEvent.prototype&&!("transceiver"in e.RTCTrackEvent.prototype)&&Object.defineProperty(e.RTCTrackEvent.prototype,"transceiver",{get:function(){return{receiver:this.receiver}}})},o=function(e){"object"==typeof e&&(!e.HTMLMediaElement||"srcObject"in e.HTMLMediaElement.prototype||Object.defineProperty(e.HTMLMediaElement.prototype,"srcObject",{get:function(){return this.mozSrcObject},set:function(e){this.mozSrcObject=e}}))},s=function(e){var t=n.detectBrowser(e);if("object"==typeof e&&(e.RTCPeerConnection||e.mozRTCPeerConnection)){e.RTCPeerConnection||(e.RTCPeerConnection=function(i,n){if(t.version<38&&i&&i.iceServers){for(var r=[],o=0;o<i.iceServers.length;o++){var s=i.iceServers[o];if(s.hasOwnProperty("urls"))for(var a=0;a<s.urls.length;a++){var c={url:s.urls[a]};0===s.urls[a].indexOf("turn")&&(c.username=s.username,c.credential=s.credential),r.push(c)}else r.push(i.iceServers[o])}i.iceServers=r}return new e.mozRTCPeerConnection(i,n)},e.RTCPeerConnection.prototype=e.mozRTCPeerConnection.prototype,e.mozRTCPeerConnection.generateCertificate&&Object.defineProperty(e.RTCPeerConnection,"generateCertificate",{get:function(){return e.mozRTCPeerConnection.generateCertificate}}),e.RTCSessionDescription=e.mozRTCSessionDescription,e.RTCIceCandidate=e.mozRTCIceCandidate),["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(t){var i=e.RTCPeerConnection.prototype[t];e.RTCPeerConnection.prototype[t]=function(){return arguments[0]=new("addIceCandidate"===t?e.RTCIceCandidate:e.RTCSessionDescription)(arguments[0]),i.apply(this,arguments)}});var i=e.RTCPeerConnection.prototype.addIceCandidate;e.RTCPeerConnection.prototype.addIceCandidate=function(){return arguments[0]?i.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),Promise.resolve())};var r={inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"},o=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(e,i,n){return o.apply(this,[e||null]).then(function(e){if(t.version<48&&(e=function(e){var t=new Map;return Object.keys(e).forEach(function(i){t.set(i,e[i]),t[i]=e[i]}),t}(e)),t.version<53&&!i)try{e.forEach(function(e){e.type=r[e.type]||e.type})}catch(t){if("TypeError"!==t.name)throw t;e.forEach(function(t,i){e.set(i,Object.assign({},t,{type:r[t.type]||t.type}))})}return e}).then(i,n)}}},a=function(e){"removeStream"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.removeStream=function(e){var t=this;n.deprecated("removeStream","removeTrack"),this.getSenders().forEach(function(i){i.track&&-1!==e.getTracks().indexOf(i.track)&&t.removeTrack(i)})})};t.exports={shimOnTrack:r,shimSourceObject:o,shimPeerConnection:s,shimRemoveStream:a,shimGetUserMedia:e("./getusermedia")}},{"../utils":13,"./getusermedia":11}],11:[function(e,t,i){"use strict";var n=e("../utils"),r=n.log;t.exports=function(e){var t=n.detectBrowser(e),i=e&&e.navigator,o=e&&e.MediaStreamTrack,s=function(e){return{name:{InternalError:"NotReadableError",NotSupportedError:"TypeError",PermissionDeniedError:"NotAllowedError",SecurityError:"NotAllowedError"}[e.name]||e.name,message:{"The operation is insecure.":"The request is not allowed by the user agent or the platform in the current context."}[e.message]||e.message,constraint:e.constraint,toString:function(){return this.name+(this.message&&": ")+this.message}}},a=function(e,n,o){var a=function(e){if("object"!=typeof e||e.require)return e;var t=[];return Object.keys(e).forEach(function(i){if("require"!==i&&"advanced"!==i&&"mediaSource"!==i){var n=e[i]="object"==typeof e[i]?e[i]:{ideal:e[i]};if(void 0===n.min&&void 0===n.max&&void 0===n.exact||t.push(i),void 0!==n.exact&&("number"==typeof n.exact?n.min=n.max=n.exact:e[i]=n.exact,delete n.exact),void 0!==n.ideal){e.advanced=e.advanced||[];var r={};"number"==typeof n.ideal?r[i]={min:n.ideal,max:n.ideal}:r[i]=n.ideal,e.advanced.push(r),delete n.ideal,Object.keys(n).length||delete e[i]}}}),t.length&&(e.require=t),e};return e=JSON.parse(JSON.stringify(e)),t.version<38&&(r("spec: "+JSON.stringify(e)),e.audio&&(e.audio=a(e.audio)),e.video&&(e.video=a(e.video)),r("ff37: "+JSON.stringify(e))),i.mozGetUserMedia(e,n,function(e){o(s(e))})};if(i.mediaDevices||(i.mediaDevices={getUserMedia:function(e){return new Promise(function(t,i){a(e,t,i)})},addEventListener:function(){},removeEventListener:function(){}}),i.mediaDevices.enumerateDevices=i.mediaDevices.enumerateDevices||function(){return new Promise(function(e){e([{kind:"audioinput",deviceId:"default",label:"",groupId:""},{kind:"videoinput",deviceId:"default",label:"",groupId:""}])})},t.version<41){var c=i.mediaDevices.enumerateDevices.bind(i.mediaDevices);i.mediaDevices.enumerateDevices=function(){return c().then(void 0,function(e){if("NotFoundError"===e.name)return[];throw e})}}if(t.version<49){var l=i.mediaDevices.getUserMedia.bind(i.mediaDevices);i.mediaDevices.getUserMedia=function(e){return l(e).then(function(t){if(e.audio&&!t.getAudioTracks().length||e.video&&!t.getVideoTracks().length)throw t.getTracks().forEach(function(e){e.stop()}),new DOMException("The object can not be found here.","NotFoundError");return t},function(e){return Promise.reject(s(e))})}}if(!(t.version>55&&"autoGainControl"in i.mediaDevices.getSupportedConstraints())){var d=function(e,t,i){t in e&&!(i in e)&&(e[i]=e[t],delete e[t])},h=i.mediaDevices.getUserMedia.bind(i.mediaDevices);if(i.mediaDevices.getUserMedia=function(e){return"object"==typeof e&&"object"==typeof e.audio&&(e=JSON.parse(JSON.stringify(e)),d(e.audio,"autoGainControl","mozAutoGainControl"),d(e.audio,"noiseSuppression","mozNoiseSuppression")),h(e)},o&&o.prototype.getSettings){var u=o.prototype.getSettings;o.prototype.getSettings=function(){var e=u.apply(this,arguments);return d(e,"mozAutoGainControl","autoGainControl"),d(e,"mozNoiseSuppression","noiseSuppression"),e}}if(o&&o.prototype.applyConstraints){var p=o.prototype.applyConstraints;o.prototype.applyConstraints=function(e){return"audio"===this.kind&&"object"==typeof e&&(e=JSON.parse(JSON.stringify(e)),d(e,"autoGainControl","mozAutoGainControl"),d(e,"noiseSuppression","mozNoiseSuppression")),p.apply(this,[e])}}}i.getUserMedia=function(e,r,o){if(t.version<44)return a(e,r,o);n.deprecated("navigator.getUserMedia","navigator.mediaDevices.getUserMedia"),i.mediaDevices.getUserMedia(e).then(r,o)}}},{"../utils":13}],12:[function(e,t,i){"use strict";var n=e("../utils"),r=function(e){if("object"==typeof e&&e.RTCPeerConnection){if("getLocalStreams"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.getLocalStreams=function(){return this._localStreams||(this._localStreams=[]),this._localStreams}),"getStreamById"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.getStreamById=function(e){var t=null;return this._localStreams&&this._localStreams.forEach(function(i){i.id===e&&(t=i)}),this._remoteStreams&&this._remoteStreams.forEach(function(i){i.id===e&&(t=i)}),t}),!("addStream"in e.RTCPeerConnection.prototype)){var t=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addStream=function(e){this._localStreams||(this._localStreams=[]),-1===this._localStreams.indexOf(e)&&this._localStreams.push(e);var i=this;e.getTracks().forEach(function(n){t.call(i,n,e)})},e.RTCPeerConnection.prototype.addTrack=function(e,i){i&&(this._localStreams?-1===this._localStreams.indexOf(i)&&this._localStreams.push(i):this._localStreams=[i]),t.call(this,e,i)}}"removeStream"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.removeStream=function(e){this._localStreams||(this._localStreams=[]);var t=this._localStreams.indexOf(e);if(-1!==t){this._localStreams.splice(t,1);var i=this,n=e.getTracks();this.getSenders().forEach(function(e){-1!==n.indexOf(e.track)&&i.removeTrack(e)})}})}},o=function(e){"object"==typeof e&&e.RTCPeerConnection&&("getRemoteStreams"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.getRemoteStreams=function(){return this._remoteStreams?this._remoteStreams:[]}),"onaddstream"in e.RTCPeerConnection.prototype||Object.defineProperty(e.RTCPeerConnection.prototype,"onaddstream",{get:function(){return this._onaddstream},set:function(e){this._onaddstream&&(this.removeEventListener("addstream",this._onaddstream),this.removeEventListener("track",this._onaddstreampoly)),this.addEventListener("addstream",this._onaddstream=e),this.addEventListener("track",this._onaddstreampoly=function(e){var t=e.streams[0];if(this._remoteStreams||(this._remoteStreams=[]),!(this._remoteStreams.indexOf(t)>=0)){this._remoteStreams.push(t);var i=new Event("addstream");i.stream=e.streams[0],this.dispatchEvent(i)}}.bind(this))}}))},s=function(e){if("object"==typeof e&&e.RTCPeerConnection){var t=e.RTCPeerConnection.prototype,i=t.createOffer,n=t.createAnswer,r=t.setLocalDescription,o=t.setRemoteDescription,s=t.addIceCandidate;t.createOffer=function(e,t){var n=arguments.length>=2?arguments[2]:arguments[0],r=i.apply(this,[n]);return t?(r.then(e,t),Promise.resolve()):r},t.createAnswer=function(e,t){var i=arguments.length>=2?arguments[2]:arguments[0],r=n.apply(this,[i]);return t?(r.then(e,t),Promise.resolve()):r};var a=function(e,t,i){var n=r.apply(this,[e]);return i?(n.then(t,i),Promise.resolve()):n};t.setLocalDescription=a,a=function(e,t,i){var n=o.apply(this,[e]);return i?(n.then(t,i),Promise.resolve()):n},t.setRemoteDescription=a,a=function(e,t,i){var n=s.apply(this,[e]);return i?(n.then(t,i),Promise.resolve()):n},t.addIceCandidate=a}},a=function(e){var t=e&&e.navigator;t.getUserMedia||(t.webkitGetUserMedia?t.getUserMedia=t.webkitGetUserMedia.bind(t):t.mediaDevices&&t.mediaDevices.getUserMedia&&(t.getUserMedia=function(e,i,n){t.mediaDevices.getUserMedia(e).then(i,n)}.bind(t)))},c=function(e){var t=e.RTCPeerConnection;e.RTCPeerConnection=function(e,i){if(e&&e.iceServers){for(var r=[],o=0;o<e.iceServers.length;o++){var s=e.iceServers[o];!s.hasOwnProperty("urls")&&s.hasOwnProperty("url")?(n.deprecated("RTCIceServer.url","RTCIceServer.urls"),(s=JSON.parse(JSON.stringify(s))).urls=s.url,delete s.url,r.push(s)):r.push(e.iceServers[o])}e.iceServers=r}return new t(e,i)},e.RTCPeerConnection.prototype=t.prototype,"generateCertificate"in e.RTCPeerConnection&&Object.defineProperty(e.RTCPeerConnection,"generateCertificate",{get:function(){return t.generateCertificate}})},l=function(e){"object"==typeof e&&e.RTCPeerConnection&&"receiver"in e.RTCTrackEvent.prototype&&!e.RTCTransceiver&&Object.defineProperty(e.RTCTrackEvent.prototype,"transceiver",{get:function(){return{receiver:this.receiver}}})},d=function(e){var t=e.RTCPeerConnection.prototype.createOffer;e.RTCPeerConnection.prototype.createOffer=function(e){if(e){var i=this.getTransceivers().find(function(e){return e.sender.track&&"audio"===e.sender.track.kind});!1===e.offerToReceiveAudio&&i?"sendrecv"===i.direction?i.setDirection("sendonly"):"recvonly"===i.direction&&i.setDirection("inactive"):!0!==e.offerToReceiveAudio||i||this.addTransceiver("audio");var n=this.getTransceivers().find(function(e){return e.sender.track&&"video"===e.sender.track.kind});!1===e.offerToReceiveVideo&&n?"sendrecv"===n.direction?n.setDirection("sendonly"):"recvonly"===n.direction&&n.setDirection("inactive"):!0!==e.offerToReceiveVideo||n||this.addTransceiver("video")}return t.apply(this,arguments)}};t.exports={shimCallbacksAPI:s,shimLocalStreamsAPI:r,shimRemoteStreamsAPI:o,shimGetUserMedia:a,shimRTCIceServerUrls:c,shimTrackEventTransceiver:l,shimCreateOfferLegacy:d}},{"../utils":13}],13:[function(e,t,i){"use strict";var n=!0,r=!0,o={disableLog:function(e){return"boolean"!=typeof e?new Error("Argument type: "+typeof e+". Please use a boolean."):(n=e,e?"adapter.js logging disabled":"adapter.js logging enabled")},disableWarnings:function(e){return"boolean"!=typeof e?new Error("Argument type: "+typeof e+". Please use a boolean."):(r=!e,"adapter.js deprecation warnings "+(e?"disabled":"enabled"))},log:function(){if("object"==typeof window){if(n)return;"undefined"!=typeof console&&"function"==typeof console.log&&console.log.apply(console,arguments)}},deprecated:function(e,t){r&&console.warn(e+" is deprecated, please use "+t+" instead.")},extractVersion:function(e,t,i){var n=e.match(t);return n&&n.length>=i&&parseInt(n[i],10)},detectBrowser:function(e){var t=e&&e.navigator,i={};if(i.browser=null,i.version=null,void 0===e||!e.navigator)return i.browser="Not a browser.",i;if(t.mozGetUserMedia)i.browser="firefox",i.version=this.extractVersion(t.userAgent,/Firefox\/(\d+)\./,1);else if(t.webkitGetUserMedia)if(e.webkitRTCPeerConnection)i.browser="chrome",i.version=this.extractVersion(t.userAgent,/Chrom(e|ium)\/(\d+)\./,2);else{if(!t.userAgent.match(/Version\/(\d+).(\d+)/))return i.browser="Unsupported webkit-based browser with GUM support but no WebRTC support.",i;i.browser="safari",i.version=this.extractVersion(t.userAgent,/AppleWebKit\/(\d+)\./,1)}else if(t.mediaDevices&&t.userAgent.match(/Edge\/(\d+).(\d+)$/))i.browser="edge",i.version=this.extractVersion(t.userAgent,/Edge\/(\d+).(\d+)$/,2);else{if(!t.mediaDevices||!t.userAgent.match(/AppleWebKit\/(\d+)\./))return i.browser="Not a supported browser.",i;i.browser="safari",i.version=this.extractVersion(t.userAgent,/AppleWebKit\/(\d+)\./,1)}return i}};t.exports={log:o.log,deprecated:o.deprecated,disableLog:o.disableLog,disableWarnings:o.disableWarnings,extractVersion:o.extractVersion,shimCreateObjectURL:o.shimCreateObjectURL,detectBrowser:o.detectBrowser.bind(o)}},{}]},{},[3])(3)}),function(){window.WebComponents=window.WebComponents||{flags:{}};var e=document.querySelector('script[src*="webcomponents-lite.js"]'),t={};if(!t.noOpts){if(location.search.slice(1).split("&").forEach(function(e){var i,n=e.split("=");n[0]&&(i=n[0].match(/wc-(.+)/))&&(t[i[1]]=n[1]||!0)}),e)for(var i,n=0;i=e.attributes[n];n++)"src"!==i.name&&(t[i.name]=i.value||!0);if(t.log&&t.log.split){var r=t.log.split(",");t.log={},r.forEach(function(e){t.log[e]=!0})}else t.log={}}t.register&&(window.CustomElements=window.CustomElements||{flags:{}},window.CustomElements.flags.register=t.register),WebComponents.flags=t}(),function(e){"use strict";function t(e){return void 0!==h[e]}function i(){a.call(this),this._isInvalid=!0}function n(e){return""==e&&i.call(this),e.toLowerCase()}function r(e){var t=e.charCodeAt(0);return t>32&&t<127&&-1==[34,35,60,62,63,96].indexOf(t)?e:encodeURIComponent(e)}function o(e){var t=e.charCodeAt(0);return t>32&&t<127&&-1==[34,35,60,62,96].indexOf(t)?e:encodeURIComponent(e)}function s(e,s,a){function c(e){g.push(e)}var l=s||"scheme start",d=0,_="",v=!1,y=!1,g=[];e:for(;(e[d-1]!=p||0==d)&&!this._isInvalid;){var b=e[d];switch(l){case"scheme start":if(!b||!f.test(b)){if(s){c("Invalid scheme.");break e}_="",l="no scheme";continue}_+=b.toLowerCase(),l="scheme";break;case"scheme":if(b&&m.test(b))_+=b.toLowerCase();else{if(":"!=b){if(s){if(p==b)break e;c("Code point not allowed in scheme: "+b);break e}_="",d=0,l="no scheme";continue}if(this._scheme=_,_="",s)break e;t(this._scheme)&&(this._isRelative=!0),l="file"==this._scheme?"relative":this._isRelative&&a&&a._scheme==this._scheme?"relative or authority":this._isRelative?"authority first slash":"scheme data"}break;case"scheme data":"?"==b?(this._query="?",l="query"):"#"==b?(this._fragment="#",l="fragment"):p!=b&&"\t"!=b&&"\n"!=b&&"\r"!=b&&(this._schemeData+=r(b));break;case"no scheme":if(a&&t(a._scheme)){l="relative";continue}c("Missing scheme."),i.call(this);break;case"relative or authority":if("/"!=b||"/"!=e[d+1]){c("Expected /, got: "+b),l="relative";continue}l="authority ignore slashes";break;case"relative":if(this._isRelative=!0,"file"!=this._scheme&&(this._scheme=a._scheme),p==b){this._host=a._host,this._port=a._port,this._path=a._path.slice(),this._query=a._query,this._username=a._username,this._password=a._password;break e}if("/"==b||"\\"==b)"\\"==b&&c("\\ is an invalid code point."),l="relative slash";else if("?"==b)this._host=a._host,this._port=a._port,this._path=a._path.slice(),this._query="?",this._username=a._username,this._password=a._password,l="query";else{if("#"!=b){var C=e[d+1],P=e[d+2];("file"!=this._scheme||!f.test(b)||":"!=C&&"|"!=C||p!=P&&"/"!=P&&"\\"!=P&&"?"!=P&&"#"!=P)&&(this._host=a._host,this._port=a._port,this._username=a._username,this._password=a._password,this._path=a._path.slice(),this._path.pop()),l="relative path";continue}this._host=a._host,this._port=a._port,this._path=a._path.slice(),this._query=a._query,this._fragment="#",this._username=a._username,this._password=a._password,l="fragment"}break;case"relative slash":if("/"!=b&&"\\"!=b){"file"!=this._scheme&&(this._host=a._host,this._port=a._port,this._username=a._username,this._password=a._password),l="relative path";continue}"\\"==b&&c("\\ is an invalid code point."),l="file"==this._scheme?"file host":"authority ignore slashes";break;case"authority first slash":if("/"!=b){c("Expected '/', got: "+b),l="authority ignore slashes";continue}l="authority second slash";break;case"authority second slash":if(l="authority ignore slashes","/"!=b){c("Expected '/', got: "+b);continue}break;case"authority ignore slashes":if("/"!=b&&"\\"!=b){l="authority";continue}c("Expected authority, got: "+b);break;case"authority":if("@"==b){v&&(c("@ already seen."),_+="%40"),v=!0;for(var S=0;S<_.length;S++){var E=_[S];if("\t"!=E&&"\n"!=E&&"\r"!=E)if(":"!=E||null!==this._password){var T=r(E);null!==this._password?this._password+=T:this._username+=T}else this._password="";else c("Invalid whitespace in authority.")}_=""}else{if(p==b||"/"==b||"\\"==b||"?"==b||"#"==b){d-=_.length,_="",l="host";continue}_+=b}break;case"file host":if(p==b||"/"==b||"\\"==b||"?"==b||"#"==b){2!=_.length||!f.test(_[0])||":"!=_[1]&&"|"!=_[1]?0==_.length?l="relative path start":(this._host=n.call(this,_),_="",l="relative path start"):l="relative path";continue}"\t"==b||"\n"==b||"\r"==b?c("Invalid whitespace in file host."):_+=b;break;case"host":case"hostname":if(":"!=b||y){if(p==b||"/"==b||"\\"==b||"?"==b||"#"==b){if(this._host=n.call(this,_),_="",l="relative path start",s)break e;continue}"\t"!=b&&"\n"!=b&&"\r"!=b?("["==b?y=!0:"]"==b&&(y=!1),_+=b):c("Invalid code point in host/hostname: "+b)}else if(this._host=n.call(this,_),_="",l="port","hostname"==s)break e;break;case"port":if(/[0-9]/.test(b))_+=b;else{if(p==b||"/"==b||"\\"==b||"?"==b||"#"==b||s){if(""!=_){var w=parseInt(_,10);w!=h[this._scheme]&&(this._port=w+""),_=""}if(s)break e;l="relative path start";continue}"\t"==b||"\n"==b||"\r"==b?c("Invalid code point in port: "+b):i.call(this)}break;case"relative path start":if("\\"==b&&c("'\\' not allowed in path."),l="relative path","/"!=b&&"\\"!=b)continue;break;case"relative path":if(p!=b&&"/"!=b&&"\\"!=b&&(s||"?"!=b&&"#"!=b))"\t"!=b&&"\n"!=b&&"\r"!=b&&(_+=r(b));else{"\\"==b&&c("\\ not allowed in relative path.");var R;(R=u[_.toLowerCase()])&&(_=R),".."==_?(this._path.pop(),"/"!=b&&"\\"!=b&&this._path.push("")):"."==_&&"/"!=b&&"\\"!=b?this._path.push(""):"."!=_&&("file"==this._scheme&&0==this._path.length&&2==_.length&&f.test(_[0])&&"|"==_[1]&&(_=_[0]+":"),this._path.push(_)),_="","?"==b?(this._query="?",l="query"):"#"==b&&(this._fragment="#",l="fragment")}break;case"query":s||"#"!=b?p!=b&&"\t"!=b&&"\n"!=b&&"\r"!=b&&(this._query+=o(b)):(this._fragment="#",l="fragment");break;case"fragment":p!=b&&"\t"!=b&&"\n"!=b&&"\r"!=b&&(this._fragment+=b)}d++}}function a(){this._scheme="",this._schemeData="",this._username="",this._password=null,this._host="",this._port="",this._path=[],this._query="",this._fragment="",this._isInvalid=!1,this._isRelative=!1}function c(e,t){void 0===t||t instanceof c||(t=new c(String(t))),this._url=e,a.call(this);var i=e.replace(/^[ \t\r\n\f]+|[ \t\r\n\f]+$/g,"");s.call(this,i,null,t)}var l=!1;if(!e.forceJURL)try{var d=new URL("b","http://a");d.pathname="c%20d",l="http://a/c%20d"===d.href}catch(e){}if(!l){var h=Object.create(null);h.ftp=21,h.file=0,h.gopher=70,h.http=80,h.https=443,h.ws=80,h.wss=443;var u=Object.create(null);u["%2e"]=".",u[".%2e"]="..",u["%2e."]="..",u["%2e%2e"]="..";var p=void 0,f=/[a-zA-Z]/,m=/[a-zA-Z0-9\+\-\.]/;c.prototype={toString:function(){return this.href},get href(){if(this._isInvalid)return this._url;var e="";return""==this._username&&null==this._password||(e=this._username+(null!=this._password?":"+this._password:"")+"@"),this.protocol+(this._isRelative?"//"+e+this.host:"")+this.pathname+this._query+this._fragment},set href(e){a.call(this),s.call(this,e)},get protocol(){return this._scheme+":"},set protocol(e){this._isInvalid||s.call(this,e+":","scheme start")},get host(){return this._isInvalid?"":this._port?this._host+":"+this._port:this._host},set host(e){!this._isInvalid&&this._isRelative&&s.call(this,e,"host")},get hostname(){return this._host},set hostname(e){!this._isInvalid&&this._isRelative&&s.call(this,e,"hostname")},get port(){return this._port},set port(e){!this._isInvalid&&this._isRelative&&s.call(this,e,"port")},get pathname(){return this._isInvalid?"":this._isRelative?"/"+this._path.join("/"):this._schemeData},set pathname(e){!this._isInvalid&&this._isRelative&&(this._path=[],s.call(this,e,"relative path start"))},get search(){return this._isInvalid||!this._query||"?"==this._query?"":this._query},set search(e){!this._isInvalid&&this._isRelative&&(this._query="?","?"==e[0]&&(e=e.slice(1)),s.call(this,e,"query"))},get hash(){return this._isInvalid||!this._fragment||"#"==this._fragment?"":this._fragment},set hash(e){this._isInvalid||(this._fragment="#","#"==e[0]&&(e=e.slice(1)),s.call(this,e,"fragment"))},get origin(){var e;if(this._isInvalid||!this._scheme)return"";switch(this._scheme){case"data":case"file":case"javascript":case"mailto":return"null"}return(e=this.host)?this._scheme+"://"+e:""}};var _=e.URL;_&&(c.createObjectURL=function(e){return _.createObjectURL.apply(_,arguments)},c.revokeObjectURL=function(e){_.revokeObjectURL(e)}),e.URL=c}}(self),"undefined"==typeof WeakMap&&function(){var e=Object.defineProperty,t=Date.now()%1e9,i=function(){this.name="__st"+(1e9*Math.random()>>>0)+t+++"__"};i.prototype={set:function(t,i){var n=t[this.name];return n&&n[0]===t?n[1]=i:e(t,this.name,{value:[t,i],writable:!0}),this},get:function(e){var t;return(t=e[this.name])&&t[0]===e?t[1]:void 0},delete:function(e){var t=e[this.name];return!(!t||t[0]!==e)&&(t[0]=t[1]=void 0,!0)},has:function(e){var t=e[this.name];return!!t&&t[0]===e}},window.WeakMap=i}(),function(e){function t(){p=!1;var e=f;f=[],e.sort(function(e,t){return e.uid_-t.uid_});var i=!1;e.forEach(function(e){var t=e.takeRecords();!function(e){e.nodes_.forEach(function(t){var i=d.get(t);i&&i.forEach(function(t){t.observer===e&&t.removeTransientObservers()})})}(e),t.length&&(e.callback_(t,e),i=!0)}),i&&t()}function i(e,t){for(var i=e;i;i=i.parentNode){var n=d.get(i);if(n)for(var r=0;r<n.length;r++){var o=n[r],s=o.options;if(i===e||s.subtree){var a=t(s);a&&o.enqueue(a)}}}}function n(e){this.callback_=e,this.nodes_=[],this.records_=[],this.uid_=++m}function r(e,t){this.type=e,this.target=t,this.addedNodes=[],this.removedNodes=[],this.previousSibling=null,this.nextSibling=null,this.attributeName=null,this.attributeNamespace=null,this.oldValue=null}function o(e,t){return _=new r(e,t)}function s(e){return v||(v=function(e){var t=new r(e.type,e.target);return t.addedNodes=e.addedNodes.slice(),t.removedNodes=e.removedNodes.slice(),t.previousSibling=e.previousSibling,t.nextSibling=e.nextSibling,t.attributeName=e.attributeName,t.attributeNamespace=e.attributeNamespace,t.oldValue=e.oldValue,t}(_),v.oldValue=e,v)}function a(e,t){return e===t?e:v&&function(e){return e===v||e===_}(e)?v:null}function c(e,t,i){this.observer=e,this.target=t,this.options=i,this.transientObservedNodes=[]}if(!e.JsMutationObserver){var l,d=new WeakMap;if(/Trident|Edge/.test(navigator.userAgent))l=setTimeout;else if(window.setImmediate)l=window.setImmediate;else{var h=[],u=String(Math.random());window.addEventListener("message",function(e){if(e.data===u){var t=h;h=[],t.forEach(function(e){e()})}}),l=function(e){h.push(e),window.postMessage(u,"*")}}var p=!1,f=[],m=0;n.prototype={observe:function(e,t){if(e=function(e){return window.ShadowDOMPolyfill&&window.ShadowDOMPolyfill.wrapIfNeeded(e)||e}(e),!t.childList&&!t.attributes&&!t.characterData||t.attributeOldValue&&!t.attributes||t.attributeFilter&&t.attributeFilter.length&&!t.attributes||t.characterDataOldValue&&!t.characterData)throw new SyntaxError;var i=d.get(e);i||d.set(e,i=[]);for(var n,r=0;r<i.length;r++)if(i[r].observer===this){(n=i[r]).removeListeners(),n.options=t;break}n||(n=new c(this,e,t),i.push(n),this.nodes_.push(e)),n.addListeners()},disconnect:function(){this.nodes_.forEach(function(e){for(var t=d.get(e),i=0;i<t.length;i++){var n=t[i];if(n.observer===this){n.removeListeners(),t.splice(i,1);break}}},this),this.records_=[]},takeRecords:function(){var e=this.records_;return this.records_=[],e}};var _,v;c.prototype={enqueue:function(e){var i=this.observer.records_,n=i.length;if(i.length>0){var r=a(i[n-1],e);if(r)return void(i[n-1]=r)}else!function(e){f.push(e),p||(p=!0,l(t))}(this.observer);i[n]=e},addListeners:function(){this.addListeners_(this.target)},addListeners_:function(e){var t=this.options;t.attributes&&e.addEventListener("DOMAttrModified",this,!0),t.characterData&&e.addEventListener("DOMCharacterDataModified",this,!0),t.childList&&e.addEventListener("DOMNodeInserted",this,!0),(t.childList||t.subtree)&&e.addEventListener("DOMNodeRemoved",this,!0)},removeListeners:function(){this.removeListeners_(this.target)},removeListeners_:function(e){var t=this.options;t.attributes&&e.removeEventListener("DOMAttrModified",this,!0),t.characterData&&e.removeEventListener("DOMCharacterDataModified",this,!0),t.childList&&e.removeEventListener("DOMNodeInserted",this,!0),(t.childList||t.subtree)&&e.removeEventListener("DOMNodeRemoved",this,!0)},addTransientObserver:function(e){if(e!==this.target){this.addListeners_(e),this.transientObservedNodes.push(e);var t=d.get(e);t||d.set(e,t=[]),t.push(this)}},removeTransientObservers:function(){var e=this.transientObservedNodes;this.transientObservedNodes=[],e.forEach(function(e){this.removeListeners_(e);for(var t=d.get(e),i=0;i<t.length;i++)if(t[i]===this){t.splice(i,1);break}},this)},handleEvent:function(e){switch(e.stopImmediatePropagation(),e.type){case"DOMAttrModified":var t=e.attrName,n=e.relatedNode.namespaceURI,r=e.target;(a=new o("attributes",r)).attributeName=t,a.attributeNamespace=n;c=e.attrChange===MutationEvent.ADDITION?null:e.prevValue;i(r,function(e){if(e.attributes&&(!e.attributeFilter||!e.attributeFilter.length||-1!==e.attributeFilter.indexOf(t)||-1!==e.attributeFilter.indexOf(n)))return e.attributeOldValue?s(c):a});break;case"DOMCharacterDataModified":var a=o("characterData",r=e.target),c=e.prevValue;i(r,function(e){if(e.characterData)return e.characterDataOldValue?s(c):a});break;case"DOMNodeRemoved":this.addTransientObserver(e.target);case"DOMNodeInserted":var l,d,h=e.target;"DOMNodeInserted"===e.type?(l=[h],d=[]):(l=[],d=[h]);var u=h.previousSibling,p=h.nextSibling;(a=o("childList",e.target.parentNode)).addedNodes=l,a.removedNodes=d,a.previousSibling=u,a.nextSibling=p,i(e.relatedNode,function(e){if(e.childList)return a})}_=v=void 0}},e.JsMutationObserver=n,e.MutationObserver||(e.MutationObserver=n,n._isPolyfilled=!0)}}(self),function(){function e(e){switch(e){case"&":return"&amp;";case"<":return"&lt;";case">":return"&gt;";case" ":return"&nbsp;"}}var t="undefined"==typeof HTMLTemplateElement;/Trident/.test(navigator.userAgent)&&function(){var e=document.importNode;document.importNode=function(){var t=e.apply(document,arguments);if(t.nodeType===Node.DOCUMENT_FRAGMENT_NODE){var i=document.createDocumentFragment();return i.appendChild(t),i}return t}}();var i=function(){if(!t){var e=document.createElement("template"),i=document.createElement("template");i.content.appendChild(document.createElement("div")),e.content.appendChild(i);var n=e.cloneNode(!0);return 0===n.content.childNodes.length||0===n.content.firstChild.content.childNodes.length}}(),n="template",r=function(){};if(t){var o=document.implementation.createHTMLDocument("template"),s=!0,a=document.createElement("style");a.textContent=n+"{display:none;}";var c=document.head;c.insertBefore(a,c.firstElementChild),r.prototype=Object.create(HTMLElement.prototype),r.decorate=function(t){if(!t.content){t.content=o.createDocumentFragment();for(var i;i=t.firstChild;)t.content.appendChild(i);if(t.cloneNode=function(e){return r.cloneNode(this,e)},s)try{Object.defineProperty(t,"innerHTML",{get:function(){for(var t="",i=this.content.firstChild;i;i=i.nextSibling)t+=i.outerHTML||function(t){return t.replace(d,e)}(i.data);return t},set:function(e){for(o.body.innerHTML=e,r.bootstrap(o);this.content.firstChild;)this.content.removeChild(this.content.firstChild);for(;o.body.firstChild;)this.content.appendChild(o.body.firstChild)},configurable:!0})}catch(e){s=!1}r.bootstrap(t.content)}},r.bootstrap=function(e){for(var t,i=e.querySelectorAll(n),o=0,s=i.length;o<s&&(t=i[o]);o++)r.decorate(t)},document.addEventListener("DOMContentLoaded",function(){r.bootstrap(document)});var l=document.createElement;document.createElement=function(){"use strict";var e=l.apply(document,arguments);return"template"===e.localName&&r.decorate(e),e};var d=/[&\u00A0<>]/g}if(t||i){var h=Node.prototype.cloneNode;r.cloneNode=function(e,t){var i=h.call(e,!1);return this.decorate&&this.decorate(i),t&&(i.content.appendChild(h.call(e.content,!0)),this.fixClonedDom(i.content,e.content)),i},r.fixClonedDom=function(e,t){if(t.querySelectorAll)for(var i,r,o=t.querySelectorAll(n),s=e.querySelectorAll(n),a=0,c=s.length;a<c;a++)r=o[a],i=s[a],this.decorate&&this.decorate(r),i.parentNode.replaceChild(r.cloneNode(!0),i)};var u=document.importNode;Node.prototype.cloneNode=function(e){var t=h.call(this,e);return e&&r.fixClonedDom(t,this),t},document.importNode=function(e,t){if(e.localName===n)return r.cloneNode(e,t);var i=u.call(document,e,t);return t&&r.fixClonedDom(i,e),i},i&&(HTMLTemplateElement.prototype.cloneNode=function(e){return r.cloneNode(this,e)})}t&&(window.HTMLTemplateElement=r)}(),function(e){"use strict";if(!window.performance||!window.performance.now){var t=Date.now();window.performance={now:function(){return Date.now()-t}}}window.requestAnimationFrame||(window.requestAnimationFrame=function(){var e=window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame;return e?function(t){return e(function(){t(performance.now())})}:function(e){return window.setTimeout(e,1e3/60)}}()),window.cancelAnimationFrame||(window.cancelAnimationFrame=window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||function(e){clearTimeout(e)});if(!function(){var e=document.createEvent("Event");return e.initEvent("foo",!0,!0),e.preventDefault(),e.defaultPrevented}()){var i=Event.prototype.preventDefault;Event.prototype.preventDefault=function(){this.cancelable&&(i.call(this),Object.defineProperty(this,"defaultPrevented",{get:function(){return!0},configurable:!0}))}}var n=/Trident/.test(navigator.userAgent);if((!window.CustomEvent||n&&"function"!=typeof window.CustomEvent)&&(window.CustomEvent=function(e,t){t=t||{};var i=document.createEvent("CustomEvent");return i.initCustomEvent(e,Boolean(t.bubbles),Boolean(t.cancelable),t.detail),i},window.CustomEvent.prototype=window.Event.prototype),!window.Event||n&&"function"!=typeof window.Event){var r=window.Event;window.Event=function(e,t){t=t||{};var i=document.createEvent("Event");return i.initEvent(e,Boolean(t.bubbles),Boolean(t.cancelable)),i},window.Event.prototype=r.prototype}}(window.WebComponents),window.HTMLImports=window.HTMLImports||{flags:{}},function(e){function t(e,t){i(function(){!function(e,t){function i(){c==l&&e&&e({allImports:a,loadedImports:d,errorImports:h})}function r(e){n(e),d.push(this),c++,i()}function s(e){h.push(this),c++,i()}var a=t.querySelectorAll("link[rel=import]"),c=0,l=a.length,d=[],h=[];if(l)for(var u,p=0;p<l&&(u=a[p]);p++)!function(e){return o?e.__loaded||e.import&&"loading"!==e.import.readyState:e.__importParsed}(u)?(u.addEventListener("load",r),u.addEventListener("error",s)):(d.push(this),c++,i());else i()}(e,t)},t=t||c)}function i(e,t){if(function(e){return"complete"===e.readyState||e.readyState===h}(t))e&&e();else{var n=function(){"complete"!==t.readyState&&t.readyState!==h||(t.removeEventListener(u,n),i(e,t))};t.addEventListener(u,n)}}function n(e){e.target.__loaded=!0}function r(e){e.import?n({target:e}):(e.addEventListener("load",n),e.addEventListener("error",n))}var o=Boolean("import"in document.createElement("link")),s=Boolean(window.ShadowDOMPolyfill),a=function(e){return s?window.ShadowDOMPolyfill.wrapIfNeeded(e):e},c=a(document),l={get:function(){var e=window.HTMLImports.currentScript||document.currentScript||("complete"!==document.readyState?document.scripts[document.scripts.length-1]:null);return a(e)},configurable:!0};Object.defineProperty(document,"_currentScript",l),Object.defineProperty(c,"_currentScript",l);var d=/Trident/.test(navigator.userAgent),h=d?"complete":"interactive",u="readystatechange";o&&(new MutationObserver(function(e){for(var t,i=0,n=e.length;i<n&&(t=e[i]);i++)t.addedNodes&&function(e){for(var t,i=0,n=e.length;i<n&&(t=e[i]);i++)(function(e){return"link"===e.localName&&"import"===e.rel})(t)&&r(t)}(t.addedNodes)}).observe(document.head,{childList:!0}),function(){if("loading"===document.readyState)for(var e,t=document.querySelectorAll("link[rel=import]"),i=0,n=t.length;i<n&&(e=t[i]);i++)r(e)}()),t(function(e){window.HTMLImports.ready=!0,window.HTMLImports.readyTime=(new Date).getTime();var t=c.createEvent("CustomEvent");t.initCustomEvent("HTMLImportsLoaded",!0,!0,e),c.dispatchEvent(t)}),e.IMPORT_LINK_TYPE="import",e.useNative=o,e.rootDocument=c,e.whenReady=t,e.isIE=d}(window.HTMLImports),function(e){var t=[];e.addModule=function(e){t.push(e)},e.initializeModules=function(){t.forEach(function(t){t(e)})}}(window.HTMLImports),window.HTMLImports.addModule(function(e){var t=/(url\()([^)]*)(\))/g,i=/(@import[\s]+(?!url\())([^;]*)(;)/g,n={resolveUrlsInStyle:function(e,t){var i=e.ownerDocument.createElement("a");return e.textContent=this.resolveUrlsInCssText(e.textContent,t,i),e},resolveUrlsInCssText:function(e,n,r){var o=this.replaceUrls(e,r,n,t);return o=this.replaceUrls(o,r,n,i)},replaceUrls:function(e,t,i,n){return e.replace(n,function(e,n,r,o){var s=r.replace(/["']/g,"");return i&&(s=new URL(s,i).href),t.href=s,s=t.href,n+"'"+s+"'"+o})}};e.path=n}),window.HTMLImports.addModule(function(e){var t={async:!0,ok:function(e){return e.status>=200&&e.status<300||304===e.status||0===e.status},load:function(i,n,r){var o=new XMLHttpRequest;return(e.flags.debug||e.flags.bust)&&(i+="?"+Math.random()),o.open("GET",i,t.async),o.addEventListener("readystatechange",function(e){if(4===o.readyState){var i=null;try{var s=o.getResponseHeader("Location");s&&(i="/"===s.substr(0,1)?location.origin+s:s)}catch(e){console.error(e.message)}n.call(r,!t.ok(o)&&o,o.response||o.responseText,i)}}),o.send(),o},loadDocument:function(e,t,i){this.load(e,t,i).responseType="document"}};e.xhr=t}),window.HTMLImports.addModule(function(e){var t=e.xhr,i=e.flags,n=function(e,t){this.cache={},this.onload=e,this.oncomplete=t,this.inflight=0,this.pending={}};n.prototype={addNodes:function(e){this.inflight+=e.length;for(var t,i=0,n=e.length;i<n&&(t=e[i]);i++)this.require(t);this.checkDone()},addNode:function(e){this.inflight++,this.require(e),this.checkDone()},require:function(e){var t=e.src||e.href;e.__nodeUrl=t,this.dedupe(t,e)||this.fetch(t,e)},dedupe:function(e,t){if(this.pending[e])return this.pending[e].push(t),!0;return this.cache[e]?(this.onload(e,t,this.cache[e]),this.tail(),!0):(this.pending[e]=[t],!1)},fetch:function(e,n){if(i.load&&console.log("fetch",e,n),e)if(e.match(/^data:/)){var r=e.split(","),o=r[0],s=r[1];s=o.indexOf(";base64")>-1?atob(s):decodeURIComponent(s),setTimeout(function(){this.receive(e,n,null,s)}.bind(this),0)}else{var a=function(t,i,r){this.receive(e,n,t,i,r)}.bind(this);t.load(e,a)}else setTimeout(function(){this.receive(e,n,{error:"href must be specified"},null)}.bind(this),0)},receive:function(e,t,i,n,r){this.cache[e]=n;for(var o,s=this.pending[e],a=0,c=s.length;a<c&&(o=s[a]);a++)this.onload(e,o,n,i,r),this.tail();this.pending[e]=null},tail:function(){--this.inflight,this.checkDone()},checkDone:function(){this.inflight||this.oncomplete()}},e.Loader=n}),window.HTMLImports.addModule(function(e){var t=function(e){this.addCallback=e,this.mo=new MutationObserver(this.handler.bind(this))};t.prototype={handler:function(e){for(var t,i=0,n=e.length;i<n&&(t=e[i]);i++)"childList"===t.type&&t.addedNodes.length&&this.addedNodes(t.addedNodes)},addedNodes:function(e){this.addCallback&&this.addCallback(e);for(var t,i=0,n=e.length;i<n&&(t=e[i]);i++)t.children&&t.children.length&&this.addedNodes(t.children)},observe:function(e){this.mo.observe(e,{childList:!0,subtree:!0})}},e.Observer=t}),window.HTMLImports.addModule(function(e){function t(e){return"link"===e.localName&&e.rel===a}function i(e){var t=function(e){return e.textContent+function(e){var t=e.ownerDocument;t.__importedScripts=t.__importedScripts||0;var i=e.ownerDocument.baseURI,n=t.__importedScripts?"-"+t.__importedScripts:"";return t.__importedScripts++,"\n//# sourceURL="+i+n+".js\n"}(e)}(e);return"data:text/javascript;charset=utf-8,"+encodeURIComponent(t)}var n=e.path,r=e.rootDocument,o=e.flags,s=e.isIE,a=e.IMPORT_LINK_TYPE,c="link[rel="+a+"]",l={documentSelectors:c,importsSelectors:[c,"link[rel=stylesheet]:not([type])","style:not([type])","script:not([type])",'script[type="application/javascript"]','script[type="text/javascript"]'].join(","),map:{link:"parseLink",script:"parseScript",style:"parseStyle"},dynamicElements:[],parseNext:function(){var e=this.nextToParse();e&&this.parse(e)},parse:function(e){if(this.isParsed(e))o.parse&&console.log("[%s] is already parsed",e.localName);else{var t=this[this.map[e.localName]];t&&(this.markParsing(e),t.call(this,e))}},parseDynamic:function(e,t){this.dynamicElements.push(e),t||this.parseNext()},markParsing:function(e){o.parse&&console.log("parsing",e),this.parsingElement=e},markParsingComplete:function(e){e.__importParsed=!0,this.markDynamicParsingComplete(e),e.__importElement&&(e.__importElement.__importParsed=!0,this.markDynamicParsingComplete(e.__importElement)),this.parsingElement=null,o.parse&&console.log("completed",e)},markDynamicParsingComplete:function(e){var t=this.dynamicElements.indexOf(e);t>=0&&this.dynamicElements.splice(t,1)},parseImport:function(e){if(e.import=e.__doc,window.HTMLImports.__importsParsingHook&&window.HTMLImports.__importsParsingHook(e),e.import&&(e.import.__importParsed=!0),this.markParsingComplete(e),e.__resource&&!e.__error?e.dispatchEvent(new CustomEvent("load",{bubbles:!1})):e.dispatchEvent(new CustomEvent("error",{bubbles:!1})),e.__pending)for(var t;e.__pending.length;)(t=e.__pending.shift())&&t({target:e});this.parseNext()},parseLink:function(e){t(e)?this.parseImport(e):(e.href=e.href,this.parseGeneric(e))},parseStyle:function(e){var t=e;e=function(e){var t=e.ownerDocument.createElement("style");return t.textContent=e.textContent,n.resolveUrlsInStyle(t),t}(e),t.__appliedElement=e,e.__importElement=t,this.parseGeneric(e)},parseGeneric:function(e){this.trackElement(e),this.addElementToDocument(e)},rootImportForElement:function(e){for(var t=e;t.ownerDocument.__importLink;)t=t.ownerDocument.__importLink;return t},addElementToDocument:function(e){var t=this.rootImportForElement(e.__importElement||e);t.parentNode.insertBefore(e,t)},trackElement:function(e,t){var i=this,n=function(r){e.removeEventListener("load",n),e.removeEventListener("error",n),t&&t(r),i.markParsingComplete(e),i.parseNext()};if(e.addEventListener("load",n),e.addEventListener("error",n),s&&"style"===e.localName){var r=!1;if(-1==e.textContent.indexOf("@import"))r=!0;else if(e.sheet){r=!0;for(var o,a=e.sheet.cssRules,c=a?a.length:0,l=0;l<c&&(o=a[l]);l++)o.type===CSSRule.IMPORT_RULE&&(r=r&&Boolean(o.styleSheet))}r&&setTimeout(function(){e.dispatchEvent(new CustomEvent("load",{bubbles:!1}))})}},parseScript:function(t){var n=document.createElement("script");n.__importElement=t,n.src=t.src?t.src:i(t),e.currentScript=t,this.trackElement(n,function(t){n.parentNode&&n.parentNode.removeChild(n),e.currentScript=null}),this.addElementToDocument(n)},nextToParse:function(){return this._mayParse=[],!this.parsingElement&&(this.nextToParseInDoc(r)||this.nextToParseDynamic())},nextToParseInDoc:function(e,i){if(e&&this._mayParse.indexOf(e)<0){this._mayParse.push(e);for(var n,r=e.querySelectorAll(this.parseSelectorsForNode(e)),o=0,s=r.length;o<s&&(n=r[o]);o++)if(!this.isParsed(n))return this.hasResource(n)?t(n)?this.nextToParseInDoc(n.__doc,n):n:void 0}return i},nextToParseDynamic:function(){return this.dynamicElements[0]},parseSelectorsForNode:function(e){return(e.ownerDocument||e)===r?this.documentSelectors:this.importsSelectors},isParsed:function(e){return e.__importParsed},needsDynamicParsing:function(e){return this.dynamicElements.indexOf(e)>=0},hasResource:function(e){return!t(e)||void 0!==e.__doc}};e.parser=l,e.IMPORT_SELECTOR=c}),window.HTMLImports.addModule(function(e){function t(e,t){var i=document.implementation.createHTMLDocument(n);i._URL=t;var r=i.createElement("base");r.setAttribute("href",t),i.baseURI||function(e){return!!Object.getOwnPropertyDescriptor(e,"baseURI")}(i)||Object.defineProperty(i,"baseURI",{value:t});var o=i.createElement("meta");return o.setAttribute("charset","utf-8"),i.head.appendChild(o),i.head.appendChild(r),i.body.innerHTML=e,window.HTMLTemplateElement&&HTMLTemplateElement.bootstrap&&HTMLTemplateElement.bootstrap(i),i}var i=e.flags,n=e.IMPORT_LINK_TYPE,r=e.IMPORT_SELECTOR,o=e.rootDocument,s=e.Loader,a=e.Observer,c=e.parser,l={documents:{},documentPreloadSelectors:r,importsPreloadSelectors:[r].join(","),loadNode:function(e){d.addNode(e)},loadSubtree:function(e){var t=this.marshalNodes(e);d.addNodes(t)},marshalNodes:function(e){return e.querySelectorAll(this.loadSelectorsForNode(e))},loadSelectorsForNode:function(e){return(e.ownerDocument||e)===o?this.documentPreloadSelectors:this.importsPreloadSelectors},loaded:function(e,r,o,s,a){if(i.load&&console.log("loaded",e,r),r.__resource=o,r.__error=s,function(e){return function(e,t){return"link"===e.localName&&e.getAttribute("rel")===t}(e,n)}(r)){var l=this.documents[e];void 0===l&&((l=s?null:t(o,a||e))&&(l.__importLink=r,this.bootDocument(l)),this.documents[e]=l),r.__doc=l}c.parseNext()},bootDocument:function(e){this.loadSubtree(e),this.observer.observe(e),c.parseNext()},loadedAll:function(){c.parseNext()}},d=new s(l.loaded.bind(l),l.loadedAll.bind(l));if(l.observer=new a,!document.baseURI){var h={get:function(){var e=document.querySelector("base");return e?e.href:window.location.href},configurable:!0};Object.defineProperty(document,"baseURI",h),Object.defineProperty(o,"baseURI",h)}e.importer=l,e.importLoader=d}),window.HTMLImports.addModule(function(e){var t=e.parser,i=e.importer,n={added:function(e){for(var n,r,o,s,a=0,c=e.length;a<c&&(s=e[a]);a++)n||(n=s.ownerDocument,r=t.isParsed(n)),(o=this.shouldLoadNode(s))&&i.loadNode(s),this.shouldParseNode(s)&&r&&t.parseDynamic(s,o)},shouldLoadNode:function(e){return 1===e.nodeType&&r.call(e,i.loadSelectorsForNode(e))},shouldParseNode:function(e){return 1===e.nodeType&&r.call(e,t.parseSelectorsForNode(e))}};i.observer.addCallback=n.added.bind(n);var r=HTMLElement.prototype.matches||HTMLElement.prototype.matchesSelector||HTMLElement.prototype.webkitMatchesSelector||HTMLElement.prototype.mozMatchesSelector||HTMLElement.prototype.msMatchesSelector}),function(e){function t(){window.HTMLImports.importer.bootDocument(n)}var i=e.initializeModules;e.isIE;if(!e.useNative){i();var n=e.rootDocument;"complete"===document.readyState||"interactive"===document.readyState&&!window.attachEvent?t():document.addEventListener("DOMContentLoaded",t)}}(window.HTMLImports),window.CustomElements=window.CustomElements||{flags:{}},function(e){var t=e.flags,i=[];e.addModule=function(e){i.push(e)},e.initializeModules=function(){i.forEach(function(t){t(e)})},e.hasNative=Boolean(document.registerElement),e.isIE=/Trident/.test(navigator.userAgent),e.useNative=!t.register&&e.hasNative&&!window.ShadowDOMPolyfill&&(!window.HTMLImports||window.HTMLImports.useNative)}(window.CustomElements),window.CustomElements.addModule(function(e){function t(e,t){i(e,function(e){if(t(e))return!0;n(e,t)}),n(e,t)}function i(e,t,n){var r=e.firstElementChild;if(!r)for(r=e.firstChild;r&&r.nodeType!==Node.ELEMENT_NODE;)r=r.nextSibling;for(;r;)!0!==t(r,n)&&i(r,t,n),r=r.nextElementSibling;return null}function n(e,i){for(var n=e.shadowRoot;n;)t(n,i),n=n.olderShadowRoot}function r(e,t,i){if(e=window.wrap(e),!(i.indexOf(e)>=0)){i.push(e);for(var n,s=e.querySelectorAll("link[rel="+o+"]"),a=0,c=s.length;a<c&&(n=s[a]);a++)n.import&&r(n.import,t,i);t(e)}}var o=window.HTMLImports?window.HTMLImports.IMPORT_LINK_TYPE:"none";e.forDocumentTree=function(e,t){r(e,t,[])},e.forSubtree=t}),window.CustomElements.addModule(function(e){function t(e,t){return i(e,t)||n(e,t)}function i(t,i){if(e.upgrade(t,i))return!0;i&&s(t)}function n(e,t){f(e,function(e){if(i(e,t))return!0})}function r(e){y.push(e),v||(v=!0,setTimeout(o))}function o(){v=!1;for(var e,t=y,i=0,n=t.length;i<n&&(e=t[i]);i++)e();y=[]}function s(e){_?r(function(){a(e)}):a(e)}function a(e){e.__upgraded__&&!e.__attached&&(e.__attached=!0,e.attachedCallback&&e.attachedCallback())}function c(e){_?r(function(){l(e)}):l(e)}function l(e){e.__upgraded__&&e.__attached&&(e.__attached=!1,e.detachedCallback&&e.detachedCallback())}function d(e,i){if(p.dom){var n=i[0];if(n&&"childList"===n.type&&n.addedNodes&&n.addedNodes){for(var r=n.addedNodes[0];r&&r!==document&&!r.host;)r=r.parentNode;var o=r&&(r.URL||r._URL||r.host&&r.host.localName)||"";o=o.split("/?").shift().split("/").pop()}console.group("mutations (%d) [%s]",i.length,o||"")}var s=function(e){for(var t=e,i=window.wrap(document);t;){if(t==i)return!0;t=t.parentNode||t.nodeType===Node.DOCUMENT_FRAGMENT_NODE&&t.host}}(e);i.forEach(function(e){"childList"===e.type&&(g(e.addedNodes,function(e){e.localName&&t(e,s)}),g(e.removedNodes,function(e){e.localName&&function(e){c(e),f(e,function(e){c(e)})}(e)}))}),p.dom&&console.groupEnd()}function h(e){if(!e.__observer){var t=new MutationObserver(d.bind(this,e));t.observe(e,{childList:!0,subtree:!0}),e.__observer=t}}function u(e){e=window.wrap(e),p.dom&&console.group("upgradeDocument: ",e.baseURI.split("/").pop());t(e,e===window.wrap(document)),h(e),p.dom&&console.groupEnd()}var p=e.flags,f=e.forSubtree,m=e.forDocumentTree,_=window.MutationObserver._isPolyfilled&&p["throttle-attached"];e.hasPolyfillMutations=_,e.hasThrottledAttached=_;var v=!1,y=[],g=Array.prototype.forEach.call.bind(Array.prototype.forEach),b=Element.prototype.createShadowRoot;b&&(Element.prototype.createShadowRoot=function(){var e=b.call(this);return window.CustomElements.watchShadow(this),e}),e.watchShadow=function(e){if(e.shadowRoot&&!e.shadowRoot.__watched){p.dom&&console.log("watching shadow-root for: ",e.localName);for(var t=e.shadowRoot;t;)h(t),t=t.olderShadowRoot}},e.upgradeDocumentTree=function(e){m(e,u)},e.upgradeDocument=u,e.upgradeSubtree=n,e.upgradeAll=t,e.attached=s,e.takeRecords=function(e){for((e=window.wrap(e))||(e=window.wrap(document));e.parentNode;)e=e.parentNode;var t=e.__observer;t&&(d(e,t.takeRecords()),o())}}),window.CustomElements.addModule(function(e){function t(t,r,o){return n.upgrade&&console.group("upgrade:",t.localName),r.is&&t.setAttribute("is",r.is),i(t,r),t.__upgraded__=!0,function(e){e.createdCallback&&e.createdCallback()}(t),o&&e.attached(t),e.upgradeSubtree(t,o),n.upgrade&&console.groupEnd(),t}function i(e,t){Object.__proto__?e.__proto__=t.prototype:(!function(e,t,i){var n={},r=t;for(;r!==i&&r!==HTMLElement.prototype;){for(var o,s=Object.getOwnPropertyNames(r),a=0;o=s[a];a++)n[o]||(Object.defineProperty(e,o,Object.getOwnPropertyDescriptor(r,o)),n[o]=1);r=Object.getPrototypeOf(r)}}(e,t.prototype,t.native),e.__proto__=t.prototype)}var n=e.flags;e.upgrade=function(i,n){if("template"===i.localName&&window.HTMLTemplateElement&&HTMLTemplateElement.decorate&&HTMLTemplateElement.decorate(i),!i.__upgraded__&&i.nodeType===Node.ELEMENT_NODE){var r=i.getAttribute("is"),o=e.getRegisteredDefinition(i.localName)||e.getRegisteredDefinition(r);if(o&&(r&&o.tag==i.localName||!r&&!o.extends))return t(i,o,n)}},e.upgradeWithDefinition=t,e.implementPrototype=i}),window.CustomElements.addModule(function(e){function t(e,t,i){e=e.toLowerCase();var n=this.getAttribute(e);i.apply(this,arguments);var r=this.getAttribute(e);this.attributeChangedCallback&&r!==n&&this.attributeChangedCallback(e,n,r)}function i(e){var t=n(e);return t?i(t.extends).concat([t]):[]}function n(e){if(e)return p[e.toLowerCase()]}function r(e,t){e&&(e=e.toLowerCase()),t&&(t=t.toLowerCase());var i=n(t||e);if(i){if(e==i.tag&&t==i.is)return new i.ctor;if(!t&&!i.is)return new i.ctor}var o;return t?((o=r(e)).setAttribute("is",t),o):(o=m(e),e.indexOf("-")>=0&&d(o,HTMLElement),o)}function o(e,t){var i=e[t];e[t]=function(){var e=i.apply(this,arguments);return c(e),e}}e.isIE;var s,a=e.upgradeDocumentTree,c=e.upgradeAll,l=e.upgradeWithDefinition,d=e.implementPrototype,h=e.useNative,u=["annotation-xml","color-profile","font-face","font-face-src","font-face-uri","font-face-format","font-face-name","missing-glyph"],p={},f="http://www.w3.org/1999/xhtml",m=document.createElement.bind(document),_=document.createElementNS.bind(document);s=Object.__proto__||h?function(e,t){return e instanceof t}:function(e,t){if(e instanceof t)return!0;for(var i=e;i;){if(i===t.prototype)return!0;i=i.__proto__}return!1},o(Node.prototype,"cloneNode"),o(document,"importNode"),document.registerElement=function(r,o){var s=o||{};if(!r)throw new Error("document.registerElement: first argument `name` must not be empty");if(r.indexOf("-")<0)throw new Error("document.registerElement: first argument ('name') must contain a dash ('-'). Argument provided was '"+String(r)+"'.");if(function(e){for(var t=0;t<u.length;t++)if(e===u[t])return!0}(r))throw new Error("Failed to execute 'registerElement' on 'Document': Registration failed for type '"+String(r)+"'. The type name is invalid.");if(n(r))throw new Error("DuplicateDefinitionError: a type with name '"+String(r)+"' is already registered");return s.prototype||(s.prototype=Object.create(HTMLElement.prototype)),s.__name=r.toLowerCase(),s.extends&&(s.extends=s.extends.toLowerCase()),s.lifecycle=s.lifecycle||{},s.ancestry=i(s.extends),function(e){for(var t,i=e.extends,n=0;t=e.ancestry[n];n++)i=t.is&&t.tag;e.tag=i||e.__name,i&&(e.is=e.__name)}(s),function(e){if(!Object.__proto__){var t=HTMLElement.prototype;if(e.is){var i=document.createElement(e.tag);t=Object.getPrototypeOf(i)}for(var n,r=e.prototype,o=!1;r;)r==t&&(o=!0),(n=Object.getPrototypeOf(r))&&(r.__proto__=n),r=n;o||console.warn(e.tag+" prototype not found in prototype chain for "+e.is),e.native=t}}(s),function(e){if(!e.setAttribute._polyfilled){var i=e.setAttribute;e.setAttribute=function(e,n){t.call(this,e,n,i)};var n=e.removeAttribute;e.removeAttribute=function(e){t.call(this,e,null,n)},e.setAttribute._polyfilled=!0}}(s.prototype),function(e,t){p[e]=t}(s.__name,s),s.ctor=function(e){return function(){return function(e){return l(m(e.tag),e)}(e)}}(s),s.ctor.prototype=s.prototype,s.prototype.constructor=s.ctor,e.ready&&a(document),s.ctor},document.createElement=r,document.createElementNS=function(e,t,i){return e===f?r(t,i):_(e,t)},e.registry=p,e.instanceof=s,e.reservedTagList=u,e.getRegisteredDefinition=n,document.register=document.registerElement}),function(e){function t(){o(window.wrap(document)),window.CustomElements.ready=!0;(window.requestAnimationFrame||function(e){setTimeout(e,16)})(function(){setTimeout(function(){window.CustomElements.readyTime=Date.now(),window.HTMLImports&&(window.CustomElements.elapsed=window.CustomElements.readyTime-window.HTMLImports.readyTime),document.dispatchEvent(new CustomEvent("WebComponentsReady",{bubbles:!0}))})})}var i=e.useNative,n=e.initializeModules;e.isIE;if(i){var r=function(){};e.watchShadow=r,e.upgrade=r,e.upgradeAll=r,e.upgradeDocumentTree=r,e.upgradeSubtree=r,e.takeRecords=r,e.instanceof=function(e,t){return e instanceof t}}else n();var o=e.upgradeDocumentTree,s=e.upgradeDocument;if(window.wrap||(window.ShadowDOMPolyfill?(window.wrap=window.ShadowDOMPolyfill.wrapIfNeeded,window.unwrap=window.ShadowDOMPolyfill.unwrapIfNeeded):window.wrap=window.unwrap=function(e){return e}),window.HTMLImports&&(window.HTMLImports.__importsParsingHook=function(e){e.import&&s(wrap(e.import))}),"complete"===document.readyState||e.flags.eager)t();else if("interactive"!==document.readyState||window.attachEvent||window.HTMLImports&&!window.HTMLImports.ready){var a=window.HTMLImports&&!window.HTMLImports.ready?"HTMLImportsLoaded":"DOMContentLoaded";window.addEventListener(a,t)}else t()}(window.CustomElements),function(e){var t=document.createElement("style");t.textContent="body {transition: opacity ease-in 0.2s; } \nbody[unresolved] {opacity: 0; display: block; overflow: hidden; position: relative; } \n";var i=document.querySelector("head");i.insertBefore(t,i.firstChild)}(window.WebComponents),function(){function e(){document.body.removeAttribute("unresolved")}window.WebComponents?addEventListener("WebComponentsReady",e):"interactive"===document.readyState||"complete"===document.readyState?e():addEventListener("DOMContentLoaded",e)}(),window.Polymer={Settings:function(){var e=window.Polymer||{};if(!e.noUrlSettings)for(var t,i=location.search.slice(1).split("&"),n=0;n<i.length&&(t=i[n]);n++)(t=t.split("="))[0]&&(e[t[0]]=t[1]||!0);return e.wantShadow="shadow"===e.dom,e.hasShadow=Boolean(Element.prototype.createShadowRoot),e.nativeShadow=e.hasShadow&&!window.ShadowDOMPolyfill,e.useShadow=e.wantShadow&&e.hasShadow,e.hasNativeImports=Boolean("import"in document.createElement("link")),e.useNativeImports=e.hasNativeImports,e.useNativeCustomElements=!window.CustomElements||window.CustomElements.useNative,e.useNativeShadow=e.useShadow&&e.nativeShadow,e.usePolyfillProto=!e.useNativeCustomElements&&!Object.__proto__,e.hasNativeCSSProperties=!navigator.userAgent.match(/AppleWebKit\/601|Edge\/15/)&&window.CSS&&CSS.supports&&CSS.supports("box-shadow","0 0 0 var(--foo)"),e.useNativeCSSProperties=e.hasNativeCSSProperties&&e.lazyRegister&&e.useNativeCSSProperties,e.isIE=navigator.userAgent.match("Trident"),e.passiveTouchGestures=e.passiveTouchGestures||!1,e}()},function(){var e=window.Polymer;window.Polymer=function(e){"function"==typeof e&&(e=e.prototype),e||(e={});var i=(e=t(e))===e.constructor.prototype?e.constructor:null,n={prototype:e};e.extends&&(n.extends=e.extends),Polymer.telemetry._registrate(e);var r=document.registerElement(e.is,n);return i||r};var t=function(e){var t=Polymer.Base;return e.extends&&(t=Polymer.Base._getExtendedPrototype(e.extends)),(e=Polymer.Base.chainObject(e,t)).registerCallback(),e};if(e)for(var i in e)Polymer[i]=e[i];Polymer.Class=function(e){return e.factoryImpl||(e.factoryImpl=function(){}),t(e).constructor}}(),Polymer.telemetry={registrations:[],_regLog:function(e){console.log("["+e.is+"]: registered")},_registrate:function(e){this.registrations.push(e),Polymer.log&&this._regLog(e)},dumpRegistrations:function(){this.registrations.forEach(this._regLog)}},Object.defineProperty(window,"currentImport",{enumerable:!0,configurable:!0,get:function(){return(document._currentScript||document.currentScript||{}).ownerDocument}}),Polymer.RenderStatus={_ready:!1,_callbacks:[],whenReady:function(e){this._ready?e():this._callbacks.push(e)},_makeReady:function(){this._ready=!0;for(var e=0;e<this._callbacks.length;e++)this._callbacks[e]();this._callbacks=[]},_catchFirstRender:function(){requestAnimationFrame(function(){Polymer.RenderStatus._makeReady()})},_afterNextRenderQueue:[],_waitingNextRender:!1,afterNextRender:function(e,t,i){this._watchNextRender(),this._afterNextRenderQueue.push([e,t,i])},hasRendered:function(){return this._ready},_watchNextRender:function(){if(!this._waitingNextRender){this._waitingNextRender=!0;var e=function(){Polymer.RenderStatus._flushNextRender()};this._ready?requestAnimationFrame(e):this.whenReady(e)}},_flushNextRender:function(){var e=this;setTimeout(function(){e._flushRenderCallbacks(e._afterNextRenderQueue),e._afterNextRenderQueue=[],e._waitingNextRender=!1})},_flushRenderCallbacks:function(e){for(var t,i=0;i<e.length;i++)(t=e[i])[1].apply(t[0],t[2]||Polymer.nar)}},window.HTMLImports?HTMLImports.whenReady(function(){Polymer.RenderStatus._catchFirstRender()}):Polymer.RenderStatus._catchFirstRender(),Polymer.ImportStatus=Polymer.RenderStatus,Polymer.ImportStatus.whenLoaded=Polymer.ImportStatus.whenReady,function(){"use strict";var e=Polymer.Settings;Polymer.Base={__isPolymerInstance__:!0,_addFeature:function(e){this.mixin(this,e)},registerCallback:function(){if("max"===e.lazyRegister)this.beforeRegister&&this.beforeRegister();else{this._desugarBehaviors();for(var t,i=0;i<this.behaviors.length;i++)(t=this.behaviors[i]).beforeRegister&&t.beforeRegister.call(this);this.beforeRegister&&this.beforeRegister()}this._registerFeatures(),e.lazyRegister||this.ensureRegisterFinished()},createdCallback:function(){if(e.disableUpgradeEnabled){if(this.hasAttribute("disable-upgrade"))return this._propertySetter=t,this._configValue=null,void(this.__data__={});this.__hasInitialized=!0}this.__initialize()},__initialize:function(){this.__hasRegisterFinished||this._ensureRegisterFinished(this.__proto__),Polymer.telemetry.instanceCount++,this.root=this;for(var e,t=0;t<this.behaviors.length;t++)(e=this.behaviors[t]).created&&e.created.call(this);this.created&&this.created(),this._initFeatures()},ensureRegisterFinished:function(){this._ensureRegisterFinished(this)},_ensureRegisterFinished:function(t){if(t.__hasRegisterFinished!==t.is||!t.is){if("max"===e.lazyRegister){t._desugarBehaviors();for(var i,n=0;n<t.behaviors.length;n++)(i=t.behaviors[n]).beforeRegister&&i.beforeRegister.call(t)}t.__hasRegisterFinished=t.is,t._finishRegisterFeatures&&t._finishRegisterFeatures();for(var r,o=0;o<t.behaviors.length;o++)(r=t.behaviors[o]).registered&&r.registered.call(t);t.registered&&t.registered(),e.usePolyfillProto&&t!==this&&t.extend(this,t)}},attachedCallback:function(){var e=this;Polymer.RenderStatus.whenReady(function(){e.isAttached=!0;for(var t,i=0;i<e.behaviors.length;i++)(t=e.behaviors[i]).attached&&t.attached.call(e);e.attached&&e.attached()})},detachedCallback:function(){var e=this;Polymer.RenderStatus.whenReady(function(){e.isAttached=!1;for(var t,i=0;i<e.behaviors.length;i++)(t=e.behaviors[i]).detached&&t.detached.call(e);e.detached&&e.detached()})},attributeChangedCallback:function(e,t,i){this._attributeChangedImpl(e);for(var n,r=0;r<this.behaviors.length;r++)(n=this.behaviors[r]).attributeChanged&&n.attributeChanged.call(this,e,t,i);this.attributeChanged&&this.attributeChanged(e,t,i)},_attributeChangedImpl:function(e){this._setAttributeToProperty(this,e)},extend:function(e,t){if(e&&t)for(var i,n=Object.getOwnPropertyNames(t),r=0;r<n.length&&(i=n[r]);r++)this.copyOwnProperty(i,t,e);return e||t},mixin:function(e,t){for(var i in t)e[i]=t[i];return e},copyOwnProperty:function(e,t,i){var n=Object.getOwnPropertyDescriptor(t,e);n&&Object.defineProperty(i,e,n)},_logger:function(e,t){switch(1===t.length&&Array.isArray(t[0])&&(t=t[0]),e){case"log":case"warn":case"error":console[e].apply(console,t)}},_log:function(){var e=Array.prototype.slice.call(arguments,0);this._logger("log",e)},_warn:function(){var e=Array.prototype.slice.call(arguments,0);this._logger("warn",e)},_error:function(){var e=Array.prototype.slice.call(arguments,0);this._logger("error",e)},_logf:function(){return this._logPrefix.concat(this.is).concat(Array.prototype.slice.call(arguments,0))}},Polymer.Base._logPrefix=window.chrome&&!/edge/i.test(navigator.userAgent)||/firefox/i.test(navigator.userAgent)?["%c[%s::%s]:","font-weight: bold; background-color:#EEEE00;"]:["[%s::%s]:"],Polymer.Base.chainObject=function(e,t){return e&&t&&e!==t&&(Object.__proto__||(e=Polymer.Base.extend(Object.create(t),e)),e.__proto__=t),e},Polymer.Base=Polymer.Base.chainObject(Polymer.Base,HTMLElement.prototype),Polymer.BaseDescriptors={};var t;if(e.disableUpgradeEnabled){t=function(e,t){this.__data__[e]=t};var i=Polymer.Base.attributeChangedCallback;Polymer.Base.attributeChangedCallback=function(e,t,n){this.__hasInitialized||"disable-upgrade"!==e||(this.__hasInitialized=!0,this._propertySetter=Polymer.Bind._modelApi._propertySetter,this._configValue=Polymer.Base._configValue,this.__initialize()),i.call(this,e,t,n)}}window.CustomElements?Polymer.instanceof=CustomElements.instanceof:Polymer.instanceof=function(e,t){return e instanceof t},Polymer.isInstance=function(e){return Boolean(e&&e.__isPolymerInstance__)},Polymer.telemetry.instanceCount=0}(),function(){var e={},t={},i=function(i){return e[i]||t[i.toLowerCase()]},n=function(){return document.createElement("dom-module")};n.prototype=Object.create(HTMLElement.prototype),Polymer.Base.mixin(n.prototype,{createdCallback:function(){this.register()},register:function(i){(i=i||this.id||this.getAttribute("name")||this.getAttribute("is"))&&(this.id=i,e[i]=this,t[i.toLowerCase()]=this)},import:function(e,t){if(e){var n=i(e);return n||(!function(){if(r)for(var e,t=document._currentScript||document.currentScript,i=(t&&t.ownerDocument||document).querySelectorAll("dom-module"),n=i.length-1;n>=0&&(e=i[n]);n--){if(e.__upgraded__)return;CustomElements.upgrade(e)}}(),n=i(e)),n&&t&&(n=n.querySelector(t)),n}}}),Object.defineProperty(n.prototype,"constructor",{value:n,configurable:!0,writable:!0});var r=window.CustomElements&&!CustomElements.useNative;document.registerElement("dom-module",n)}(),Polymer.Base._addFeature({_prepIs:function(){if(!this.is){var e=(document._currentScript||document.currentScript).parentNode;if("dom-module"===e.localName){var t=e.id||e.getAttribute("name")||e.getAttribute("is");this.is=t}}this.is&&(this.is=this.is.toLowerCase())}}),Polymer.Base._addFeature({behaviors:[],_desugarBehaviors:function(){this.behaviors.length&&(this.behaviors=this._desugarSomeBehaviors(this.behaviors))},_desugarSomeBehaviors:function(e){for(var t=[],i=(e=this._flattenBehaviorsList(e)).length-1;i>=0;i--){var n=e[i];-1===t.indexOf(n)&&(this._mixinBehavior(n),t.unshift(n))}return t},_flattenBehaviorsList:function(e){for(var t=[],i=0;i<e.length;i++){var n=e[i];n instanceof Array?t=t.concat(this._flattenBehaviorsList(n)):n?t.push(n):this._warn(this._logf("_flattenBehaviorsList","behavior is null, check for missing or 404 import"))}return t},_mixinBehavior:function(e){for(var t,i=Object.getOwnPropertyNames(e),n=e._noAccessors,r=0;r<i.length&&(t=i[r]);r++)Polymer.Base._behaviorProperties[t]||this.hasOwnProperty(t)||(n?this[t]=e[t]:this.copyOwnProperty(t,e,this))},_prepBehaviors:function(){this._prepFlattenedBehaviors(this.behaviors)},_prepFlattenedBehaviors:function(e){for(var t=0,i=e.length;t<i;t++)this._prepBehavior(e[t]);this._prepBehavior(this)},_marshalBehaviors:function(){for(var e=0;e<this.behaviors.length;e++)this._marshalBehavior(this.behaviors[e]);this._marshalBehavior(this)}}),Polymer.Base._behaviorProperties={hostAttributes:!0,beforeRegister:!0,registered:!0,properties:!0,observers:!0,listeners:!0,created:!0,attached:!0,detached:!0,attributeChanged:!0,ready:!0,_noAccessors:!0},Polymer.Base._addFeature({_getExtendedPrototype:function(e){return this._getExtendedNativePrototype(e)},_nativePrototypes:{},_getExtendedNativePrototype:function(e){var t=this._nativePrototypes[e];if(!t){t=Object.create(this.getNativePrototype(e));for(var i,n=Object.getOwnPropertyNames(Polymer.Base),r=0;r<n.length&&(i=n[r]);r++)Polymer.BaseDescriptors[i]||(t[i]=Polymer.Base[i]);Object.defineProperties(t,Polymer.BaseDescriptors),this._nativePrototypes[e]=t}return t},getNativePrototype:function(e){return Object.getPrototypeOf(document.createElement(e))}}),Polymer.Base._addFeature({_prepConstructor:function(){this._factoryArgs=this.extends?[this.extends,this.is]:[this.is];var e=function(){return this._factory(arguments)};this.hasOwnProperty("extends")&&(e.extends=this.extends),Object.defineProperty(this,"constructor",{value:e,writable:!0,configurable:!0}),e.prototype=this},_factory:function(e){var t=document.createElement.apply(document,this._factoryArgs);return this.factoryImpl&&this.factoryImpl.apply(t,e),t}}),Polymer.nob=Object.create(null),Polymer.Base._addFeature({getPropertyInfo:function(e){var t=this._getPropertyInfo(e,this.properties);if(!t)for(var i=0;i<this.behaviors.length;i++)if(t=this._getPropertyInfo(e,this.behaviors[i].properties))return t;return t||Polymer.nob},_getPropertyInfo:function(e,t){var i=t&&t[e];return"function"==typeof i&&(i=t[e]={type:i}),i&&(i.defined=!0),i},_prepPropertyInfo:function(){this._propertyInfo={};for(var e=0;e<this.behaviors.length;e++)this._addPropertyInfo(this._propertyInfo,this.behaviors[e].properties);this._addPropertyInfo(this._propertyInfo,this.properties),this._addPropertyInfo(this._propertyInfo,this._propertyEffects)},_addPropertyInfo:function(e,t){if(t){var i,n;for(var r in t)i=e[r],n=t[r],("_"!==r[0]||n.readOnly)&&(e[r]?(i.type||(i.type=n.type),i.readOnly||(i.readOnly=n.readOnly)):e[r]={type:"function"==typeof n?n:n.type,readOnly:n.readOnly,attribute:Polymer.CaseMap.camelToDashCase(r)})}}}),function(){var e={configurable:!0,writable:!0,enumerable:!0,value:{}};Polymer.BaseDescriptors.properties=e,Object.defineProperty(Polymer.Base,"properties",e)}(),Polymer.CaseMap={_caseMap:{},_rx:{dashToCamel:/-[a-z]/g,camelToDash:/([A-Z])/g},dashToCamelCase:function(e){return this._caseMap[e]||(this._caseMap[e]=e.indexOf("-")<0?e:e.replace(this._rx.dashToCamel,function(e){return e[1].toUpperCase()}))},camelToDashCase:function(e){return this._caseMap[e]||(this._caseMap[e]=e.replace(this._rx.camelToDash,"-$1").toLowerCase())}},Polymer.Base._addFeature({_addHostAttributes:function(e){this._aggregatedAttributes||(this._aggregatedAttributes={}),e&&this.mixin(this._aggregatedAttributes,e)},_marshalHostAttributes:function(){this._aggregatedAttributes&&this._applyAttributes(this,this._aggregatedAttributes)},_applyAttributes:function(e,t){for(var i in t)if(!this.hasAttribute(i)&&"class"!==i){var n=t[i];this.serializeValueToAttribute(n,i,this)}},_marshalAttributes:function(){this._takeAttributesToModel(this)},_takeAttributesToModel:function(e){if(this.hasAttributes())for(var t in this._propertyInfo){var i=this._propertyInfo[t];this.hasAttribute(i.attribute)&&this._setAttributeToProperty(e,i.attribute,t,i)}},_setAttributeToProperty:function(e,t,i,n){if(!this._serializing&&(i=i||Polymer.CaseMap.dashToCamelCase(t),(n=n||this._propertyInfo&&this._propertyInfo[i])&&!n.readOnly)){var r=this.getAttribute(t);e[i]=this.deserialize(r,n.type)}},_serializing:!1,reflectPropertyToAttribute:function(e,t,i){this._serializing=!0,i=void 0===i?this[e]:i,this.serializeValueToAttribute(i,t||Polymer.CaseMap.camelToDashCase(e)),this._serializing=!1},serializeValueToAttribute:function(e,t,i){var n=this.serialize(e);i=i||this,void 0===n?i.removeAttribute(t):i.setAttribute(t,n)},deserialize:function(e,t){switch(t){case Number:e=Number(e);break;case Boolean:e=null!=e;break;case Object:try{e=JSON.parse(e)}catch(e){}break;case Array:try{e=JSON.parse(e)}catch(t){e=null,console.warn("Polymer::Attributes: couldn`t decode Array as JSON")}break;case Date:e=new Date(e);break;case String:}return e},serialize:function(e){switch(typeof e){case"boolean":return e?"":void 0;case"object":if(e instanceof Date)return e.toString();if(e)try{return JSON.stringify(e)}catch(e){return""}default:return null!=e?e:void 0}}}),Polymer.version="1.11.0",Polymer.Base._addFeature({_registerFeatures:function(){this._prepIs(),this._prepBehaviors(),this._prepConstructor(),this._prepPropertyInfo()},_prepBehavior:function(e){this._addHostAttributes(e.hostAttributes)},_marshalBehavior:function(e){},_initFeatures:function(){this._marshalHostAttributes(),this._marshalBehaviors()}}),function(){function e(e,i){return e.replace(o,function(e,n,r,o){return n+"'"+t(r.replace(/["']/g,""),i)+"'"+o})}function t(e,t){if(e&&a.test(e))return e;var i=function(e){return e.body.__urlResolver||(e.body.__urlResolver=e.createElement("a"))}(t);return i.href=e,i.href||e}function i(e){return e.substring(0,e.lastIndexOf("/")+1)}var n,r,o=/(url\()([^)]*)(\))/g,s={"*":["href","src","style","url"],form:["action"]},a=/(^\/)|(^#)|(^[\w-\d]*:)/,c=/\{\{|\[\[/;Polymer.ResolveUrl={resolveCss:e,resolveAttrs:function(i,n){for(var r in s)for(var o,a,l,d=s[r],h=0,u=d.length;h<u&&(o=d[h]);h++)"*"!==r&&i.localName!==r||(l=(a=i.attributes[o])&&a.value)&&l.search(c)<0&&(a.value="style"===o?e(l,n):t(l,n))},resolveUrl:function(e,i){return n||(n=document.implementation.createHTMLDocument("temp"),r=n.createElement("base"),n.head.appendChild(r)),r.href=i,t(e,n)},pathFromUrl:i},Polymer.rootPath=Polymer.Settings.rootPath||i(document.baseURI||window.location.href)}(),Polymer.Base._addFeature({_prepTemplate:function(){var e;if(void 0===this._template&&(e=Polymer.DomModule.import(this.is),this._template=e&&e.querySelector("template")),e){var t=e.getAttribute("assetpath")||"",i=Polymer.ResolveUrl.resolveUrl(t,e.ownerDocument.baseURI);this._importPath=Polymer.ResolveUrl.pathFromUrl(i)}else this._importPath="";this._template&&this._template.hasAttribute("is")&&this._warn(this._logf("_prepTemplate","top-level Polymer template must not be a type-extension, found",this._template,"Move inside simple <template>.")),this._template&&!this._template.content&&window.HTMLTemplateElement&&HTMLTemplateElement.decorate&&HTMLTemplateElement.decorate(this._template)},_stampTemplate:function(){this._template&&(this.root=this.instanceTemplate(this._template))},instanceTemplate:function(e){return document.importNode(e._content||e.content,!0)}}),function(){var e=Polymer.Base.attachedCallback,t=Polymer.Base.detachedCallback;Polymer.Base._addFeature({_hostStack:[],ready:function(){},_registerHost:function(e){this.dataHost=e=e||Polymer.Base._hostStack[Polymer.Base._hostStack.length-1],e&&e._clients&&e._clients.push(this),this._clients=null,this._clientsReadied=!1},_beginHosting:function(){Polymer.Base._hostStack.push(this),this._clients||(this._clients=[])},_endHosting:function(){Polymer.Base._hostStack.pop()},_tryReady:function(){this._readied=!1,this._canReady()&&this._ready()},_canReady:function(){return!this.dataHost||this.dataHost._clientsReadied},_ready:function(){this._beforeClientsReady(),this._template&&(this._setupRoot(),this._readyClients()),this._clientsReadied=!0,this._clients=null,this._afterClientsReady(),this._readySelf()},_readyClients:function(){this._beginDistribute();var e=this._clients;if(e)for(var t,i=0,n=e.length;i<n&&(t=e[i]);i++)t._ready();this._finishDistribute()},_readySelf:function(){for(var e,t=0;t<this.behaviors.length;t++)(e=this.behaviors[t]).ready&&e.ready.call(this);this.ready&&this.ready(),this._readied=!0,this._attachedPending&&(this._attachedPending=!1,this.attachedCallback())},_beforeClientsReady:function(){},_afterClientsReady:function(){},_beforeAttached:function(){},attachedCallback:function(){this._readied?(this._beforeAttached(),e.call(this)):this._attachedPending=!0},detachedCallback:function(){this._readied?t.call(this):this._attachedPending=!1}})}(),Polymer.ArraySplice=function(){function e(e,t,i){return{index:e,removed:t,addedCount:i}}function t(){}return t.prototype={calcEditDistances:function(e,t,i,n,r,o){for(var s=o-r+1,a=i-t+1,c=new Array(s),l=0;l<s;l++)c[l]=new Array(a),c[l][0]=l;for(var d=0;d<a;d++)c[0][d]=d;for(l=1;l<s;l++)for(d=1;d<a;d++)if(this.equals(e[t+d-1],n[r+l-1]))c[l][d]=c[l-1][d-1];else{var h=c[l-1][d]+1,u=c[l][d-1]+1;c[l][d]=h<u?h:u}return c},spliceOperationsFromEditDistances:function(e){for(var t=e.length-1,i=e[0].length-1,n=e[t][i],r=[];t>0||i>0;)if(0!=t)if(0!=i){var o,s=e[t-1][i-1],a=e[t-1][i],c=e[t][i-1];(o=a<c?a<s?a:s:c<s?c:s)==s?(s==n?r.push(0):(r.push(1),n=s),t--,i--):o==a?(r.push(3),t--,n=a):(r.push(2),i--,n=c)}else r.push(3),t--;else r.push(2),i--;return r.reverse(),r},calcSplices:function(t,i,n,r,o,s){var a=0,c=0,l=Math.min(n-i,s-o);if(0==i&&0==o&&(a=this.sharedPrefix(t,r,l)),n==t.length&&s==r.length&&(c=this.sharedSuffix(t,r,l-a)),i+=a,o+=a,n-=c,s-=c,n-i==0&&s-o==0)return[];if(i==n){for(var d=e(i,[],0);o<s;)d.removed.push(r[o++]);return[d]}if(o==s)return[e(i,[],n-i)];var h=this.spliceOperationsFromEditDistances(this.calcEditDistances(t,i,n,r,o,s));d=void 0;for(var u=[],p=i,f=o,m=0;m<h.length;m++)switch(h[m]){case 0:d&&(u.push(d),d=void 0),p++,f++;break;case 1:d||(d=e(p,[],0)),d.addedCount++,p++,d.removed.push(r[f]),f++;break;case 2:d||(d=e(p,[],0)),d.addedCount++,p++;break;case 3:d||(d=e(p,[],0)),d.removed.push(r[f]),f++}return d&&u.push(d),u},sharedPrefix:function(e,t,i){for(var n=0;n<i;n++)if(!this.equals(e[n],t[n]))return n;return i},sharedSuffix:function(e,t,i){for(var n=e.length,r=t.length,o=0;o<i&&this.equals(e[--n],t[--r]);)o++;return o},calculateSplices:function(e,t){return this.calcSplices(e,0,e.length,t,0,t.length)},equals:function(e,t){return e===t}},new t}(),Polymer.domInnerHTML=function(){function e(e){switch(e){case"&":return"&amp;";case"<":return"&lt;";case">":return"&gt;";case'"':return"&quot;";case" ":return"&nbsp;"}}function t(t){return t.replace(o,e)}function i(e){for(var t={},i=0;i<e.length;i++)t[e[i]]=!0;return t}function n(i,n,o){switch(i.nodeType){case Node.ELEMENT_NODE:for(var l,d=i.localName,h="<"+d,u=i.attributes,p=0;l=u[p];p++)h+=" "+l.name+'="'+t(l.value)+'"';return h+=">",a[d]?h:h+r(i,o)+"</"+d+">";case Node.TEXT_NODE:var f=i.data;return n&&c[n.localName]?f:function(t){return t.replace(s,e)}(f);case Node.COMMENT_NODE:return"\x3c!--"+i.data+"--\x3e";default:throw console.error(i),new Error("not implemented")}}function r(e,t){e instanceof HTMLTemplateElement&&(e=e.content);for(var i,r="",o=Polymer.dom(e).childNodes,s=0,a=o.length;s<a&&(i=o[s]);s++)r+=n(i,e,t);return r}var o=/[&\u00A0"]/g,s=/[&\u00A0<>]/g,a=i(["area","base","br","col","command","embed","hr","img","input","keygen","link","meta","param","source","track","wbr"]),c=i(["style","script","xmp","iframe","noembed","noframes","plaintext","noscript"]);return{getInnerHTML:r}}(),function(){"use strict";var e=Element.prototype.insertBefore,t=Element.prototype.appendChild,i=Element.prototype.removeChild;Polymer.TreeApi={arrayCopyChildNodes:function(e){for(var t=[],i=0,n=e.firstChild;n;n=n.nextSibling)t[i++]=n;return t},arrayCopyChildren:function(e){for(var t=[],i=0,n=e.firstElementChild;n;n=n.nextElementSibling)t[i++]=n;return t},arrayCopy:function(e){for(var t=e.length,i=new Array(t),n=0;n<t;n++)i[n]=e[n];return i}},Polymer.TreeApi.Logical={hasParentNode:function(e){return Boolean(e.__dom&&e.__dom.parentNode)},hasChildNodes:function(e){return Boolean(e.__dom&&void 0!==e.__dom.childNodes)},getChildNodes:function(e){return this.hasChildNodes(e)?this._getChildNodes(e):e.childNodes},_getChildNodes:function(e){if(!e.__dom.childNodes){e.__dom.childNodes=[];for(var t=e.__dom.firstChild;t;t=t.__dom.nextSibling)e.__dom.childNodes.push(t)}return e.__dom.childNodes},getParentNode:function(e){return e.__dom&&void 0!==e.__dom.parentNode?e.__dom.parentNode:e.parentNode},getFirstChild:function(e){return e.__dom&&void 0!==e.__dom.firstChild?e.__dom.firstChild:e.firstChild},getLastChild:function(e){return e.__dom&&void 0!==e.__dom.lastChild?e.__dom.lastChild:e.lastChild},getNextSibling:function(e){return e.__dom&&void 0!==e.__dom.nextSibling?e.__dom.nextSibling:e.nextSibling},getPreviousSibling:function(e){return e.__dom&&void 0!==e.__dom.previousSibling?e.__dom.previousSibling:e.previousSibling},getFirstElementChild:function(e){return e.__dom&&void 0!==e.__dom.firstChild?this._getFirstElementChild(e):e.firstElementChild},_getFirstElementChild:function(e){for(var t=e.__dom.firstChild;t&&t.nodeType!==Node.ELEMENT_NODE;)t=t.__dom.nextSibling;return t},getLastElementChild:function(e){return e.__dom&&void 0!==e.__dom.lastChild?this._getLastElementChild(e):e.lastElementChild},_getLastElementChild:function(e){for(var t=e.__dom.lastChild;t&&t.nodeType!==Node.ELEMENT_NODE;)t=t.__dom.previousSibling;return t},getNextElementSibling:function(e){return e.__dom&&void 0!==e.__dom.nextSibling?this._getNextElementSibling(e):e.nextElementSibling},_getNextElementSibling:function(e){for(var t=e.__dom.nextSibling;t&&t.nodeType!==Node.ELEMENT_NODE;)t=t.__dom.nextSibling;return t},getPreviousElementSibling:function(e){return e.__dom&&void 0!==e.__dom.previousSibling?this._getPreviousElementSibling(e):e.previousElementSibling},_getPreviousElementSibling:function(e){for(var t=e.__dom.previousSibling;t&&t.nodeType!==Node.ELEMENT_NODE;)t=t.__dom.previousSibling;return t},saveChildNodes:function(e){if(!this.hasChildNodes(e)){e.__dom=e.__dom||{},e.__dom.firstChild=e.firstChild,e.__dom.lastChild=e.lastChild,e.__dom.childNodes=[];for(var t=e.firstChild;t;t=t.nextSibling)t.__dom=t.__dom||{},t.__dom.parentNode=e,e.__dom.childNodes.push(t),t.__dom.nextSibling=t.nextSibling,t.__dom.previousSibling=t.previousSibling}},recordInsertBefore:function(e,t,i){if(t.__dom.childNodes=null,e.nodeType===Node.DOCUMENT_FRAGMENT_NODE)for(var n=e.firstChild;n;n=n.nextSibling)this._linkNode(n,t,i);else this._linkNode(e,t,i)},_linkNode:function(e,t,i){e.__dom=e.__dom||{},t.__dom=t.__dom||{},i&&(i.__dom=i.__dom||{}),e.__dom.previousSibling=i?i.__dom.previousSibling:t.__dom.lastChild,e.__dom.previousSibling&&(e.__dom.previousSibling.__dom.nextSibling=e),e.__dom.nextSibling=i||null,e.__dom.nextSibling&&(e.__dom.nextSibling.__dom.previousSibling=e),e.__dom.parentNode=t,i?i===t.__dom.firstChild&&(t.__dom.firstChild=e):(t.__dom.lastChild=e,t.__dom.firstChild||(t.__dom.firstChild=e)),t.__dom.childNodes=null},recordRemoveChild:function(e,t){e.__dom=e.__dom||{},t.__dom=t.__dom||{},e===t.__dom.firstChild&&(t.__dom.firstChild=e.__dom.nextSibling),e===t.__dom.lastChild&&(t.__dom.lastChild=e.__dom.previousSibling);var i=e.__dom.previousSibling,n=e.__dom.nextSibling;i&&(i.__dom.nextSibling=n),n&&(n.__dom.previousSibling=i),e.__dom.parentNode=e.__dom.previousSibling=e.__dom.nextSibling=void 0,t.__dom.childNodes=null}},Polymer.TreeApi.Composed={getChildNodes:function(e){return Polymer.TreeApi.arrayCopyChildNodes(e)},getParentNode:function(e){return e.parentNode},clearChildNodes:function(e){e.textContent=""},insertBefore:function(t,i,n){return e.call(t,i,n||null)},appendChild:function(e,i){return t.call(e,i)},removeChild:function(e,t){return i.call(e,t)}}}(),Polymer.DomApi=function(){"use strict";var e=Polymer.Settings,t=Polymer.TreeApi,i=function(e){this.node=n?i.wrap(e):e},n=e.hasShadow&&!e.nativeShadow;i.wrap=window.wrap?window.wrap:function(e){return e},i.prototype={flush:function(){Polymer.dom.flush()},deepContains:function(e){if(this.node.contains(e))return!0;for(var t=e,i=e.ownerDocument;t&&t!==i&&t!==this.node;)t=Polymer.dom(t).parentNode||t.host;return t===this.node},queryDistributedElements:function(e){for(var t,n=this.getEffectiveChildNodes(),r=[],o=0,s=n.length;o<s&&(t=n[o]);o++)t.nodeType===Node.ELEMENT_NODE&&i.matchesSelector.call(t,e)&&r.push(t);return r},getEffectiveChildNodes:function(){for(var e,t=[],i=this.childNodes,n=0,s=i.length;n<s&&(e=i[n]);n++)if(e.localName===r)for(var a=o(e).getDistributedNodes(),c=0;c<a.length;c++)t.push(a[c]);else t.push(e);return t},observeNodes:function(e){if(e)return this.observer||(this.observer=this.node.localName===r?new i.DistributedNodesObserver(this):new i.EffectiveNodesObserver(this)),this.observer.addListener(e)},unobserveNodes:function(e){this.observer&&this.observer.removeListener(e)},notifyObserver:function(){this.observer&&this.observer.notify()},_query:function(e,i,n){i=i||this.node;var r=[];return this._queryElements(t.Logical.getChildNodes(i),e,n,r),r},_queryElements:function(e,t,i,n){for(var r,o=0,s=e.length;o<s&&(r=e[o]);o++)if(r.nodeType===Node.ELEMENT_NODE&&this._queryElement(r,t,i,n))return!0},_queryElement:function(e,i,n,r){var o=i(e);if(o&&r.push(e),n&&n(o))return o;this._queryElements(t.Logical.getChildNodes(e),i,n,r)}};var r=i.CONTENT="content",o=i.factory=function(e){return(e=e||document).__domApi||(e.__domApi=new i.ctor(e)),e.__domApi};i.hasApi=function(e){return Boolean(e.__domApi)},i.ctor=i,Polymer.dom=function(e,t){return e instanceof Event?Polymer.EventApi.factory(e):i.factory(e,t)};var s=Element.prototype;return i.matchesSelector=s.matches||s.matchesSelector||s.mozMatchesSelector||s.msMatchesSelector||s.oMatchesSelector||s.webkitMatchesSelector,i}(),function(){"use strict";var e=Polymer.Settings,t=Polymer.DomApi,i=t.factory,n=Polymer.TreeApi,r=Polymer.domInnerHTML.getInnerHTML,o=t.CONTENT;if(!e.useShadow){var s=Element.prototype.cloneNode,a=Document.prototype.importNode;Polymer.Base.mixin(t.prototype,{_lazyDistribute:function(e){e.shadyRoot&&e.shadyRoot._distributionClean&&(e.shadyRoot._distributionClean=!1,Polymer.dom.addDebouncer(e.debounce("_distribute",e._distributeContent)))},appendChild:function(e){return this.insertBefore(e)},insertBefore:function(e,r){if(r&&n.Logical.getParentNode(r)!==this.node)throw Error("The ref_node to be inserted before is not a child of this node");if(e.nodeType!==Node.DOCUMENT_FRAGMENT_NODE){var s=n.Logical.getParentNode(e);s?(t.hasApi(s)&&i(s).notifyObserver(),this._removeNode(e)):this._removeOwnerShadyRoot(e)}if(!this._addNode(e,r)){r&&(r=r.localName===o?this._firstComposedNode(r):r);var a=this.node._isShadyRoot?this.node.host:this.node;r?n.Composed.insertBefore(a,e,r):n.Composed.appendChild(a,e)}return this.notifyObserver(),e},_addNode:function(e,t){var i=this.getOwnerRoot();if(i){var r=this._maybeAddInsertionPoint(e,this.node);i._invalidInsertionPoints||(i._invalidInsertionPoints=r),this._addNodeToHost(i.host,e)}n.Logical.hasChildNodes(this.node)&&n.Logical.recordInsertBefore(e,this.node,t);var o=this._maybeDistribute(e)||this.node.shadyRoot;if(o)if(e.nodeType===Node.DOCUMENT_FRAGMENT_NODE)for(;e.firstChild;)n.Composed.removeChild(e,e.firstChild);else{var s=n.Composed.getParentNode(e);s&&n.Composed.removeChild(s,e)}return o},removeChild:function(e){if(n.Logical.getParentNode(e)!==this.node)throw Error("The node to be removed is not a child of this node: "+e);if(!this._removeNode(e)){var t=this.node._isShadyRoot?this.node.host:this.node;t===n.Composed.getParentNode(e)&&n.Composed.removeChild(t,e)}return this.notifyObserver(),e},_removeNode:function(e){var t,r=n.Logical.hasParentNode(e)&&n.Logical.getParentNode(e),o=this._ownerShadyRootForNode(e);return r&&(t=i(e)._maybeDistributeParent(),n.Logical.recordRemoveChild(e,r),o&&this._removeDistributedChildren(o,e)&&(o._invalidInsertionPoints=!0,this._lazyDistribute(o.host))),this._removeOwnerShadyRoot(e),o&&this._removeNodeFromHost(o.host,e),t},replaceChild:function(e,t){return this.insertBefore(e,t),this.removeChild(t),e},_hasCachedOwnerRoot:function(e){return Boolean(void 0!==e._ownerShadyRoot)},getOwnerRoot:function(){return this._ownerShadyRootForNode(this.node)},_ownerShadyRootForNode:function(e){if(e){var t=e._ownerShadyRoot;if(void 0===t){if(e._isShadyRoot)t=e;else{var i=n.Logical.getParentNode(e);t=i?i._isShadyRoot?i:this._ownerShadyRootForNode(i):null}(t||document.documentElement.contains(e))&&(e._ownerShadyRoot=t)}return t}},_maybeDistribute:function(e){var t=e.nodeType===Node.DOCUMENT_FRAGMENT_NODE&&!e.__noContent&&i(e).querySelector(o),r=t&&n.Logical.getParentNode(t).nodeType!==Node.DOCUMENT_FRAGMENT_NODE,s=t||e.localName===o;if(s){var a=this.getOwnerRoot();a&&this._lazyDistribute(a.host)}var c=this._nodeNeedsDistribution(this.node);return c&&this._lazyDistribute(this.node),c||s&&!r},_maybeAddInsertionPoint:function(e,t){var r;if(e.nodeType!==Node.DOCUMENT_FRAGMENT_NODE||e.__noContent)e.localName===o&&(n.Logical.saveChildNodes(t),n.Logical.saveChildNodes(e),r=!0);else for(var s,a,c,l=i(e).querySelectorAll(o),d=0;d<l.length&&(s=l[d]);d++)(a=n.Logical.getParentNode(s))===e&&(a=t),c=this._maybeAddInsertionPoint(s,a),r=r||c;return r},_updateInsertionPoints:function(e){for(var t,r=e.shadyRoot._insertionPoints=i(e.shadyRoot).querySelectorAll(o),s=0;s<r.length;s++)t=r[s],n.Logical.saveChildNodes(t),n.Logical.saveChildNodes(n.Logical.getParentNode(t))},_nodeNeedsDistribution:function(e){return e&&e.shadyRoot&&t.hasInsertionPoint(e.shadyRoot)},_addNodeToHost:function(e,t){e._elementAdd&&e._elementAdd(t)},_removeNodeFromHost:function(e,t){e._elementRemove&&e._elementRemove(t)},_removeDistributedChildren:function(e,t){for(var r,o=e._insertionPoints,s=0;s<o.length;s++){var a=o[s];if(this._contains(t,a))for(var c=i(a).getDistributedNodes(),l=0;l<c.length;l++){r=!0;var d=c[l],h=n.Composed.getParentNode(d);h&&n.Composed.removeChild(h,d)}}return r},_contains:function(e,t){for(;t;){if(t==e)return!0;t=n.Logical.getParentNode(t)}},_removeOwnerShadyRoot:function(e){if(this._hasCachedOwnerRoot(e))for(var t,i=n.Logical.getChildNodes(e),r=0,o=i.length;r<o&&(t=i[r]);r++)this._removeOwnerShadyRoot(t);e._ownerShadyRoot=void 0},_firstComposedNode:function(e){for(var t,n,r=i(e).getDistributedNodes(),o=0,s=r.length;o<s&&(t=r[o]);o++)if((n=i(t).getDestinationInsertionPoints())[n.length-1]===e)return t},querySelector:function(e){return this._query(function(i){return t.matchesSelector.call(i,e)},this.node,function(e){return Boolean(e)})[0]||null},querySelectorAll:function(e){return this._query(function(i){return t.matchesSelector.call(i,e)},this.node)},getDestinationInsertionPoints:function(){return this.node._destinationInsertionPoints||[]},getDistributedNodes:function(){return this.node._distributedNodes||[]},_clear:function(){for(;this.childNodes.length;)this.removeChild(this.childNodes[0])},setAttribute:function(e,t){this.node.setAttribute(e,t),this._maybeDistributeParent()},removeAttribute:function(e){this.node.removeAttribute(e),this._maybeDistributeParent()},_maybeDistributeParent:function(){if(this._nodeNeedsDistribution(this.parentNode))return this._lazyDistribute(this.parentNode),!0},cloneNode:function(e){var t=s.call(this.node,!1);if(e)for(var n,r=this.childNodes,o=i(t),a=0;a<r.length;a++)n=i(r[a]).cloneNode(!0),o.appendChild(n);return t},importNode:function(e,t){var r=this.node instanceof Document?this.node:this.node.ownerDocument,o=a.call(r,e,!1);if(t)for(var s,c=n.Logical.getChildNodes(e),l=i(o),d=0;d<c.length;d++)s=i(r).importNode(c[d],!0),l.appendChild(s);return o},_getComposedInnerHTML:function(){return r(this.node,!0)}}),Object.defineProperties(t.prototype,{activeElement:{get:function(){var e=document.activeElement;if(!e)return null;var t=!!this.node._isShadyRoot;if(this.node!==document){if(!t)return null;if(this.node.host===e||!this.node.host.contains(e))return null}for(var n=i(e).getOwnerRoot();n&&n!==this.node;)e=n.host,n=i(e).getOwnerRoot();return this.node===document?n?null:e:n===this.node?e:null},configurable:!0},childNodes:{get:function(){var e=n.Logical.getChildNodes(this.node);return Array.isArray(e)?e:n.arrayCopyChildNodes(this.node)},configurable:!0},children:{get:function(){return n.Logical.hasChildNodes(this.node)?Array.prototype.filter.call(this.childNodes,function(e){return e.nodeType===Node.ELEMENT_NODE}):n.arrayCopyChildren(this.node)},configurable:!0},parentNode:{get:function(){return n.Logical.getParentNode(this.node)},configurable:!0},firstChild:{get:function(){return n.Logical.getFirstChild(this.node)},configurable:!0},lastChild:{get:function(){return n.Logical.getLastChild(this.node)},configurable:!0},nextSibling:{get:function(){return n.Logical.getNextSibling(this.node)},configurable:!0},previousSibling:{get:function(){return n.Logical.getPreviousSibling(this.node)},configurable:!0},firstElementChild:{get:function(){return n.Logical.getFirstElementChild(this.node)},configurable:!0},lastElementChild:{get:function(){return n.Logical.getLastElementChild(this.node)},configurable:!0},nextElementSibling:{get:function(){return n.Logical.getNextElementSibling(this.node)},configurable:!0},previousElementSibling:{get:function(){return n.Logical.getPreviousElementSibling(this.node)},configurable:!0},textContent:{get:function(){var e=this.node.nodeType;if(e===Node.TEXT_NODE||e===Node.COMMENT_NODE)return this.node.textContent;for(var t,i=[],n=0,r=this.childNodes;t=r[n];n++)t.nodeType!==Node.COMMENT_NODE&&i.push(t.textContent);return i.join("")},set:function(e){var t=this.node.nodeType;t===Node.TEXT_NODE||t===Node.COMMENT_NODE?this.node.textContent=e:(this._clear(),e&&this.appendChild(document.createTextNode(e)))},configurable:!0},innerHTML:{get:function(){var e=this.node.nodeType;return e===Node.TEXT_NODE||e===Node.COMMENT_NODE?null:r(this.node)},set:function(e){var t=this.node.nodeType;if(t!==Node.TEXT_NODE||t!==Node.COMMENT_NODE){this._clear();var i=document.createElement("div");i.innerHTML=e;for(var r=n.arrayCopyChildNodes(i),o=0;o<r.length;o++)this.appendChild(r[o])}},configurable:!0}}),t.hasInsertionPoint=function(e){return Boolean(e&&e._insertionPoints.length)}}}(),function(){"use strict";var e=Polymer.Settings,t=Polymer.TreeApi,i=Polymer.DomApi;if(e.useShadow){Polymer.Base.mixin(i.prototype,{querySelectorAll:function(e){return t.arrayCopy(this.node.querySelectorAll(e))},getOwnerRoot:function(){for(var e=this.node;e;){if(e.nodeType===Node.DOCUMENT_FRAGMENT_NODE&&e.host)return e;e=e.parentNode}},importNode:function(e,t){return(this.node instanceof Document?this.node:this.node.ownerDocument).importNode(e,t)},getDestinationInsertionPoints:function(){var e=this.node.getDestinationInsertionPoints&&this.node.getDestinationInsertionPoints();return e?t.arrayCopy(e):[]},getDistributedNodes:function(){var e=this.node.getDistributedNodes&&this.node.getDistributedNodes();return e?t.arrayCopy(e):[]}}),Object.defineProperties(i.prototype,{activeElement:{get:function(){var e=i.wrap(this.node),t=e.activeElement;return e.contains(t)?t:null},configurable:!0},childNodes:{get:function(){return t.arrayCopyChildNodes(this.node)},configurable:!0},children:{get:function(){return t.arrayCopyChildren(this.node)},configurable:!0},textContent:{get:function(){return this.node.textContent},set:function(e){return this.node.textContent=e},configurable:!0},innerHTML:{get:function(){return this.node.innerHTML},set:function(e){return this.node.innerHTML=e},configurable:!0}});var n=function(e){i.prototype[e]=function(){return this.node[e].apply(this.node,arguments)}};!function(e){for(var t=0;t<e.length;t++)n(e[t])}(["cloneNode","appendChild","insertBefore","removeChild","replaceChild","setAttribute","removeAttribute","querySelector"]);var r=function(e){Object.defineProperty(i.prototype,e,{get:function(){return this.node[e]},configurable:!0})};!function(e){for(var t=0;t<e.length;t++)r(e[t])}(["parentNode","firstChild","lastChild","nextSibling","previousSibling","firstElementChild","lastElementChild","nextElementSibling","previousElementSibling"])}}(),Polymer.Base.mixin(Polymer.dom,{_flushGuard:0,_FLUSH_MAX:100,_needsTakeRecords:!Polymer.Settings.useNativeCustomElements,_debouncers:[],_staticFlushList:[],_finishDebouncer:null,flush:function(){for(this._flushGuard=0,this._prepareFlush();this._debouncers.length&&this._flushGuard<this._FLUSH_MAX;){for(;this._debouncers.length;)this._debouncers.shift().complete();this._finishDebouncer&&this._finishDebouncer.complete(),this._prepareFlush(),this._flushGuard++}this._flushGuard>=this._FLUSH_MAX&&console.warn("Polymer.dom.flush aborted. Flush may not be complete.")},_prepareFlush:function(){this._needsTakeRecords&&CustomElements.takeRecords();for(var e=0;e<this._staticFlushList.length;e++)this._staticFlushList[e]()},addStaticFlush:function(e){this._staticFlushList.push(e)},removeStaticFlush:function(e){var t=this._staticFlushList.indexOf(e);t>=0&&this._staticFlushList.splice(t,1)},addDebouncer:function(e){this._debouncers.push(e),this._finishDebouncer=Polymer.Debounce(this._finishDebouncer,this._finishFlush)},_finishFlush:function(){Polymer.dom._debouncers=[]}}),Polymer.EventApi=function(){"use strict";var e=Polymer.DomApi.ctor,t=Polymer.Settings;e.Event=function(e){this.event=e},t.useShadow?e.Event.prototype={get rootTarget(){return this.event.path[0]},get localTarget(){return this.event.target},get path(){var e=this.event.path;return Array.isArray(e)||(e=Array.prototype.slice.call(e)),e}}:e.Event.prototype={get rootTarget(){return this.event.target},get localTarget(){for(var e=this.event.currentTarget,t=e&&Polymer.dom(e).getOwnerRoot(),i=this.path,n=0;n<i.length;n++)if(Polymer.dom(i[n]).getOwnerRoot()===t)return i[n]},get path(){if(!this.event._path){for(var e=[],t=this.rootTarget;t;){e.push(t);var i=Polymer.dom(t).getDestinationInsertionPoints();if(i.length){for(var n=0;n<i.length-1;n++)e.push(i[n]);t=i[i.length-1]}else t=Polymer.dom(t).parentNode||t.host}e.push(window),this.event._path=e}return this.event._path}};return{factory:function(t){return t.__eventApi||(t.__eventApi=new e.Event(t)),t.__eventApi}}}(),function(){"use strict";var e=Polymer.DomApi.ctor,t=Polymer.Settings.useShadow;Object.defineProperty(e.prototype,"classList",{get:function(){return this._classList||(this._classList=new e.ClassList(this)),this._classList},configurable:!0}),e.ClassList=function(e){this.domApi=e,this.node=e.node},e.ClassList.prototype={add:function(){this.node.classList.add.apply(this.node.classList,arguments),this._distributeParent()},remove:function(){this.node.classList.remove.apply(this.node.classList,arguments),this._distributeParent()},toggle:function(){this.node.classList.toggle.apply(this.node.classList,arguments),this._distributeParent()},_distributeParent:function(){t||this.domApi._maybeDistributeParent()},contains:function(){return this.node.classList.contains.apply(this.node.classList,arguments)}}}(),function(){"use strict";var e=Polymer.DomApi.ctor,t=Polymer.Settings;if(e.EffectiveNodesObserver=function(e){this.domApi=e,this.node=this.domApi.node,this._listeners=[]},e.EffectiveNodesObserver.prototype={addListener:function(e){this._isSetup||(this._setup(),this._isSetup=!0);var t={fn:e,_nodes:[]};return this._listeners.push(t),this._scheduleNotify(),t},removeListener:function(e){var t=this._listeners.indexOf(e);t>=0&&(this._listeners.splice(t,1),e._nodes=[]),this._hasListeners()||(this._cleanup(),this._isSetup=!1)},_setup:function(){this._observeContentElements(this.domApi.childNodes)},_cleanup:function(){this._unobserveContentElements(this.domApi.childNodes)},_hasListeners:function(){return Boolean(this._listeners.length)},_scheduleNotify:function(){this._debouncer&&this._debouncer.stop(),this._debouncer=Polymer.Debounce(this._debouncer,this._notify),this._debouncer.context=this,Polymer.dom.addDebouncer(this._debouncer)},notify:function(){this._hasListeners()&&this._scheduleNotify()},_notify:function(){this._beforeCallListeners(),this._callListeners()},_beforeCallListeners:function(){this._updateContentElements()},_updateContentElements:function(){this._observeContentElements(this.domApi.childNodes)},_observeContentElements:function(e){for(var t,i=0;i<e.length&&(t=e[i]);i++)this._isContent(t)&&(t.__observeNodesMap=t.__observeNodesMap||new WeakMap,t.__observeNodesMap.has(this)||t.__observeNodesMap.set(this,this._observeContent(t)))},_observeContent:function(e){var t=this,i=Polymer.dom(e).observeNodes(function(){t._scheduleNotify()});return i._avoidChangeCalculation=!0,i},_unobserveContentElements:function(e){for(var t,i,n=0;n<e.length&&(t=e[n]);n++)this._isContent(t)&&(i=t.__observeNodesMap.get(this))&&(Polymer.dom(t).unobserveNodes(i),t.__observeNodesMap.delete(this))},_isContent:function(e){return"content"===e.localName},_callListeners:function(){for(var e,t=this._listeners,i=this._getEffectiveNodes(),n=0;n<t.length&&(e=t[n]);n++){var r=this._generateListenerInfo(e,i);(r||e._alwaysNotify)&&this._callListener(e,r)}},_getEffectiveNodes:function(){return this.domApi.getEffectiveChildNodes()},_generateListenerInfo:function(e,t){if(e._avoidChangeCalculation)return!0;for(var i,n=e._nodes,r={target:this.node,addedNodes:[],removedNodes:[]},o=Polymer.ArraySplice.calculateSplices(t,n),s=0;s<o.length&&(i=o[s]);s++)for(var a,c=0;c<i.removed.length&&(a=i.removed[c]);c++)r.removedNodes.push(a);for(s=0,i;s<o.length&&(i=o[s]);s++)for(c=i.index;c<i.index+i.addedCount;c++)r.addedNodes.push(t[c]);return e._nodes=t,r.addedNodes.length||r.removedNodes.length?r:void 0},_callListener:function(e,t){return e.fn.call(this.node,t)},enableShadowAttributeTracking:function(){}},t.useShadow){var i=e.EffectiveNodesObserver.prototype._setup,n=e.EffectiveNodesObserver.prototype._cleanup;Polymer.Base.mixin(e.EffectiveNodesObserver.prototype,{_setup:function(){if(!this._observer){var e=this;this._mutationHandler=function(t){t&&t.length&&e._scheduleNotify()},this._observer=new MutationObserver(this._mutationHandler),this._boundFlush=function(){e._flush()},Polymer.dom.addStaticFlush(this._boundFlush),this._observer.observe(this.node,{childList:!0})}i.call(this)},_cleanup:function(){this._observer.disconnect(),this._observer=null,this._mutationHandler=null,Polymer.dom.removeStaticFlush(this._boundFlush),n.call(this)},_flush:function(){this._observer&&this._mutationHandler(this._observer.takeRecords())},enableShadowAttributeTracking:function(){if(this._observer){this._makeContentListenersAlwaysNotify(),this._observer.disconnect(),this._observer.observe(this.node,{childList:!0,attributes:!0,subtree:!0});var e=this.domApi.getOwnerRoot(),t=e&&e.host;t&&Polymer.dom(t).observer&&Polymer.dom(t).observer.enableShadowAttributeTracking()}},_makeContentListenersAlwaysNotify:function(){for(var e,t=0;t<this._listeners.length;t++)(e=this._listeners[t])._alwaysNotify=e._isContentListener}})}}(),function(){"use strict";var e=Polymer.DomApi.ctor,t=Polymer.Settings;e.DistributedNodesObserver=function(t){e.EffectiveNodesObserver.call(this,t)},e.DistributedNodesObserver.prototype=Object.create(e.EffectiveNodesObserver.prototype),Polymer.Base.mixin(e.DistributedNodesObserver.prototype,{_setup:function(){},_cleanup:function(){},_beforeCallListeners:function(){},_getEffectiveNodes:function(){return this.domApi.getDistributedNodes()}}),t.useShadow&&Polymer.Base.mixin(e.DistributedNodesObserver.prototype,{_setup:function(){if(!this._observer){var e=this.domApi.getOwnerRoot(),t=e&&e.host;if(t){var i=this;this._observer=Polymer.dom(t).observeNodes(function(){i._scheduleNotify()}),this._observer._isContentListener=!0,this._hasAttrSelect()&&Polymer.dom(t).observer.enableShadowAttributeTracking()}}},_hasAttrSelect:function(){var e=this.node.getAttribute("select");return e&&e.match(/[[.]+/)},_cleanup:function(){var e=this.domApi.getOwnerRoot(),t=e&&e.host;t&&Polymer.dom(t).unobserveNodes(this._observer),this._observer=null}})}(),function(){function e(e,t){t._distributedNodes.push(e);var i=e._destinationInsertionPoints;i?i.push(t):e._destinationInsertionPoints=[t]}function t(e){return"content"==e.localName}function i(e){for(;e&&function(e){for(var t,i=r.Logical.getChildNodes(e),n=0;n<i.length;n++)if((t=i[n]).localName&&"content"===t.localName)return e.domHost}(e);)e=e.domHost;return e}var n=Polymer.DomApi,r=Polymer.TreeApi;Polymer.Base._addFeature({_prepShady:function(){this._useContent=this._useContent||Boolean(this._template)},_setupShady:function(){this.shadyRoot=null,this.__domApi||(this.__domApi=null),this.__dom||(this.__dom=null),this._ownerShadyRoot||(this._ownerShadyRoot=void 0)},_poolContent:function(){this._useContent&&r.Logical.saveChildNodes(this)},_setupRoot:function(){this._useContent&&(this._createLocalRoot(),this.dataHost||function(e){if(s&&e)for(var t=0;t<e.length;t++)CustomElements.upgrade(e[t])}(r.Logical.getChildNodes(this)))},_createLocalRoot:function(){this.shadyRoot=this.root,this.shadyRoot._distributionClean=!1,this.shadyRoot._hasDistributed=!1,this.shadyRoot._isShadyRoot=!0,this.shadyRoot._dirtyRoots=[];var e=this.shadyRoot._insertionPoints=!this._notes||this._notes._hasContent?this.shadyRoot.querySelectorAll("content"):[];r.Logical.saveChildNodes(this.shadyRoot);for(var t,i=0;i<e.length;i++)t=e[i],r.Logical.saveChildNodes(t),r.Logical.saveChildNodes(t.parentNode);this.shadyRoot.host=this},distributeContent:function(e){if(this.shadyRoot){this.shadyRoot._invalidInsertionPoints=this.shadyRoot._invalidInsertionPoints||e;var t=i(this);Polymer.dom(this)._lazyDistribute(t)}},_distributeContent:function(){this._useContent&&!this.shadyRoot._distributionClean&&(this.shadyRoot._invalidInsertionPoints&&(Polymer.dom(this)._updateInsertionPoints(this),this.shadyRoot._invalidInsertionPoints=!1),this._beginDistribute(),this._distributeDirtyRoots(),this._finishDistribute())},_beginDistribute:function(){this._useContent&&n.hasInsertionPoint(this.shadyRoot)&&(this._resetDistribution(),this._distributePool(this.shadyRoot,this._collectPool()))},_distributeDirtyRoots:function(){for(var e,t=this.shadyRoot._dirtyRoots,i=0,n=t.length;i<n&&(e=t[i]);i++)e._distributeContent();this.shadyRoot._dirtyRoots=[]},_finishDistribute:function(){if(this._useContent){if(this.shadyRoot._distributionClean=!0,n.hasInsertionPoint(this.shadyRoot))this._composeTree(),function(e){for(var t,i=0;i<e._insertionPoints.length;i++)t=e._insertionPoints[i],n.hasApi(t)&&Polymer.dom(t).notifyObserver()}(this.shadyRoot);else if(this.shadyRoot._hasDistributed){var e=this._composeNode(this);this._updateChildNodes(this,e)}else r.Composed.clearChildNodes(this),this.appendChild(this.shadyRoot);this.shadyRoot._hasDistributed||function(e){n.hasApi(e)&&Polymer.dom(e).notifyObserver()}(this),this.shadyRoot._hasDistributed=!0}},elementMatches:function(e,t){return t=t||this,n.matchesSelector.call(t,e)},_resetDistribution:function(){for(var e=r.Logical.getChildNodes(this),i=0;i<e.length;i++){var n=e[i];n._destinationInsertionPoints&&(n._destinationInsertionPoints=void 0),t(n)&&function(e){var t=e._distributedNodes;if(t)for(var i=0;i<t.length;i++){var n=t[i]._destinationInsertionPoints;n&&n.splice(n.indexOf(e)+1,n.length)}}(n)}for(var o=this.shadyRoot._insertionPoints,s=0;s<o.length;s++)o[s]._distributedNodes=[]},_collectPool:function(){for(var e=[],i=r.Logical.getChildNodes(this),n=0;n<i.length;n++){var o=i[n];t(o)?e.push.apply(e,o._distributedNodes):e.push(o)}return e},_distributePool:function(e,t){for(var i,o=e._insertionPoints,s=0,a=o.length;s<a&&(i=o[s]);s++)this._distributeInsertionPoint(i,t),function(e,t){var i=r.Logical.getParentNode(e);i&&i.shadyRoot&&n.hasInsertionPoint(i.shadyRoot)&&i.shadyRoot._distributionClean&&(i.shadyRoot._distributionClean=!1,t.shadyRoot._dirtyRoots.push(i))}(i,this)},_distributeInsertionPoint:function(t,i){for(var n,o=!1,s=0,a=i.length;s<a;s++)(n=i[s])&&this._matchesContentSelect(n,t)&&(e(n,t),i[s]=void 0,o=!0);if(!o)for(var c=r.Logical.getChildNodes(t),l=0;l<c.length;l++)e(c[l],t)},_composeTree:function(){this._updateChildNodes(this,this._composeNode(this));for(var e,t,i=this.shadyRoot._insertionPoints,n=0,o=i.length;n<o&&(e=i[n]);n++)(t=r.Logical.getParentNode(e))._useContent||t===this||t===this.shadyRoot||this._updateChildNodes(t,this._composeNode(t))},_composeNode:function(e){for(var i=[],n=r.Logical.getChildNodes(e.shadyRoot||e),o=0;o<n.length;o++){var s=n[o];if(t(s))for(var a=s._distributedNodes,c=0;c<a.length;c++){var l=a[c];(function(e,t){var i=t._destinationInsertionPoints;return i&&i[i.length-1]===e})(s,l)&&i.push(l)}else i.push(s)}return i},_updateChildNodes:function(e,t){for(var i=r.Composed.getChildNodes(e),n=Polymer.ArraySplice.calculateSplices(t,i),o=0,s=0;o<n.length&&(l=n[o]);o++){for(var a,c=0;c<l.removed.length&&(a=l.removed[c]);c++)r.Composed.getParentNode(a)===e&&r.Composed.removeChild(e,a),i.splice(l.index+s,1);s-=l.addedCount}for(var l,d,o=0;o<n.length&&(l=n[o]);o++)for(d=i[l.index],c=l.index,a;c<l.index+l.addedCount;c++)a=t[c],r.Composed.insertBefore(e,a,d),i.splice(c,0,a)},_matchesContentSelect:function(e,t){var i=t.getAttribute("select");if(!i)return!0;if(!(i=i.trim()))return!0;if(!(e instanceof Element))return!1;return!!/^(:not\()?[*.#[a-zA-Z_|]/.test(i)&&this.elementMatches(i,e)},_elementAdd:function(){},_elementRemove:function(){}});var o={get:function(){var e=Polymer.dom(this).getOwnerRoot();return e&&e.host},configurable:!0};Object.defineProperty(Polymer.Base,"domHost",o),Polymer.BaseDescriptors.domHost=o;var s=window.CustomElements&&!CustomElements.useNative}(),Polymer.Settings.useShadow&&Polymer.Base._addFeature({_poolContent:function(){},_beginDistribute:function(){},distributeContent:function(){},_distributeContent:function(){},_finishDistribute:function(){},_createLocalRoot:function(){this.createShadowRoot(),this.shadowRoot.appendChild(this.root),this.root=this.shadowRoot}}),Polymer.Async={_currVal:0,_lastVal:0,_callbacks:[],_twiddleContent:0,_twiddle:document.createTextNode(""),run:function(e,t){return t>0?~setTimeout(e,t):(this._twiddle.textContent=this._twiddleContent++,this._callbacks.push(e),this._currVal++)},cancel:function(e){if(e<0)clearTimeout(~e);else{var t=e-this._lastVal;if(t>=0){if(!this._callbacks[t])throw"invalid async handle: "+e;this._callbacks[t]=null}}},_atEndOfMicrotask:function(){for(var e=this._callbacks.length,t=0;t<e;t++){var i=this._callbacks[t];if(i)try{i()}catch(e){throw t++,this._callbacks.splice(0,t),this._lastVal+=t,this._twiddle.textContent=this._twiddleContent++,e}}this._callbacks.splice(0,e),this._lastVal+=e}},new window.MutationObserver(function(){Polymer.Async._atEndOfMicrotask()}).observe(Polymer.Async._twiddle,{characterData:!0}),Polymer.Debounce=function(){var e=Polymer.Async,t=function(e){this.context=e;var t=this;this.boundComplete=function(){t.complete()}};return t.prototype={go:function(t,i){var n;this.finish=function(){e.cancel(n)},n=e.run(this.boundComplete,i),this.callback=t},stop:function(){this.finish&&(this.finish(),this.finish=null,this.callback=null)},complete:function(){if(this.finish){var e=this.callback;this.stop(),e.call(this.context)}}},function(e,i,n){return e?e.stop():e=new t(this),e.go(i,n),e}}(),Polymer.Base._addFeature({_setupDebouncers:function(){this._debouncers={}},debounce:function(e,t,i){return this._debouncers[e]=Polymer.Debounce.call(this,this._debouncers[e],t,i)},isDebouncerActive:function(e){var t=this._debouncers[e];return!(!t||!t.finish)},flushDebouncer:function(e){var t=this._debouncers[e];t&&t.complete()},cancelDebouncer:function(e){var t=this._debouncers[e];t&&t.stop()}}),Polymer.DomModule=document.createElement("dom-module"),Polymer.Base._addFeature({_registerFeatures:function(){this._prepIs(),this._prepBehaviors(),this._prepConstructor(),this._prepTemplate(),this._prepShady(),this._prepPropertyInfo()},_prepBehavior:function(e){this._addHostAttributes(e.hostAttributes)},_initFeatures:function(){this._registerHost(),this._template&&(this._poolContent(),this._beginHosting(),this._stampTemplate(),this._endHosting()),this._marshalHostAttributes(),this._setupDebouncers(),this._marshalBehaviors(),this._tryReady()},_marshalBehavior:function(e){}}),function(){Polymer.nar=[];var e=Polymer.Settings.disableUpgradeEnabled;Polymer.Annotations={parseAnnotations:function(e,t){var i=[],n=e._content||e.content;return this._parseNodeAnnotations(n,i,t||e.hasAttribute("strip-whitespace")),i},_parseNodeAnnotations:function(e,t,i){return e.nodeType===Node.TEXT_NODE?this._parseTextNodeAnnotation(e,t):this._parseElementAnnotations(e,t,i)},_bindingRegex:new RegExp("(\\[\\[|{{)\\s*(?:(!)\\s*)?((?:[a-zA-Z_$][\\w.:$\\-*]*)\\s*(?:\\(\\s*(?:(?:(?:(?:[a-zA-Z_$][\\w.:$\\-*]*)|(?:[-+]?[0-9]*\\.?[0-9]+(?:[eE][-+]?[0-9]+)?)|(?:(?:'(?:[^'\\\\]|\\\\.)*')|(?:\"(?:[^\"\\\\]|\\\\.)*\"))\\s*)(?:,\\s*(?:(?:[a-zA-Z_$][\\w.:$\\-*]*)|(?:[-+]?[0-9]*\\.?[0-9]+(?:[eE][-+]?[0-9]+)?)|(?:(?:'(?:[^'\\\\]|\\\\.)*')|(?:\"(?:[^\"\\\\]|\\\\.)*\"))\\s*))*)?)\\)\\s*)?)(?:]]|}})","g"),_parseBindings:function(e){for(var t,i=this._bindingRegex,n=[],r=0;null!==(t=i.exec(e));){t.index>r&&n.push({literal:e.slice(r,t.index)});var o,s,a,c=t[1][0],l=Boolean(t[2]),d=t[3].trim();"{"==c&&(a=d.indexOf("::"))>0&&(s=d.substring(a+2),d=d.substring(0,a),o=!0),n.push({compoundIndex:n.length,value:d,mode:c,negate:l,event:s,customEvent:o}),r=i.lastIndex}if(r&&r<e.length){var h=e.substring(r);h&&n.push({literal:h})}if(n.length)return n},_literalFromParts:function(e){for(var t="",i=0;i<e.length;i++){t+=e[i].literal||""}return t},_parseTextNodeAnnotation:function(e,t){var i=this._parseBindings(e.textContent);if(i){e.textContent=this._literalFromParts(i)||" ";var n={bindings:[{kind:"text",name:"textContent",parts:i,isCompound:1!==i.length}]};return t.push(n),n}},_parseElementAnnotations:function(e,t,i){var n={bindings:[],events:[]};return"content"===e.localName&&(t._hasContent=!0),this._parseChildNodesAnnotations(e,n,t,i),e.attributes&&(this._parseNodeAttributeAnnotations(e,n,t),this.prepElement&&this.prepElement(e)),(n.bindings.length||n.events.length||n.id)&&t.push(n),n},_parseChildNodesAnnotations:function(e,t,i,n){if(e.firstChild)for(var r=e.firstChild,o=0;r;){var s=r.nextSibling;if("template"!==r.localName||r.hasAttribute("preserve-content")||this._parseTemplate(r,o,i,t,n),"slot"==r.localName&&(r=this._replaceSlotWithContent(r)),r.nodeType===Node.TEXT_NODE){for(var a=s;a&&a.nodeType===Node.TEXT_NODE;)r.textContent+=a.textContent,s=a.nextSibling,e.removeChild(a),a=s;n&&!r.textContent.trim()&&(e.removeChild(r),o--)}if(r.parentNode){var c=this._parseNodeAnnotations(r,i,n);c&&(c.parent=t,c.index=o)}r=s,o++}},_replaceSlotWithContent:function(e){for(var t=e.ownerDocument.createElement("content");e.firstChild;)t.appendChild(e.firstChild);for(var i=e.attributes,n=0;n<i.length;n++){var r=i[n];t.setAttribute(r.name,r.value)}var o=e.getAttribute("name");return o&&t.setAttribute("select","[slot='"+o+"']"),e.parentNode.replaceChild(t,e),t},_parseTemplate:function(e,t,i,n,r){var o=document.createDocumentFragment();o._notes=this.parseAnnotations(e,r),o.appendChild(e.content),i.push({bindings:Polymer.nar,events:Polymer.nar,templateContent:o,parent:n,index:t})},_parseNodeAttributeAnnotations:function(e,t){for(var i,n=Array.prototype.slice.call(e.attributes),r=n.length-1;i=n[r];r--){var o,s=i.name,a=i.value;"on-"===s.slice(0,3)?(e.removeAttribute(s),t.events.push({name:s.slice(3),value:a})):(o=this._parseNodeAttributeAnnotation(e,s,a))?t.bindings.push(o):"id"===s&&(t.id=a)}},_parseNodeAttributeAnnotation:function(t,i,n){var r=this._parseBindings(n);if(r){var o=i,s="property";"$"==i[i.length-1]&&(i=i.slice(0,-1),s="attribute");var a=this._literalFromParts(r);a&&"attribute"==s&&t.setAttribute(i,a),"input"===t.localName&&"value"===o&&t.setAttribute(o,""),e&&"disable-upgrade$"===o&&t.setAttribute(i,""),t.removeAttribute(o);var c=Polymer.CaseMap.dashToCamelCase(i);return"property"===s&&(i=c),{kind:s,name:i,propertyName:c,parts:r,literal:a,isCompound:1!==r.length}}},findAnnotatedNode:function(e,t){var i=t.parent&&Polymer.Annotations.findAnnotatedNode(e,t.parent);if(!i)return e;for(var n=i.firstChild,r=0;n;n=n.nextSibling)if(t.index===r++)return n}}}(),Polymer.Path={root:function(e){var t=e.indexOf(".");return-1===t?e:e.slice(0,t)},isDeep:function(e){return-1!==e.indexOf(".")},isAncestor:function(e,t){return 0===e.indexOf(t+".")},isDescendant:function(e,t){return 0===t.indexOf(e+".")},translate:function(e,t,i){return t+i.slice(e.length)},matches:function(e,t,i){return e===i||this.isAncestor(e,i)||Boolean(t)&&this.isDescendant(e,i)}},Polymer.Base._addFeature({_prepAnnotations:function(){if(this._template){var e=this;Polymer.Annotations.prepElement=function(t){e._prepElement(t)},this._template._content&&this._template._content._notes?this._notes=this._template._content._notes:(this._notes=Polymer.Annotations.parseAnnotations(this._template),this._processAnnotations(this._notes)),Polymer.Annotations.prepElement=null}else this._notes=[]},_processAnnotations:function(e){for(var t=0;t<e.length;t++){for(var i=e[t],n=0;n<i.bindings.length;n++)for(var r=i.bindings[n],o=0;o<r.parts.length;o++){var s=r.parts[o];if(!s.literal){var a=this._parseMethod(s.value);a?s.signature=a:s.model=Polymer.Path.root(s.value)}}if(i.templateContent){this._processAnnotations(i.templateContent._notes);var c=i.templateContent._parentProps=this._discoverTemplateParentProps(i.templateContent._notes),l=[];for(var d in c){var h="_parent_"+d;l.push({index:i.index,kind:"property",name:h,propertyName:h,parts:[{mode:"{",model:d,value:d}]})}i.bindings=i.bindings.concat(l)}}},_discoverTemplateParentProps:function(e){for(var t,i={},n=0;n<e.length&&(t=e[n]);n++){for(var r,o=0,s=t.bindings;o<s.length&&(r=s[o]);o++)for(var a,c=0,l=r.parts;c<l.length&&(a=l[c]);c++)if(a.signature){for(var d=a.signature.args,h=0;h<d.length;h++){var u=d[h].model;u&&(i[u]=!0)}a.signature.dynamicFn&&(i[a.signature.method]=!0)}else a.model&&(i[a.model]=!0);if(t.templateContent){var p=t.templateContent._parentProps;Polymer.Base.mixin(i,p)}}return i},_prepElement:function(e){Polymer.ResolveUrl.resolveAttrs(e,this._template.ownerDocument)},_findAnnotatedNode:Polymer.Annotations.findAnnotatedNode,_marshalAnnotationReferences:function(){this._template&&(this._marshalIdNodes(),this._marshalAnnotatedNodes(),this._marshalAnnotatedListeners())},_configureAnnotationReferences:function(){for(var e=this._notes,t=this._nodes,i=0;i<e.length;i++){var n=e[i],r=t[i];this._configureTemplateContent(n,r),this._configureCompoundBindings(n,r)}},_configureTemplateContent:function(e,t){e.templateContent&&(t._content=e.templateContent)},_configureCompoundBindings:function(e,t){for(var i=e.bindings,n=0;n<i.length;n++){var r=i[n];if(r.isCompound){for(var o=t.__compoundStorage__||(t.__compoundStorage__={}),s=r.parts,a=new Array(s.length),c=0;c<s.length;c++)a[c]=s[c].literal;var l=r.name;o[l]=a,r.literal&&"property"==r.kind&&(t._configValue?t._configValue(l,r.literal):t[l]=r.literal)}}},_marshalIdNodes:function(){this.$={};for(var e,t=0,i=this._notes.length;t<i&&(e=this._notes[t]);t++)e.id&&(this.$[e.id]=this._findAnnotatedNode(this.root,e))},_marshalAnnotatedNodes:function(){if(this._notes&&this._notes.length){for(var e=new Array(this._notes.length),t=0;t<this._notes.length;t++)e[t]=this._findAnnotatedNode(this.root,this._notes[t]);this._nodes=e}},_marshalAnnotatedListeners:function(){for(var e,t=0,i=this._notes.length;t<i&&(e=this._notes[t]);t++)if(e.events&&e.events.length)for(var n,r=this._findAnnotatedNode(this.root,e),o=0,s=e.events;o<s.length&&(n=s[o]);o++)this.listen(r,n.name,n.value)}}),Polymer.Base._addFeature({listeners:{},_listenListeners:function(e){var t,i,n;for(n in e)n.indexOf(".")<0?(t=this,i=n):(i=n.split("."),t=this.$[i[0]],i=i[1]),this.listen(t,i,e[n])},listen:function(e,t,i){var n=this._recallEventHandler(this,t,e,i);n||(n=this._createEventHandler(e,t,i)),n._listening||(this._listen(e,t,n),n._listening=!0)},_boundListenerKey:function(e,t){return e+":"+t},_recordEventHandler:function(e,t,i,n,r){var o=e.__boundListeners;o||(o=e.__boundListeners=new WeakMap);var s=o.get(i);s||(s={},Polymer.Settings.isIE&&i==window||o.set(i,s));s[this._boundListenerKey(t,n)]=r},_recallEventHandler:function(e,t,i,n){var r=e.__boundListeners;if(r){var o=r.get(i);if(o){return o[this._boundListenerKey(t,n)]}}},_createEventHandler:function(e,t,i){var n=this,r=function(e){n[i]?n[i](e,e.detail):n._warn(n._logf("_createEventHandler","listener method `"+i+"` not defined"))};return r._listening=!1,this._recordEventHandler(n,t,e,i,r),r},unlisten:function(e,t,i){var n=this._recallEventHandler(this,t,e,i);n&&(this._unlisten(e,t,n),n._listening=!1)},_listen:function(e,t,i){e.addEventListener(t,i)},_unlisten:function(e,t,i){e.removeEventListener(t,i)}}),function(){"use strict";function e(e){return u.indexOf(e)>-1}function t(){if(a&&m&&Polymer.Settings.passiveTouchGestures)return{passive:!0}}function i(e){for(var t,i=_?["click"]:u,n=0;n<i.length;n++)t=i[n],e?document.addEventListener(t,v,!0):document.removeEventListener(t,v,!0)}function n(t){var i=t.type;if(!e(i))return!1;if("mousemove"===i){var n=void 0===t.buttons?1:t.buttons;return t instanceof window.MouseEvent&&!f&&(n=p[t.which]||0),Boolean(1&n)}return 0===(void 0===t.button?0:t.button)}function r(e,t,i){e.movefn=t,e.upfn=i,document.addEventListener("mousemove",t),document.addEventListener("mouseup",i)}function o(e){document.removeEventListener("mousemove",e.movefn),document.removeEventListener("mouseup",e.upfn),e.movefn=null,e.upfn=null}var s=Polymer.DomApi.wrap,a="string"==typeof document.head.style.touchAction,c="__polymerGestures",l="__polymerGesturesHandled",d="__polymerGesturesTouchAction",h=2500,u=["mousedown","mousemove","mouseup","click"],p=[0,1,4,2],f=function(){try{return 1===new MouseEvent("test",{buttons:1}).buttons}catch(e){return!1}}(),m=!1;!function(){try{var e=Object.defineProperty({},"passive",{get:function(){m=!0}});window.addEventListener("test",null,e),window.removeEventListener("test",null,e)}catch(e){}}();var _=navigator.userAgent.match(/iP(?:[oa]d|hone)|Android/),v=function(e){var t=e.sourceCapabilities;if((!t||t.firesTouchEvents)&&(e[l]={skip:!0},"click"===e.type)){for(var i=Polymer.dom(e).path,n=0;n<i.length;n++)if(i[n]===y.mouse.target)return;e.preventDefault(),e.stopPropagation()}},y={mouse:{target:null,mouseIgnoreJob:null},touch:{x:0,y:0,id:-1,scrollDecided:!1}};document.addEventListener("touchend",function(e){y.mouse.mouseIgnoreJob||i(!0),y.mouse.target=Polymer.dom(e).rootTarget,y.mouse.mouseIgnoreJob=Polymer.Debounce(y.mouse.mouseIgnoreJob,function(){i(),y.mouse.target=null,y.mouse.mouseIgnoreJob=null},h)},!!m&&{passive:!0});var g={gestures:{},recognizers:[],deepTargetFind:function(e,t){for(var i=document.elementFromPoint(e,t),n=i;n&&n.shadowRoot;)(n=n.shadowRoot.elementFromPoint(e,t))&&(i=n);return i},findOriginalTarget:function(e){return e.path?e.path[0]:e.target},handleNative:function(e){var t,i=e.type,n=s(e.currentTarget)[c];if(n){var r=n[i];if(r){if(!e[l]&&(e[l]={},"touch"===i.slice(0,5))){var o=e.changedTouches[0];if("touchstart"===i&&1===e.touches.length&&(y.touch.id=o.identifier),y.touch.id!==o.identifier)return;a||"touchstart"!==i&&"touchmove"!==i||g.handleTouchAction(e)}if(!(t=e[l]).skip){for(var d,h=g.recognizers,u=0;u<h.length;u++)r[(d=h[u]).name]&&!t[d.name]&&d.flow&&d.flow.start.indexOf(e.type)>-1&&d.reset&&d.reset();for(u=0,d;u<h.length;u++)r[(d=h[u]).name]&&!t[d.name]&&(t[d.name]=!0,d[i](e))}}}},handleTouchAction:function(e){var t=e.changedTouches[0],i=e.type;if("touchstart"===i)y.touch.x=t.clientX,y.touch.y=t.clientY,y.touch.scrollDecided=!1;else if("touchmove"===i){if(y.touch.scrollDecided)return;y.touch.scrollDecided=!0;var n=function(e){for(var t,i=Polymer.dom(e).path,n="auto",r=0;r<i.length;r++)if((t=i[r])[d]){n=t[d];break}return n}(e),r=!1,o=Math.abs(y.touch.x-t.clientX),s=Math.abs(y.touch.y-t.clientY);e.cancelable&&("none"===n?r=!0:"pan-x"===n?r=s>o:"pan-y"===n&&(r=o>s)),r?e.preventDefault():g.prevent("track")}},add:function(i,n,r){i=s(i);var o=this.gestures[n],a=o.deps,l=o.name,d=i[c];d||(i[c]=d={});for(var h,u,p=0;p<a.length;p++)if(h=a[p],!_||!e(h)||"click"===h){if((u=d[h])||(d[h]=u={_count:0}),0===u._count){var f=!e(h)&&t();i.addEventListener(h,this.handleNative,f)}u[l]=(u[l]||0)+1,u._count=(u._count||0)+1}i.addEventListener(n,r),o.touchAction&&this.setTouchAction(i,o.touchAction)},remove:function(i,n,r){i=s(i);var o=this.gestures[n],a=o.deps,l=o.name,d=i[c];if(d)for(var h,u,p=0;p<a.length;p++)if(h=a[p],(u=d[h])&&u[l]&&(u[l]=(u[l]||1)-1,u._count=(u._count||1)-1,0===u._count)){var f=!e(h)&&t();i.removeEventListener(h,this.handleNative,f)}i.removeEventListener(n,r)},register:function(e){this.recognizers.push(e);for(var t=0;t<e.emits.length;t++)this.gestures[e.emits[t]]=e},findRecognizerByEvent:function(e){for(var t,i=0;i<this.recognizers.length;i++){t=this.recognizers[i];for(var n=0;n<t.emits.length;n++)if(t.emits[n]===e)return t}return null},setTouchAction:function(e,t){a&&(e.style.touchAction=t),e[d]=t},fire:function(e,t,i){if(Polymer.Base.fire(t,i,{node:e,bubbles:!0,cancelable:!0}).defaultPrevented){var n=i.preventer||i.sourceEvent;n&&n.preventDefault&&n.preventDefault()}},prevent:function(e){var t=this.findRecognizerByEvent(e);t.info&&(t.info.prevent=!0)},resetMouseCanceller:function(){y.mouse.mouseIgnoreJob&&y.mouse.mouseIgnoreJob.complete()}};g.register({name:"downup",deps:["mousedown","touchstart","touchend"],flow:{start:["mousedown","touchstart"],end:["mouseup","touchend"]},emits:["down","up"],info:{movefn:null,upfn:null},reset:function(){o(this.info)},mousedown:function(e){if(n(e)){var t=g.findOriginalTarget(e),i=this;r(this.info,function(e){n(e)||(i.fire("up",t,e),o(i.info))},function(e){n(e)&&i.fire("up",t,e),o(i.info)}),this.fire("down",t,e)}},touchstart:function(e){this.fire("down",g.findOriginalTarget(e),e.changedTouches[0],e)},touchend:function(e){this.fire("up",g.findOriginalTarget(e),e.changedTouches[0],e)},fire:function(e,t,i,n){g.fire(t,e,{x:i.clientX,y:i.clientY,sourceEvent:i,preventer:n,prevent:function(e){return g.prevent(e)}})}}),g.register({name:"track",touchAction:"none",deps:["mousedown","touchstart","touchmove","touchend"],flow:{start:["mousedown","touchstart"],end:["mouseup","touchend"]},emits:["track"],info:{x:0,y:0,state:"start",started:!1,moves:[],addMove:function(e){this.moves.length>2&&this.moves.shift(),this.moves.push(e)},movefn:null,upfn:null,prevent:!1},reset:function(){this.info.state="start",this.info.started=!1,this.info.moves=[],this.info.x=0,this.info.y=0,this.info.prevent=!1,o(this.info)},hasMovedEnough:function(e,t){if(this.info.prevent)return!1;if(this.info.started)return!0;var i=Math.abs(this.info.x-e),n=Math.abs(this.info.y-t);return i>=5||n>=5},mousedown:function(e){if(n(e)){var t=g.findOriginalTarget(e),i=this,s=function(e){var r=e.clientX,s=e.clientY;i.hasMovedEnough(r,s)&&(i.info.state=i.info.started?"mouseup"===e.type?"end":"track":"start","start"===i.info.state&&g.prevent("tap"),i.info.addMove({x:r,y:s}),n(e)||(i.info.state="end",o(i.info)),i.fire(t,e),i.info.started=!0)};r(this.info,s,function(e){i.info.started&&s(e),o(i.info)}),this.info.x=e.clientX,this.info.y=e.clientY}},touchstart:function(e){var t=e.changedTouches[0];this.info.x=t.clientX,this.info.y=t.clientY},touchmove:function(e){var t=g.findOriginalTarget(e),i=e.changedTouches[0],n=i.clientX,r=i.clientY;this.hasMovedEnough(n,r)&&("start"===this.info.state&&g.prevent("tap"),this.info.addMove({x:n,y:r}),this.fire(t,i),this.info.state="track",this.info.started=!0)},touchend:function(e){var t=g.findOriginalTarget(e),i=e.changedTouches[0];this.info.started&&(this.info.state="end",this.info.addMove({x:i.clientX,y:i.clientY}),this.fire(t,i,e))},fire:function(e,t,i){var n,r=this.info.moves[this.info.moves.length-2],o=this.info.moves[this.info.moves.length-1],s=o.x-this.info.x,a=o.y-this.info.y,c=0;return r&&(n=o.x-r.x,c=o.y-r.y),g.fire(e,"track",{state:this.info.state,x:t.clientX,y:t.clientY,dx:s,dy:a,ddx:n,ddy:c,sourceEvent:t,preventer:i,hover:function(){return g.deepTargetFind(t.clientX,t.clientY)}})}}),g.register({name:"tap",deps:["mousedown","click","touchstart","touchend"],flow:{start:["mousedown","touchstart"],end:["click","touchend"]},emits:["tap"],info:{x:NaN,y:NaN,prevent:!1},reset:function(){this.info.x=NaN,this.info.y=NaN,this.info.prevent=!1},save:function(e){this.info.x=e.clientX,this.info.y=e.clientY},mousedown:function(e){n(e)&&this.save(e)},click:function(e){n(e)&&this.forward(e)},touchstart:function(e){this.save(e.changedTouches[0],e)},touchend:function(e){this.forward(e.changedTouches[0],e)},forward:function(e,t){var i=Math.abs(e.clientX-this.info.x),n=Math.abs(e.clientY-this.info.y),r=g.findOriginalTarget(e);(isNaN(i)||isNaN(n)||i<=25&&n<=25||function(e){if("click"===e.type){if(0===e.detail)return!0;var t=g.findOriginalTarget(e).getBoundingClientRect(),i=e.pageX,n=e.pageY;return!(i>=t.left&&i<=t.right&&n>=t.top&&n<=t.bottom)}return!1}(e))&&(this.info.prevent||g.fire(r,"tap",{x:e.clientX,y:e.clientY,sourceEvent:e,preventer:t}))}});var b={x:"pan-x",y:"pan-y",none:"none",all:"auto"};Polymer.Base._addFeature({_setupGestures:function(){this.__polymerGestures=null},_listen:function(e,t,i){g.gestures[t]?g.add(e,t,i):e.addEventListener(t,i)},_unlisten:function(e,t,i){g.gestures[t]?g.remove(e,t,i):e.removeEventListener(t,i)},setScrollDirection:function(e,t){t=t||this,g.setTouchAction(t,b[e]||"auto")}}),Polymer.Gestures=g}(),function(){"use strict";if(Polymer.Base._addFeature({$$:function(e){return Polymer.dom(this.root).querySelector(e)},toggleClass:function(e,t,i){i=i||this,1==arguments.length&&(t=!i.classList.contains(e)),t?Polymer.dom(i).classList.add(e):Polymer.dom(i).classList.remove(e)},toggleAttribute:function(e,t,i){i=i||this,1==arguments.length&&(t=!i.hasAttribute(e)),t?Polymer.dom(i).setAttribute(e,""):Polymer.dom(i).removeAttribute(e)},classFollows:function(e,t,i){i&&Polymer.dom(i).classList.remove(e),t&&Polymer.dom(t).classList.add(e)},attributeFollows:function(e,t,i){i&&Polymer.dom(i).removeAttribute(e),t&&Polymer.dom(t).setAttribute(e,"")},getEffectiveChildNodes:function(){return Polymer.dom(this).getEffectiveChildNodes()},getEffectiveChildren:function(){return Polymer.dom(this).getEffectiveChildNodes().filter(function(e){return e.nodeType===Node.ELEMENT_NODE})},getEffectiveTextContent:function(){for(var e,t=this.getEffectiveChildNodes(),i=[],n=0;e=t[n];n++)e.nodeType!==Node.COMMENT_NODE&&i.push(Polymer.dom(e).textContent);return i.join("")},queryEffectiveChildren:function(e){var t=Polymer.dom(this).queryDistributedElements(e);return t&&t[0]},queryAllEffectiveChildren:function(e){return Polymer.dom(this).queryDistributedElements(e)},getContentChildNodes:function(e){var t=Polymer.dom(this.root).querySelector(e||"content");return t?Polymer.dom(t).getDistributedNodes():[]},getContentChildren:function(e){return this.getContentChildNodes(e).filter(function(e){return e.nodeType===Node.ELEMENT_NODE})},fire:function(e,t,i){var n=(i=i||Polymer.nob).node||this;t=null===t||void 0===t?{}:t;var r=void 0===i.bubbles||i.bubbles,o=Boolean(i.cancelable),s=i._useCache,a=this._getEvent(e,r,o,s);return a.detail=t,s&&(this.__eventCache[e]=null),n.dispatchEvent(a),s&&(this.__eventCache[e]=a),a},__eventCache:{},_getEvent:function(e,t,i,n){var r=n&&this.__eventCache[e];return r&&r.bubbles==t&&r.cancelable==i||(r=new Event(e,{bubbles:Boolean(t),cancelable:i})),r},async:function(e,t){var i=this;return Polymer.Async.run(function(){e.call(i)},t)},cancelAsync:function(e){Polymer.Async.cancel(e)},arrayDelete:function(e,t){var i;if(Array.isArray(e)){if((i=e.indexOf(t))>=0)return e.splice(i,1)}else{if((i=this._get(e).indexOf(t))>=0)return this.splice(e,i,1)}},transform:function(e,t){(t=t||this).style.webkitTransform=e,t.style.transform=e},translate3d:function(e,t,i,n){n=n||this,this.transform("translate3d("+e+","+t+","+i+")",n)},importHref:function(e,t,i,n){var r=document.createElement("link");r.rel="import",r.href=e;var o=Polymer.Base.importHref.imported=Polymer.Base.importHref.imported||{},s=o[r.href],a=s||r,c=this,l=function(e){return e.target.__firedLoad=!0,e.target.removeEventListener("load",l),e.target.removeEventListener("error",d),t.call(c,e)},d=function(e){return e.target.__firedError=!0,e.target.removeEventListener("load",l),e.target.removeEventListener("error",d),i.call(c,e)};return t&&a.addEventListener("load",l),i&&a.addEventListener("error",d),s?(s.__firedLoad&&s.dispatchEvent(new Event("load")),s.__firedError&&s.dispatchEvent(new Event("error"))):(o[r.href]=r,(n=Boolean(n))&&r.setAttribute("async",""),document.head.appendChild(r)),a},create:function(e,t){var i=document.createElement(e);if(t)for(var n in t)i[n]=t[n];return i},isLightDescendant:function(e){return this!==e&&this.contains(e)&&Polymer.dom(this).getOwnerRoot()===Polymer.dom(e).getOwnerRoot()},isLocalDescendant:function(e){return this.root===Polymer.dom(e).getOwnerRoot()}}),!Polymer.Settings.useNativeCustomElements){var e=Polymer.Base.importHref;Polymer.Base.importHref=function(t,i,n,r){CustomElements.ready=!1;return e.call(this,t,function(e){if(CustomElements.upgradeDocumentTree(document),CustomElements.ready=!0,i)return i.call(this,e)},n,r)}}}(),Polymer.Bind={prepareModel:function(e){Polymer.Base.mixin(e,this._modelApi)},_modelApi:{_notifyChange:function(e,t,i){i=void 0===i?this[e]:i,t=t||Polymer.CaseMap.camelToDashCase(e)+"-changed",this.fire(t,{value:i},{bubbles:!1,cancelable:!1,_useCache:Polymer.Settings.eventDataCache||!Polymer.Settings.isIE})},_propertySetter:function(e,t,i,n){var r=this.__data__[e];return r===t||r!=r&&t!=t||(this.__data__[e]=t,"object"==typeof t&&this._clearPath(e),this._propertyChanged&&this._propertyChanged(e,t,r),i&&this._effectEffects(e,t,i,r,n)),r},__setProperty:function(e,t,i,n){var r=(n=n||this)._propertyEffects&&n._propertyEffects[e];r?n._propertySetter(e,t,r,i):n[e]!==t&&(n[e]=t)},_effectEffects:function(e,t,i,n,r){for(var o,s=0,a=i.length;s<a&&(o=i[s]);s++)o.fn.call(this,e,this[e],o.effect,n,r)},_clearPath:function(e){for(var t in this.__data__)Polymer.Path.isDescendant(e,t)&&(this.__data__[t]=void 0)}},ensurePropertyEffects:function(e,t){e._propertyEffects||(e._propertyEffects={});var i=e._propertyEffects[t];return i||(i=e._propertyEffects[t]=[]),i},addPropertyEffect:function(e,t,i,n){var r=this.ensurePropertyEffects(e,t),o={kind:i,effect:n,fn:Polymer.Bind["_"+i+"Effect"]};return r.push(o),o},createBindings:function(e){var t=e._propertyEffects;if(t)for(var i in t){var n=t[i];n.sort(this._sortPropertyEffects),this._createAccessors(e,i,n)}},_sortPropertyEffects:function(){var e={compute:0,annotation:1,annotatedComputation:2,reflect:3,notify:4,observer:5,complexObserver:6,function:7};return function(t,i){return e[t.kind]-e[i.kind]}}(),_createAccessors:function(e,t,i){var n={get:function(){return this.__data__[t]}},r=function(e){this._propertySetter(t,e,i)},o=e.getPropertyInfo&&e.getPropertyInfo(t);o&&o.readOnly?o.computed||(e["_set"+this.upper(t)]=r):n.set=r,Object.defineProperty(e,t,n)},upper:function(e){return e[0].toUpperCase()+e.substring(1)},_addAnnotatedListener:function(e,t,i,n,r,o){e._bindListeners||(e._bindListeners=[]);var s=this._notedListenerFactory(i,n,Polymer.Path.isDeep(n),o),a=r||Polymer.CaseMap.camelToDashCase(i)+"-changed";e._bindListeners.push({index:t,property:i,path:n,changedFn:s,event:a})},_isEventBogus:function(e,t){return e.path&&e.path[0]!==t},_notedListenerFactory:function(e,t,i,n){return function(r,o,s){if(s){var a=Polymer.Path.translate(e,t,s);this._notifyPath(a,o)}else o=r[e],n&&(o=!o),i?this.__data__[t]!=o&&this.set(t,o):this[t]=o}},prepareInstance:function(e){e.__data__=Object.create(null)},setupBindListeners:function(e){for(var t,i=e._bindListeners,n=0,r=i.length;n<r&&(t=i[n]);n++){var o=e._nodes[t.index];this._addNotifyListener(o,e,t.event,t.changedFn)}},_addNotifyListener:function(e,t,i,n){e.addEventListener(i,function(e){return t._notifyListener(n,e)})}},Polymer.Base.mixin(Polymer.Bind,{_shouldAddListener:function(e){return e.name&&"attribute"!=e.kind&&"text"!=e.kind&&!e.isCompound&&"{"===e.parts[0].mode},_annotationEffect:function(e,t,i){e!=i.value&&(t=this._get(i.value),this.__data__[i.value]=t),this._applyEffectValue(i,t)},_reflectEffect:function(e,t,i){this.reflectPropertyToAttribute(e,i.attribute,t)},_notifyEffect:function(e,t,i,n,r){r||this._notifyChange(e,i.event,t)},_functionEffect:function(e,t,i,n,r){i.call(this,e,t,n,r)},_observerEffect:function(e,t,i,n){var r=this[i.method];r?r.call(this,t,n):this._warn(this._logf("_observerEffect","observer method `"+i.method+"` not defined"))},_complexObserverEffect:function(e,t,i){var n=this[i.method];if(n){var r=Polymer.Bind._marshalArgs(this.__data__,i,e,t);r&&n.apply(this,r)}else i.dynamicFn||this._warn(this._logf("_complexObserverEffect","observer method `"+i.method+"` not defined"))},_computeEffect:function(e,t,i){var n=this[i.method];if(n){var r=Polymer.Bind._marshalArgs(this.__data__,i,e,t);if(r){var o=n.apply(this,r);this.__setProperty(i.name,o)}}else i.dynamicFn||this._warn(this._logf("_computeEffect","compute method `"+i.method+"` not defined"))},_annotatedComputationEffect:function(e,t,i){var n=this._rootDataHost||this,r=n[i.method];if(r){var o=Polymer.Bind._marshalArgs(this.__data__,i,e,t);if(o){var s=r.apply(n,o);this._applyEffectValue(i,s)}}else i.dynamicFn||n._warn(n._logf("_annotatedComputationEffect","compute method `"+i.method+"` not defined"))},_marshalArgs:function(e,t,i,n){for(var r=[],o=t.args,s=o.length>1||t.dynamicFn,a=0,c=o.length;a<c;a++){var l,d=o[a],h=d.name;if(d.literal?l=d.value:i===h?l=n:void 0===(l=e[h])&&d.structured&&(l=Polymer.Base._get(h,e)),s&&void 0===l)return;if(d.wildcard){var u=Polymer.Path.isAncestor(i,h);r[a]={path:u?i:h,value:u?n:l,base:l}}else r[a]=l}return r}}),Polymer.Base._addFeature({_addPropertyEffect:function(e,t,i){var n=Polymer.Bind.addPropertyEffect(this,e,t,i);n.pathFn=this["_"+n.kind+"PathEffect"]},_prepEffects:function(){Polymer.Bind.prepareModel(this),this._addAnnotationEffects(this._notes)},_prepBindings:function(){Polymer.Bind.createBindings(this)},_addPropertyEffects:function(e){if(e)for(var t in e){var i=e[t];if(i.observer&&this._addObserverEffect(t,i.observer),i.computed&&(i.readOnly=!0,this._addComputedEffect(t,i.computed)),i.notify&&this._addPropertyEffect(t,"notify",{event:Polymer.CaseMap.camelToDashCase(t)+"-changed"}),i.reflectToAttribute){var n=Polymer.CaseMap.camelToDashCase(t);"-"===n[0]?this._warn(this._logf("_addPropertyEffects","Property "+t+" cannot be reflected to attribute "+n+' because "-" is not a valid starting attribute name. Use a lowercase first letter for the property instead.')):this._addPropertyEffect(t,"reflect",{attribute:n})}i.readOnly&&Polymer.Bind.ensurePropertyEffects(this,t)}},_addComputedEffect:function(e,t){for(var i,n=this._parseMethod(t),r=n.dynamicFn,o=0;o<n.args.length&&(i=n.args[o]);o++)this._addPropertyEffect(i.model,"compute",{method:n.method,args:n.args,trigger:i,name:e,dynamicFn:r});r&&this._addPropertyEffect(n.method,"compute",{method:n.method,args:n.args,trigger:null,name:e,dynamicFn:r})},_addObserverEffect:function(e,t){this._addPropertyEffect(e,"observer",{method:t,property:e})},_addComplexObserverEffects:function(e){if(e)for(var t,i=0;i<e.length&&(t=e[i]);i++)this._addComplexObserverEffect(t)},_addComplexObserverEffect:function(e){var t=this._parseMethod(e);if(!t)throw new Error("Malformed observer expression '"+e+"'");for(var i,n=t.dynamicFn,r=0;r<t.args.length&&(i=t.args[r]);r++)this._addPropertyEffect(i.model,"complexObserver",{method:t.method,args:t.args,trigger:i,dynamicFn:n});n&&this._addPropertyEffect(t.method,"complexObserver",{method:t.method,args:t.args,trigger:null,dynamicFn:n})},_addAnnotationEffects:function(e){for(var t,i=0;i<e.length&&(t=e[i]);i++)for(var n,r=t.bindings,o=0;o<r.length&&(n=r[o]);o++)this._addAnnotationEffect(n,i)},_addAnnotationEffect:function(e,t){Polymer.Bind._shouldAddListener(e)&&Polymer.Bind._addAnnotatedListener(this,t,e.name,e.parts[0].value,e.parts[0].event,e.parts[0].negate);for(var i=0;i<e.parts.length;i++){var n=e.parts[i];n.signature?this._addAnnotatedComputationEffect(e,n,t):n.literal||("attribute"===e.kind&&"-"===e.name[0]?this._warn(this._logf("_addAnnotationEffect","Cannot set attribute "+e.name+' because "-" is not a valid attribute starting character')):this._addPropertyEffect(n.model,"annotation",{kind:e.kind,index:t,name:e.name,propertyName:e.propertyName,value:n.value,isCompound:e.isCompound,compoundIndex:n.compoundIndex,event:n.event,customEvent:n.customEvent,negate:n.negate}))}},_addAnnotatedComputationEffect:function(e,t,i){var n=t.signature;if(n.static)this.__addAnnotatedComputationEffect("__static__",i,e,t,null);else{for(var r,o=0;o<n.args.length&&(r=n.args[o]);o++)r.literal||this.__addAnnotatedComputationEffect(r.model,i,e,t,r);n.dynamicFn&&this.__addAnnotatedComputationEffect(n.method,i,e,t,null)}},__addAnnotatedComputationEffect:function(e,t,i,n,r){this._addPropertyEffect(e,"annotatedComputation",{index:t,isCompound:i.isCompound,compoundIndex:n.compoundIndex,kind:i.kind,name:i.name,negate:n.negate,method:n.signature.method,args:n.signature.args,trigger:r,dynamicFn:n.signature.dynamicFn})},_parseMethod:function(e){var t=e.match(/([^\s]+?)\(([\s\S]*)\)/);if(t){var i={method:t[1],static:!0};if(this.getPropertyInfo(i.method)!==Polymer.nob&&(i.static=!1,i.dynamicFn=!0),t[2].trim()){var n=t[2].replace(/\\,/g,"&comma;").split(",");return this._parseArgs(n,i)}return i.args=Polymer.nar,i}},_parseArgs:function(e,t){return t.args=e.map(function(e){var i=this._parseArg(e);return i.literal||(t.static=!1),i},this),t},_parseArg:function(e){var t=e.trim().replace(/&comma;/g,",").replace(/\\(.)/g,"$1"),i={name:t},n=t[0];switch("-"===n&&(n=t[1]),n>="0"&&n<="9"&&(n="#"),n){case"'":case'"':i.value=t.slice(1,-1),i.literal=!0;break;case"#":i.value=Number(t),i.literal=!0}return i.literal||(i.model=Polymer.Path.root(t),i.structured=Polymer.Path.isDeep(t),i.structured&&(i.wildcard=".*"==t.slice(-2),i.wildcard&&(i.name=t.slice(0,-2)))),i},_marshalInstanceEffects:function(){Polymer.Bind.prepareInstance(this),this._bindListeners&&Polymer.Bind.setupBindListeners(this)},_applyEffectValue:function(e,t){var i=this._nodes[e.index],n=e.name;if(t=this._computeFinalAnnotationValue(i,n,t,e),"attribute"==e.kind)this.serializeValueToAttribute(t,n,i);else{var r=i._propertyInfo&&i._propertyInfo[n];if(r&&r.readOnly)return;this.__setProperty(n,t,Polymer.Settings.suppressBindingNotifications,i)}},_computeFinalAnnotationValue:function(e,t,i,n){if(n.negate&&(i=!i),n.isCompound){var r=e.__compoundStorage__[t];r[n.compoundIndex]=i,i=r.join("")}return"attribute"!==n.kind&&("className"===t&&(i=this._scopeElementClass(e,i)),("textContent"===t||"input"==e.localName&&"value"==t)&&(i=void 0==i?"":i)),i},_executeStaticEffects:function(){this._propertyEffects&&this._propertyEffects.__static__&&this._effectEffects("__static__",null,this._propertyEffects.__static__)}}),function(){var e=Polymer.Settings.usePolyfillProto,t=Boolean(Object.getOwnPropertyDescriptor(document.documentElement,"properties"));Polymer.Base._addFeature({_setupConfigure:function(e){if(this._config={},this._handlers=[],this._aboveConfig=null,e)for(var t in e)void 0!==e[t]&&(this._config[t]=e[t])},_marshalAttributes:function(){this._takeAttributesToModel(this._config)},_attributeChangedImpl:function(e){var t=this._clientsReadied?this:this._config;this._setAttributeToProperty(t,e)},_configValue:function(e,t){var i=this._propertyInfo[e];i&&i.readOnly||(this._config[e]=t)},_beforeClientsReady:function(){this._configure()},_configure:function(){this._configureAnnotationReferences(),this._configureInstanceProperties(),this._aboveConfig=this.mixin({},this._config);for(var e={},i=0;i<this.behaviors.length;i++)this._configureProperties(this.behaviors[i].properties,e);this._configureProperties(t?this.__proto__.properties:this.properties,e),this.mixin(e,this._aboveConfig),this._config=e,this._clients&&this._clients.length&&this._distributeConfig(this._config)},_configureInstanceProperties:function(){for(var t in this._propertyEffects)!e&&this.hasOwnProperty(t)&&(this._configValue(t,this[t]),delete this[t])},_configureProperties:function(e,t){for(var i in e){var n=e[i];if(void 0!==n.value){var r=n.value;"function"==typeof r&&(r=r.call(this,this._config)),t[i]=r}}},_distributeConfig:function(e){var t=this._propertyEffects;if(t)for(var i in e){var n=t[i];if(n)for(var r,o=0,s=n.length;o<s&&(r=n[o]);o++)if("annotation"===r.kind){var a=this._nodes[r.effect.index],c=r.effect.propertyName,l="attribute"==r.effect.kind,d=a._propertyEffects&&a._propertyEffects[c];if(a._configValue&&(d||!l)){var h=i===r.effect.value?e[i]:this._get(r.effect.value,e);h=this._computeFinalAnnotationValue(a,c,h,r.effect),l&&(h=a.deserialize(this.serialize(h),a._propertyInfo[c].type)),a._configValue(c,h)}}}},_afterClientsReady:function(){this.importPath=this._importPath,this.rootPath=Polymer.rootPath,this._executeStaticEffects(),this._applyConfig(this._config,this._aboveConfig),this._flushHandlers()},_applyConfig:function(e,t){for(var i in e)void 0===this[i]&&this.__setProperty(i,e[i],i in t)},_notifyListener:function(e,t){if(!Polymer.Bind._isEventBogus(t,t.target)){var i,n;if(t.detail&&(i=t.detail.value,n=t.detail.path),this._clientsReadied)return e.call(this,t.target,i,n);this._queueHandler([e,t.target,i,n])}},_queueHandler:function(e){this._handlers.push(e)},_flushHandlers:function(){for(var e,t=this._handlers,i=0,n=t.length;i<n&&(e=t[i]);i++)e[0].call(this,e[1],e[2],e[3]);this._handlers=[]}})}(),function(){"use strict";var e=Polymer.Path;Polymer.Base._addFeature({notifyPath:function(e,t,i){var n={},r=this._get(e,this,n);1===arguments.length&&(t=r),n.path&&this._notifyPath(n.path,t,i)},_notifyPath:function(e,t,i){var n=this._propertySetter(e,t);if(n!==t&&(n==n||t==t))return this._pathEffector(e,t),i||this._notifyPathUp(e,t),!0},_getPathParts:function(e){if(Array.isArray(e)){for(var t=[],i=0;i<e.length;i++)for(var n=e[i].toString().split("."),r=0;r<n.length;r++)t.push(n[r]);return t}return e.toString().split(".")},set:function(e,t,i){var n,r=i||this,o=this._getPathParts(e),s=o[o.length-1];if(o.length>1){for(var a=0;a<o.length-1;a++){var c=o[a];if(n&&"#"==c[0]?r=Polymer.Collection.get(n).getItem(c):(r=r[c],n&&parseInt(c,10)==c&&(o[a]=Polymer.Collection.get(n).getKey(r))),!r)return;n=Array.isArray(r)?r:null}if(n){var l,d,h=Polymer.Collection.get(n);"#"==s[0]?(d=s,l=h.getItem(d),s=n.indexOf(l),h.setItem(d,t)):parseInt(s,10)==s&&(l=r[s],d=h.getKey(l),o[a]=d,h.setItem(d,t))}r[s]=t,i||this._notifyPath(o.join("."),t)}else r[e]=t},get:function(e,t){return this._get(e,t)},_get:function(e,t,i){for(var n,r=t||this,o=this._getPathParts(e),s=0;s<o.length;s++){if(!r)return;var a=o[s];n&&"#"==a[0]?r=Polymer.Collection.get(n).getItem(a):(r=r[a],i&&n&&parseInt(a,10)==a&&(o[s]=Polymer.Collection.get(n).getKey(r))),n=Array.isArray(r)?r:null}return i&&(i.path=o.join(".")),r},_pathEffector:function(t,i){var n=e.root(t),r=this._propertyEffects&&this._propertyEffects[n];if(r)for(var o,s=0;s<r.length&&(o=r[s]);s++){var a=o.pathFn;a&&a.call(this,t,i,o.effect)}this._boundPaths&&this._notifyBoundPaths(t,i)},_annotationPathEffect:function(t,i,n){if(e.matches(n.value,!1,t))Polymer.Bind._annotationEffect.call(this,t,i,n);else if(!n.negate&&e.isDescendant(n.value,t)){var r=this._nodes[n.index];if(r&&r._notifyPath){var o=e.translate(n.value,n.name,t);r._notifyPath(o,i,!0)}}},_complexObserverPathEffect:function(t,i,n){e.matches(n.trigger.name,n.trigger.wildcard,t)&&Polymer.Bind._complexObserverEffect.call(this,t,i,n)},_computePathEffect:function(t,i,n){e.matches(n.trigger.name,n.trigger.wildcard,t)&&Polymer.Bind._computeEffect.call(this,t,i,n)},_annotatedComputationPathEffect:function(t,i,n){e.matches(n.trigger.name,n.trigger.wildcard,t)&&Polymer.Bind._annotatedComputationEffect.call(this,t,i,n)},linkPaths:function(e,t){this._boundPaths=this._boundPaths||{},t?this._boundPaths[e]=t:this.unlinkPaths(e)},unlinkPaths:function(e){this._boundPaths&&delete this._boundPaths[e]},_notifyBoundPaths:function(t,i){for(var n in this._boundPaths){var r=this._boundPaths[n];e.isDescendant(n,t)?this._notifyPath(e.translate(n,r,t),i):e.isDescendant(r,t)&&this._notifyPath(e.translate(r,n,t),i)}},_notifyPathUp:function(t,i){var n=e.root(t),r=Polymer.CaseMap.camelToDashCase(n)+this._EVENT_CHANGED;this.fire(r,{path:t,value:i},{bubbles:!1,_useCache:Polymer.Settings.eventDataCache||!Polymer.Settings.isIE})},_EVENT_CHANGED:"-changed",notifySplices:function(e,t){var i={},n=this._get(e,this,i);this._notifySplices(n,i.path,t)},_notifySplices:function(e,t,i){var n={keySplices:Polymer.Collection.applySplices(e,i),indexSplices:i},r=t+".splices";this._notifyPath(r,n),this._notifyPath(t+".length",e.length),this.__data__[r]={keySplices:null,indexSplices:null}},_notifySplice:function(e,t,i,n,r){this._notifySplices(e,t,[{index:i,addedCount:n,removed:r,object:e,type:"splice"}])},push:function(e){var t={},i=this._get(e,this,t),n=Array.prototype.slice.call(arguments,1),r=i.length,o=i.push.apply(i,n);return n.length&&this._notifySplice(i,t.path,r,n.length,[]),o},pop:function(e){var t={},i=this._get(e,this,t),n=Boolean(i.length),r=Array.prototype.slice.call(arguments,1),o=i.pop.apply(i,r);return n&&this._notifySplice(i,t.path,i.length,0,[o]),o},splice:function(e,t){var i={},n=this._get(e,this,i);(t=t<0?n.length-Math.floor(-t):Math.floor(t))||(t=0);var r=Array.prototype.slice.call(arguments,1),o=n.splice.apply(n,r),s=Math.max(r.length-2,0);return(s||o.length)&&this._notifySplice(n,i.path,t,s,o),o},shift:function(e){var t={},i=this._get(e,this,t),n=Boolean(i.length),r=Array.prototype.slice.call(arguments,1),o=i.shift.apply(i,r);return n&&this._notifySplice(i,t.path,0,0,[o]),o},unshift:function(e){var t={},i=this._get(e,this,t),n=Array.prototype.slice.call(arguments,1),r=i.unshift.apply(i,n);return n.length&&this._notifySplice(i,t.path,0,n.length,[]),r},prepareModelNotifyPath:function(e){this.mixin(e,{fire:Polymer.Base.fire,_getEvent:Polymer.Base._getEvent,__eventCache:Polymer.Base.__eventCache,notifyPath:Polymer.Base.notifyPath,_get:Polymer.Base._get,_EVENT_CHANGED:Polymer.Base._EVENT_CHANGED,_notifyPath:Polymer.Base._notifyPath,_notifyPathUp:Polymer.Base._notifyPathUp,_pathEffector:Polymer.Base._pathEffector,_annotationPathEffect:Polymer.Base._annotationPathEffect,_complexObserverPathEffect:Polymer.Base._complexObserverPathEffect,_annotatedComputationPathEffect:Polymer.Base._annotatedComputationPathEffect,_computePathEffect:Polymer.Base._computePathEffect,_notifyBoundPaths:Polymer.Base._notifyBoundPaths,_getPathParts:Polymer.Base._getPathParts})}})}(),Polymer.Base._addFeature({resolveUrl:function(e){return Polymer.ResolveUrl.resolveUrl(e,this._importPath)}}),Polymer.CssParse={parse:function(e){return e=this._clean(e),this._parseCss(this._lex(e),e)},_clean:function(e){return e.replace(this._rx.comments,"").replace(this._rx.port,"")},_lex:function(e){for(var t={start:0,end:e.length},i=t,n=0,r=e.length;n<r;n++)switch(e[n]){case this.OPEN_BRACE:i.rules||(i.rules=[]);var o=i;i={start:n+1,parent:o,previous:o.rules[o.rules.length-1]},o.rules.push(i);break;case this.CLOSE_BRACE:i.end=n+1,i=i.parent||t}return t},_parseCss:function(e,t){var i=t.substring(e.start,e.end-1);if(e.parsedCssText=e.cssText=i.trim(),e.parent){var n=e.previous?e.previous.end:e.parent.start;i=t.substring(n,e.start-1),i=(i=(i=this._expandUnicodeEscapes(i)).replace(this._rx.multipleSpaces," ")).substring(i.lastIndexOf(";")+1);var r=e.parsedSelector=e.selector=i.trim();e.atRule=0===r.indexOf(this.AT_START),e.atRule?0===r.indexOf(this.MEDIA_START)?e.type=this.types.MEDIA_RULE:r.match(this._rx.keyframesRule)&&(e.type=this.types.KEYFRAMES_RULE,e.keyframesName=e.selector.split(this._rx.multipleSpaces).pop()):0===r.indexOf(this.VAR_START)?e.type=this.types.MIXIN_RULE:e.type=this.types.STYLE_RULE}var o=e.rules;if(o)for(var s,a=0,c=o.length;a<c&&(s=o[a]);a++)this._parseCss(s,t);return e},_expandUnicodeEscapes:function(e){return e.replace(/\\([0-9a-f]{1,6})\s/gi,function(){for(var e=arguments[1],t=6-e.length;t--;)e="0"+e;return"\\"+e})},stringify:function(e,t,i){i=i||"";var n="";if(e.cssText||e.rules){var r=e.rules;if(r&&!this._hasMixinRules(r))for(var o,s=0,a=r.length;s<a&&(o=r[s]);s++)n=this.stringify(o,t,n);else(n=(n=t?e.cssText:this.removeCustomProps(e.cssText)).trim())&&(n="  "+n+"\n")}return n&&(e.selector&&(i+=e.selector+" "+this.OPEN_BRACE+"\n"),i+=n,e.selector&&(i+=this.CLOSE_BRACE+"\n\n")),i},_hasMixinRules:function(e){return 0===e[0].selector.indexOf(this.VAR_START)},removeCustomProps:function(e){return e=this.removeCustomPropAssignment(e),this.removeCustomPropApply(e)},removeCustomPropAssignment:function(e){return e.replace(this._rx.customProp,"").replace(this._rx.mixinProp,"")},removeCustomPropApply:function(e){return e.replace(this._rx.mixinApply,"").replace(this._rx.varApply,"")},types:{STYLE_RULE:1,KEYFRAMES_RULE:7,MEDIA_RULE:4,MIXIN_RULE:1e3},OPEN_BRACE:"{",CLOSE_BRACE:"}",_rx:{comments:/\/\*[^*]*\*+([^/*][^*]*\*+)*\//gim,port:/@import[^;]*;/gim,customProp:/(?:^[^;\-\s}]+)?--[^;{}]*?:[^{};]*?(?:[;\n]|$)/gim,mixinProp:/(?:^[^;\-\s}]+)?--[^;{}]*?:[^{};]*?{[^}]*?}(?:[;\n]|$)?/gim,mixinApply:/@apply\s*\(?[^);]*\)?\s*(?:[;\n]|$)?/gim,varApply:/[^;:]*?:[^;]*?var\([^;]*\)(?:[;\n]|$)?/gim,keyframesRule:/^@[^\s]*keyframes/,multipleSpaces:/\s+/g},VAR_START:"--",MEDIA_START:"@media",AT_START:"@"},Polymer.StyleUtil=function(){var e=Polymer.Settings;return{NATIVE_VARIABLES:Polymer.Settings.useNativeCSSProperties,MODULE_STYLES_SELECTOR:"style, link[rel=import][type~=css], template",INCLUDE_ATTR:"include",toCssText:function(e,t){return"string"==typeof e&&(e=this.parser.parse(e)),t&&this.forEachRule(e,t),this.parser.stringify(e,this.NATIVE_VARIABLES)},forRulesInStyles:function(e,t,i){if(e)for(var n,r=0,o=e.length;r<o&&(n=e[r]);r++)this.forEachRuleInStyle(n,t,i)},forActiveRulesInStyles:function(e,t,i){if(e)for(var n,r=0,o=e.length;r<o&&(n=e[r]);r++)this.forEachRuleInStyle(n,t,i,!0)},rulesForStyle:function(e){return!e.__cssRules&&e.textContent&&(e.__cssRules=this.parser.parse(e.textContent)),e.__cssRules},isKeyframesSelector:function(e){return e.parent&&e.parent.type===this.ruleTypes.KEYFRAMES_RULE},forEachRuleInStyle:function(e,t,i,n){var r,o,s=this.rulesForStyle(e);t&&(r=function(i){t(i,e)}),i&&(o=function(t){i(t,e)}),this.forEachRule(s,r,o,n)},forEachRule:function(e,t,i,n){if(e){var r=!1;if(n&&e.type===this.ruleTypes.MEDIA_RULE){var o=e.selector.match(this.rx.MEDIA_MATCH);o&&(window.matchMedia(o[1]).matches||(r=!0))}e.type===this.ruleTypes.STYLE_RULE?t(e):i&&e.type===this.ruleTypes.KEYFRAMES_RULE?i(e):e.type===this.ruleTypes.MIXIN_RULE&&(r=!0);var s=e.rules;if(s&&!r)for(var a,c=0,l=s.length;c<l&&(a=s[c]);c++)this.forEachRule(a,t,i,n)}},applyCss:function(e,t,i,n){var r=this.createScopeStyle(e,t);return this.applyStyle(r,i,n)},applyStyle:function(e,t,i){t=t||document.head;var n=i&&i.nextSibling||t.firstChild;return this.__lastHeadApplyNode=e,t.insertBefore(e,n)},createScopeStyle:function(e,t){var i=document.createElement("style");return t&&i.setAttribute("scope",t),i.textContent=e,i},__lastHeadApplyNode:null,applyStylePlaceHolder:function(e){var t=document.createComment(" Shady DOM styles for "+e+" "),i=this.__lastHeadApplyNode?this.__lastHeadApplyNode.nextSibling:null,n=document.head;return n.insertBefore(t,i||n.firstChild),this.__lastHeadApplyNode=t,t},cssFromModules:function(e,t){for(var i=e.trim().split(" "),n="",r=0;r<i.length;r++)n+=this.cssFromModule(i[r],t);return n},cssFromModule:function(e,t){var i=Polymer.DomModule.import(e);return i&&!i._cssText&&(i._cssText=this.cssFromElement(i)),!i&&t&&console.warn("Could not find style data in module named",e),i&&i._cssText||""},cssFromElement:function(e){for(var t,i="",n=e.content||e,r=Polymer.TreeApi.arrayCopy(n.querySelectorAll(this.MODULE_STYLES_SELECTOR)),o=0;o<r.length;o++)if("template"===(t=r[o]).localName)t.hasAttribute("preserve-content")||(i+=this.cssFromElement(t));else if("style"===t.localName){var s=t.getAttribute(this.INCLUDE_ATTR);s&&(i+=this.cssFromModules(s,!0)),(t=t.__appliedElement||t).parentNode.removeChild(t),i+=this.resolveCss(t.textContent,e.ownerDocument)}else t.import&&t.import.body&&(i+=this.resolveCss(t.import.body.textContent,t.import));return i},styleIncludesToTemplate:function(e){for(var t,i=e.content.querySelectorAll("style[include]"),n=0;n<i.length;n++)(t=i[n]).parentNode.insertBefore(this._includesToFragment(t.getAttribute("include")),t)},_includesToFragment:function(e){for(var t=e.trim().split(" "),i=document.createDocumentFragment(),n=0;n<t.length;n++){var r=Polymer.DomModule.import(t[n],"template");r&&this._addStylesToFragment(i,r.content)}return i},_addStylesToFragment:function(e,t){for(var i,n=t.querySelectorAll("style"),r=0;r<n.length;r++){var o=(i=n[r]).getAttribute("include");o&&e.appendChild(this._includesToFragment(o)),i.textContent&&e.appendChild(i.cloneNode(!0))}},isTargetedBuild:function(t){return e.useNativeShadow?"shadow"===t:"shady"===t},cssBuildTypeForModule:function(e){var t=Polymer.DomModule.import(e);if(t)return this.getCssBuildType(t)},getCssBuildType:function(e){return e.getAttribute("css-build")},_findMatchingParen:function(e,t){for(var i=0,n=t,r=e.length;n<r;n++)switch(e[n]){case"(":i++;break;case")":if(0==--i)return n}return-1},processVariableAndFallback:function(e,t){var i=e.indexOf("var(");if(-1===i)return t(e,"","","");var n=this._findMatchingParen(e,i+3),r=e.substring(i+4,n),o=e.substring(0,i),s=this.processVariableAndFallback(e.substring(n+1),t),a=r.indexOf(",");if(-1===a)return t(o,r.trim(),"",s);return t(o,r.substring(0,a).trim(),r.substring(a+1).trim(),s)},rx:{VAR_ASSIGN:/(?:^|[;\s{]\s*)(--[\w-]*?)\s*:\s*(?:([^;{]*)|{([^}]*)})(?:(?=[;\s}])|$)/gi,MIXIN_MATCH:/(?:^|\W+)@apply\s*\(?([^);\n]*)\)?/gi,VAR_CONSUMED:/(--[\w-]+)\s*([:,;)]|$)/gi,ANIMATION_MATCH:/(animation\s*:)|(animation-name\s*:)/,MEDIA_MATCH:/@media[^(]*(\([^)]*\))/,IS_VAR:/^--/,BRACKETED:/\{[^}]*\}/g,HOST_PREFIX:"(?:^|[^.#[:])",HOST_SUFFIX:"($|[.:[\\s>+~])"},resolveCss:Polymer.ResolveUrl.resolveCss,parser:Polymer.CssParse,ruleTypes:Polymer.CssParse.types}}(),Polymer.StyleTransformer=function(){var e=Polymer.StyleUtil,t=Polymer.Settings,i={dom:function(e,t,i,n){this._transformDom(e,t||"",i,n)},_transformDom:function(e,t,i,n){e.setAttribute&&this.element(e,t,i,n);for(var r=Polymer.dom(e).childNodes,o=0;o<r.length;o++)this._transformDom(r[o],t,i,n)},element:function(e,t,i,r){if(i)r?e.removeAttribute(n):e.setAttribute(n,t);else if(t)if(e.classList)r?(e.classList.remove(n),e.classList.remove(t)):(e.classList.add(n),e.classList.add(t));else if(e.getAttribute){var o=e.getAttribute(g);r?o&&e.setAttribute(g,o.replace(n,"").replace(t,"")):e.setAttribute(g,(o?o+" ":"")+n+" "+t)}},elementStyles:function(i,n){var r,o=i._styles,s="",a=i.__cssBuild,c=t.useNativeShadow||"shady"===a;if(c){var d=this;r=function(e){e.selector=d._slottedToContent(e.selector),e.selector=e.selector.replace(l,":host > *"),e.selector=d._dirShadowTransform(e.selector),n&&n(e)}}for(var h,u=0,p=o.length;u<p&&(h=o[u]);u++){var f=e.rulesForStyle(h);s+=c?e.toCssText(f,r):this.css(f,i.is,i.extends,n,i._scopeCssViaAttr)+"\n\n"}return s.trim()},css:function(t,i,n,r,o){var s=this._calcHostScope(i,n);i=this._calcElementScope(i,o);var a=this;return e.toCssText(t,function(e){e.isScoped||(a.rule(e,i,s),e.isScoped=!0),r&&r(e,i,s)})},_calcElementScope:function(e,t){return e?t?_+e+v:m+e:""},_calcHostScope:function(e,t){return t?"[is="+e+"]":e},rule:function(e,t,i){this._transformRule(e,this._transformComplexSelector,t,i)},_transformRule:function(e,t,i,n){e.selector=e.transformedSelector=this._transformRuleCss(e,t,i,n)},_transformRuleCss:function(t,i,n,r){var s=t.selector.split(o);if(!e.isKeyframesSelector(t))for(var a,c=0,l=s.length;c<l&&(a=s[c]);c++)s[c]=i.call(this,a,n,r);return s.join(o)},_transformComplexSelector:function(e,t,i){var n=!1,r=!1,a=this;return e=e.trim(),e=this._slottedToContent(e),e=e.replace(l,":host > *"),e=e.replace(b,c+" $1"),e=e.replace(s,function(e,o,s){if(n)s=s.replace(f," ");else{var c=a._transformCompoundSelector(s,o,t,i);n=n||c.stop,r=r||c.hostContext,o=c.combinator,s=c.value}return o+s}),r&&(e=e.replace(u,function(e,t,n,r){return t+n+" "+i+r+o+" "+t+i+n+r})),e},_transformCompoundSelector:function(e,t,i,n){var r=e.search(f),o=!1;e.indexOf(h)>=0?o=!0:e.indexOf(c)>=0?e=this._transformHostSelector(e,n):0!==r&&(e=i?this._transformSimpleSelector(e,i):e),e.indexOf(p)>=0&&(t="");var s;return r>=0&&(e=e.replace(f," "),s=!0),e=e.replace(E,T),{value:e,combinator:t,stop:s,hostContext:o}},_transformSimpleSelector:function(e,t){var i=e.split(y);return i[0]+=t,i.join(y)},_transformHostSelector:function(e,t){var i=e.match(d),n=i&&i[2].trim()||"";if(n){if(n[0].match(a))return e.replace(d,function(e,i,n){return t+n});return n.split(a)[0]===t?n:C}return e.replace(c,t)},documentRule:function(e){e.selector=e.parsedSelector,this.normalizeRootSelector(e),t.useNativeShadow||this._transformRule(e,this._transformDocumentSelector)},normalizeRootSelector:function(e){e.selector=e.selector.replace(l,"html");var t=e.selector.split(o);t=t.filter(function(e){return!e.match(S)}),e.selector=t.join(o)},_transformDocumentSelector:function(e){return this._transformComplexSelector(e,r)},_slottedToContent:function(e){return e.replace(P,p+"> $1")},_dirShadowTransform:function(e){return e.split(",").map(function(e){return e=e.replace(R,x),e=e.replace(E,w)}).join(",")},SCOPE_NAME:"style-scope"},n=i.SCOPE_NAME,r=":not(["+n+"]):not(."+n+")",o=",",s=/(^|[\s>+~]+)((?:\[.+?\]|[^\s>+~=\[])+)/g,a=/[[.:#*]/,c=":host",l=":root",d=/(:host)(?:\(((?:\([^)(]*\)|[^)(]*)+?)\))/,h=":host-context",u=/(.*)(?::host-context)(?:\(((?:\([^)(]*\)|[^)(]*)+?)\))(.*)/,p="::content",f=/::content|::shadow|\/deep\//,m=".",_="["+n+"~=",v="]",y=":",g="class",b=new RegExp("^("+p+")"),C="should_not_match",P=/(?:::slotted)(?:\(((?:\([^)(]*\)|[^)(]*)+?)\))/g,S=/:host(?:\s*>\s*\*)?/,E=/(.*):dir\((ltr|rtl)\)/g,T='[dir="$2"] $1, $1[dir="$2"]',w=':host-context([dir="$2"]) $1',R=/:host\(:dir\((rtl|ltr)\)\)/g,x=':host-context([dir="$1"])';return i}(),Polymer.StyleExtends=function(){var e=Polymer.StyleUtil;return{hasExtends:function(e){return Boolean(e.match(this.rx.EXTEND))},transform:function(t){var i=e.rulesForStyle(t),n=this;return e.forEachRule(i,function(e){if(n._mapRuleOntoParent(e),e.parent)for(var t;t=n.rx.EXTEND.exec(e.cssText);){var i=t[1],r=n._findExtendor(i,e);r&&n._extendRule(e,r)}e.cssText=e.cssText.replace(n.rx.EXTEND,"")}),e.toCssText(i,function(e){e.selector.match(n.rx.STRIP)&&(e.cssText="")},!0)},_mapRuleOntoParent:function(e){if(e.parent){for(var t=e.parent.map||(e.parent.map={}),i=e.selector.split(","),n=0;n<i.length;n++)t[i[n].trim()]=e;return t}},_findExtendor:function(e,t){return t.parent&&t.parent.map&&t.parent.map[e]||this._findExtendor(e,t.parent)},_extendRule:function(e,t){e.parent!==t.parent&&this._cloneAndAddRuleToParent(t,e.parent),e.extends=e.extends||[],e.extends.push(t),t.selector=t.selector.replace(this.rx.STRIP,""),t.selector=(t.selector&&t.selector+",\n")+e.selector,t.extends&&t.extends.forEach(function(t){this._extendRule(e,t)},this)},_cloneAndAddRuleToParent:function(e,t){(e=Object.create(e)).parent=t,e.extends&&(e.extends=e.extends.slice()),t.rules.push(e)},rx:{EXTEND:/@extends\(([^)]*)\)\s*?;/gim,STRIP:/%[^,]*$/}}}(),Polymer.ApplyShim=function(){"use strict";function e(e,t){e=e.trim(),m[e]={properties:t,dependants:{}}}function t(e){return e=e.trim(),m[e]}function i(e,t){var i=p.exec(t);return i&&(t=i[1]?_._getInitialValueForProperty(e):"apply-shim-inherit"),t}function n(e){for(var t,n,r,o,s=e.split(";"),a={},c=0;c<s.length;c++)(r=s[c])&&(o=r.split(":")).length>1&&(n=i(t=o[0].trim(),o.slice(1).join(":")),a[t]=n);return a}function r(i,r,o,s){if(o&&c.processVariableAndFallback(o,function(e,i){i&&t(i)&&(s="@apply "+i+";")}),!s)return i;var l=a(s),d=i.slice(0,i.indexOf("--")),h=n(l),u=h,p=t(r),m=p&&p.properties;m?(u=Object.create(m),u=Polymer.Base.mixin(u,h)):e(r,u);var v,y,g=[],b=!1;for(v in u)void 0===(y=h[v])&&(y="initial"),!m||v in m||(b=!0),g.push(r+f+v+": "+y);return b&&function(e){var t=_.__currentElementProto,i=t&&t.is;for(var n in e.dependants)n!==i&&(e.dependants[n].__applyShimInvalid=!0)}(p),p&&(p.properties=u),o&&(d=i+";"+d),d+g.join("; ")+";"}function o(e,t,i){return"var("+t+",var("+i+"))"}function s(i,n){var r=[],o=t(i=i.replace(u,""));if(o||(e(i,{}),o=t(i)),o){var s=_.__currentElementProto;s&&(o.dependants[s.is]=s);var a,c,l;for(a in o.properties)l=n&&n[a],c=[a,": var(",i,f,a],l&&c.push(",",l),c.push(")"),r.push(c.join(""))}return r.join("; ")}function a(e){for(var t;t=l.exec(e);){var i=t[0],r=t[1],o=t.index,a=o+i.indexOf("@apply"),c=o+i.length,d=e.slice(0,a),h=e.slice(c),u=s(r,n(d));e=[d,u,h].join(""),l.lastIndex=o+u.length}return e}var c=Polymer.StyleUtil,l=c.rx.MIXIN_MATCH,d=c.rx.VAR_ASSIGN,h=/var\(\s*(--[^,]*),\s*(--[^)]*)\)/g,u=/;\s*/m,p=/^\s*(initial)|(inherit)\s*$/,f="_-_",m={},_={_measureElement:null,_map:m,_separator:f,transform:function(e,t){this.__currentElementProto=t,c.forRulesInStyles(e,this._boundFindDefinitions),c.forRulesInStyles(e,this._boundFindApplications),t&&(t.__applyShimInvalid=!1),this.__currentElementProto=null},_findDefinitions:function(e){var t=e.parsedCssText;t=(t=t.replace(h,o)).replace(d,r),e.cssText=t,":root"===e.selector&&(e.selector=":host > *")},_findApplications:function(e){e.cssText=a(e.cssText)},transformRule:function(e){this._findDefinitions(e),this._findApplications(e)},_getInitialValueForProperty:function(e){return this._measureElement||(this._measureElement=document.createElement("meta"),this._measureElement.style.all="initial",document.head.appendChild(this._measureElement)),window.getComputedStyle(this._measureElement).getPropertyValue(e)}};return _._boundTransformRule=_.transformRule.bind(_),_._boundFindDefinitions=_._findDefinitions.bind(_),_._boundFindApplications=_._findApplications.bind(_),_}(),function(){var e=Polymer.Base._prepElement,t=Polymer.Settings.useNativeShadow,i=Polymer.StyleUtil,n=Polymer.StyleTransformer,r=Polymer.StyleExtends,o=Polymer.ApplyShim,s=Polymer.Settings;Polymer.Base._addFeature({_prepElement:function(t){this._encapsulateStyle&&"shady"!==this.__cssBuild&&n.element(t,this.is,this._scopeCssViaAttr),e.call(this,t)},_prepStyles:function(){void 0===this._encapsulateStyle&&(this._encapsulateStyle=!t),t||(this._scopeStyle=i.applyStylePlaceHolder(this.is)),this.__cssBuild=i.cssBuildTypeForModule(this.is)},_prepShimStyles:function(){if(this._template){var e=i.isTargetedBuild(this.__cssBuild);if(s.useNativeCSSProperties&&"shadow"===this.__cssBuild&&e)return void(s.preserveStyleIncludes&&i.styleIncludesToTemplate(this._template));this._styles=this._styles||this._collectStyles(),s.useNativeCSSProperties&&!this.__cssBuild&&o.transform(this._styles,this);var r=s.useNativeCSSProperties&&e?this._styles.length&&this._styles[0].textContent.trim():n.elementStyles(this);this._prepStyleProperties(),!this._needsStyleProperties()&&r&&i.applyCss(r,this.is,t?this._template.content:null,this._scopeStyle)}else this._styles=[]},_collectStyles:function(){var e=[],t="",n=this.styleModules;if(n)for(var o,s=0,a=n.length;s<a&&(o=n[s]);s++)t+=i.cssFromModule(o);t+=i.cssFromModule(this.is);var c=this._template&&this._template.parentNode;if(!this._template||c&&c.id.toLowerCase()===this.is||(t+=i.cssFromElement(this._template)),t){var l=document.createElement("style");l.textContent=t,r.hasExtends(l.textContent)&&(t=r.transform(l)),e.push(l)}return e},_elementAdd:function(e){this._encapsulateStyle&&(e.__styleScoped?e.__styleScoped=!1:n.dom(e,this.is,this._scopeCssViaAttr))},_elementRemove:function(e){this._encapsulateStyle&&n.dom(e,this.is,this._scopeCssViaAttr,!0)},scopeSubtree:function(e,i){if(!t){var n=this,r=function(e){if(e.nodeType===Node.ELEMENT_NODE){var t=e.getAttribute("class");e.setAttribute("class",n._scopeElementClass(e,t));for(var i,r=e.querySelectorAll("*"),o=0;o<r.length&&(i=r[o]);o++)t=i.getAttribute("class"),i.setAttribute("class",n._scopeElementClass(i,t))}};if(r(e),i){var o=new MutationObserver(function(e){for(var t,i=0;i<e.length&&(t=e[i]);i++)if(t.addedNodes)for(var n=0;n<t.addedNodes.length;n++)r(t.addedNodes[n])});return o.observe(e,{childList:!0,subtree:!0}),o}}}})}(),Polymer.StyleProperties=function(){"use strict";var e=Polymer.DomApi.matchesSelector,t=Polymer.StyleUtil,i=Polymer.StyleTransformer,n=navigator.userAgent.match("Trident"),r=Polymer.Settings;return{decorateStyles:function(e,n){var r=this,o={},s=[],a=0,c=i._calcHostScope(n.is,n.extends);t.forRulesInStyles(e,function(e,i){r.decorateRule(e),e.index=a++,r.whenHostOrRootRule(n,e,i,function(i){if(e.parent.type===t.ruleTypes.MEDIA_RULE&&(n.__notStyleScopeCacheable=!0),i.isHost){var r=i.selector.split(" ").some(function(e){return 0===e.indexOf(c)&&e.length!==c.length});n.__notStyleScopeCacheable=n.__notStyleScopeCacheable||r}}),r.collectPropertiesInCssText(e.propertyInfo.cssText,o)},function(e){s.push(e)}),e._keyframes=s;var l=[];for(var d in o)l.push(d);return l},decorateRule:function(e){if(e.propertyInfo)return e.propertyInfo;var t={},i={};return this.collectProperties(e,i)&&(t.properties=i,e.rules=null),t.cssText=this.collectCssText(e),e.propertyInfo=t,t},collectProperties:function(e,t){var i=e.propertyInfo;if(!i){for(var n,r,o,s=this.rx.VAR_ASSIGN,a=e.parsedCssText;n=s.exec(a);)"inherit"!==(r=(n[2]||n[3]).trim())&&(t[n[1].trim()]=r),o=!0;return o}if(i.properties)return Polymer.Base.mixin(t,i.properties),!0},collectCssText:function(e){return this.collectConsumingCssText(e.parsedCssText)},collectConsumingCssText:function(e){return e.replace(this.rx.BRACKETED,"").replace(this.rx.VAR_ASSIGN,"")},collectPropertiesInCssText:function(e,t){for(var i;i=this.rx.VAR_CONSUMED.exec(e);){var n=i[1];":"!==i[2]&&(t[n]=!0)}},reify:function(e){for(var t,i=Object.getOwnPropertyNames(e),n=0;n<i.length;n++)e[t=i[n]]=this.valueForProperty(e[t],e)},valueForProperty:function(e,i){if(e)if(e.indexOf(";")>=0)e=this.valueForProperties(e,i);else{var n=this;e=t.processVariableAndFallback(e,function(e,t,r,o){var s=n.valueForProperty(i[t],i);return s&&"initial"!==s?"apply-shim-inherit"===s&&(s="inherit"):s=n.valueForProperty(i[r]||r,i)||r,e+(s||"")+o})}return e&&e.trim()||""},valueForProperties:function(e,t){for(var i,n,r=e.split(";"),o=0;o<r.length;o++)if(i=r[o]){if(this.rx.MIXIN_MATCH.lastIndex=0,n=this.rx.MIXIN_MATCH.exec(i))i=this.valueForProperty(t[n[1]],t);else{var s=i.indexOf(":");if(-1!==s){var a=i.substring(s);a=a.trim(),a=this.valueForProperty(a,t)||a,i=i.substring(0,s)+a}}r[o]=i&&i.lastIndexOf(";")===i.length-1?i.slice(0,-1):i||""}return r.join(";")},applyProperties:function(e,t){var i="";e.propertyInfo||this.decorateRule(e),e.propertyInfo.cssText&&(i=this.valueForProperties(e.propertyInfo.cssText,t)),e.cssText=i},applyKeyframeTransforms:function(e,t){var i=e.cssText,n=e.cssText;if(null==e.hasAnimations&&(e.hasAnimations=this.rx.ANIMATION_MATCH.test(i)),e.hasAnimations){if(null==e.keyframeNamesToTransform){e.keyframeNamesToTransform=[];for(var r in t)i!==(n=(0,t[r])(i))&&(i=n,e.keyframeNamesToTransform.push(r))}else{for(var o=0;o<e.keyframeNamesToTransform.length;++o)i=(0,t[e.keyframeNamesToTransform[o]])(i);n=i}}e.cssText=n},propertyDataFromStyles:function(i,n){var r={},o=this,s=[];return t.forActiveRulesInStyles(i,function(t){t.propertyInfo||o.decorateRule(t);var i=t.transformedSelector||t.parsedSelector;n&&t.propertyInfo.properties&&i&&e.call(n,i)&&(o.collectProperties(t,r),function(e,t){var i=parseInt(e/32),n=1<<e%32;t[i]=(t[i]||0)|n}(t.index,s))}),{properties:r,key:s}},_rootSelector:/:root|:host\s*>\s*\*/,_checkRoot:function(e,t){return Boolean(t.match(this._rootSelector))||"html"===e&&t.indexOf("html")>-1},whenHostOrRootRule:function(e,t,n,o){if(t.propertyInfo||self.decorateRule(t),t.propertyInfo.properties){var s=e.is?i._calcHostScope(e.is,e.extends):"html",a=t.parsedSelector,c=this._checkRoot(s,a),l=!c&&0===a.indexOf(":host");if("shady"===(e.__cssBuild||n.__cssBuild)&&(l=!(c=a===s+" > *."+s||a.indexOf("html")>-1)&&0===a.indexOf(s)),c||l){var d=s;l&&(r.useNativeShadow&&!t.transformedSelector&&(t.transformedSelector=i._transformRuleCss(t,i._transformComplexSelector,e.is,s)),d=t.transformedSelector||t.parsedSelector),c&&"html"===s&&(d=t.transformedSelector||t.parsedSelector),o({selector:d,isHost:l,isRoot:c})}}},hostAndRootPropertiesForScope:function(i){var n={},r={},o=this;return t.forActiveRulesInStyles(i._styles,function(t,s){o.whenHostOrRootRule(i,t,s,function(s){var a=i._element||i;e.call(a,s.selector)&&(s.isHost?o.collectProperties(t,n):o.collectProperties(t,r))})}),{rootProps:r,hostProps:n}},transformStyles:function(e,t,n){var o=this,s=i._calcHostScope(e.is,e.extends),a=e.extends?"\\"+s.slice(0,-1)+"\\]":s,c=new RegExp(this.rx.HOST_PREFIX+a+this.rx.HOST_SUFFIX),l=this._elementKeyframeTransforms(e,n);return i.elementStyles(e,function(i){o.applyProperties(i,t),r.useNativeShadow||Polymer.StyleUtil.isKeyframesSelector(i)||!i.cssText||(o.applyKeyframeTransforms(i,l),o._scopeSelector(i,c,s,e._scopeCssViaAttr,n))})},_elementKeyframeTransforms:function(e,t){var i=e._styles._keyframes,n={};if(!r.useNativeShadow&&i)for(var o=0,s=i[o];o<i.length;s=i[++o])this._scopeKeyframes(s,t),n[s.keyframesName]=this._keyframesRuleTransformer(s);return n},_keyframesRuleTransformer:function(e){return function(t){return t.replace(e.keyframesNameRx,e.transformedKeyframesName)}},_scopeKeyframes:function(e,t){e.keyframesNameRx=new RegExp(e.keyframesName,"g"),e.transformedKeyframesName=e.keyframesName+"-"+t,e.transformedSelector=e.transformedSelector||e.selector,e.selector=e.transformedSelector.replace(e.keyframesName,e.transformedKeyframesName)},_scopeSelector:function(e,t,n,r,o){e.transformedSelector=e.transformedSelector||e.selector;for(var s,a=e.transformedSelector,c=r?"["+i.SCOPE_NAME+"~="+o+"]":"."+o,l=a.split(","),d=0,h=l.length;d<h&&(s=l[d]);d++)l[d]=s.match(t)?s.replace(n,c):c+" "+s;e.selector=l.join(",")},applyElementScopeSelector:function(e,t,n,r){var o=r?e.getAttribute(i.SCOPE_NAME):e.getAttribute("class")||"",s=n?o.replace(n,t):(o?o+" ":"")+this.XSCOPE_NAME+" "+t;o!==s&&(r?e.setAttribute(i.SCOPE_NAME,s):e.setAttribute("class",s))},applyElementStyle:function(e,i,o,s){var a=s?s.textContent||"":this.transformStyles(e,i,o),c=e._customStyle;return c&&!r.useNativeShadow&&c!==s&&(c._useCount--,c._useCount<=0&&c.parentNode&&c.parentNode.removeChild(c)),r.useNativeShadow?e._customStyle?(e._customStyle.textContent=a,s=e._customStyle):a&&(s=t.applyCss(a,o,e.root,e._scopeStyle)):s?s.parentNode||(n&&a.indexOf("@media")>-1&&(s.textContent=a),t.applyStyle(s,null,e._scopeStyle)):a&&(s=t.applyCss(a,o,null,e._scopeStyle)),s&&(s._useCount=s._useCount||0,e._customStyle!=s&&s._useCount++,e._customStyle=s),s},mixinCustomStyle:function(e,t){var i;for(var n in t)((i=t[n])||0===i)&&(e[n]=i)},updateNativeStyleProperties:function(e,t){var i=e.__customStyleProperties;if(i)for(var n=0;n<i.length;n++)e.style.removeProperty(i[n]);var r=[];for(var o in t)null!==t[o]&&(e.style.setProperty(o,t[o]),r.push(o));e.__customStyleProperties=r},rx:t.rx,XSCOPE_NAME:"x-scope"}}(),Polymer.StyleCache=function(){this.cache={}},Polymer.StyleCache.prototype={MAX:100,store:function(e,t,i,n){t.keyValues=i,t.styles=n;var r=this.cache[e]=this.cache[e]||[];r.push(t),r.length>this.MAX&&r.shift()},retrieve:function(e,t,i){var n=this.cache[e];if(n)for(var r,o=n.length-1;o>=0;o--)if(r=n[o],i===r.styles&&this._objectsEqual(t,r.keyValues))return r},clear:function(){this.cache={}},_objectsEqual:function(e,t){var i,n;for(var r in e)if(i=e[r],n=t[r],!("object"==typeof i&&i?this._objectsStrictlyEqual(i,n):i===n))return!1;return!Array.isArray(e)||e.length===t.length},_objectsStrictlyEqual:function(e,t){return this._objectsEqual(e,t)&&this._objectsEqual(t,e)}},Polymer.StyleDefaults=function(){var e=Polymer.StyleProperties,t=Polymer.StyleCache,i=Polymer.Settings.useNativeCSSProperties;return{_styles:[],_properties:null,customStyle:{},_styleCache:new t,_element:Polymer.DomApi.wrap(document.documentElement),addStyle:function(e){this._styles.push(e),this._properties=null},get _styleProperties(){return this._properties||(e.decorateStyles(this._styles,this),this._styles._scopeStyleProperties=null,this._properties=e.hostAndRootPropertiesForScope(this).rootProps,e.mixinCustomStyle(this._properties,this.customStyle),e.reify(this._properties)),this._properties},hasStyleProperties:function(){return Boolean(this._properties)},_needsStyleProperties:function(){},_computeStyleProperties:function(){return this._styleProperties},updateStyles:function(t){this._properties=null,t&&Polymer.Base.mixin(this.customStyle,t),this._styleCache.clear();for(var n,r=0;r<this._styles.length;r++)(n=(n=this._styles[r]).__importElement||n)._apply();i&&e.updateNativeStyleProperties(document.documentElement,this.customStyle)}}}(),function(){"use strict";var e=Polymer.Base.serializeValueToAttribute,t=Polymer.StyleProperties,i=Polymer.StyleTransformer,n=Polymer.StyleDefaults,r=Polymer.Settings.useNativeShadow,o=Polymer.Settings.useNativeCSSProperties;Polymer.Base._addFeature({_prepStyleProperties:function(){o||(this._ownStylePropertyNames=this._styles&&this._styles.length?t.decorateStyles(this._styles,this):null)},customStyle:null,getComputedStyleValue:function(e){return o||this._styleProperties||this._computeStyleProperties(),!o&&this._styleProperties&&this._styleProperties[e]||getComputedStyle(this).getPropertyValue(e)},_setupStyleProperties:function(){this.customStyle={},this._styleCache=null,this._styleProperties=null,this._scopeSelector=null,this._ownStyleProperties=null,this._customStyle=null},_needsStyleProperties:function(){return Boolean(!o&&this._ownStylePropertyNames&&this._ownStylePropertyNames.length)},_validateApplyShim:function(){if(this.__applyShimInvalid){Polymer.ApplyShim.transform(this._styles,this.__proto__);var e=i.elementStyles(this);if(r){var t=this._template.content.querySelector("style");t&&(t.textContent=e)}else{var n=this._scopeStyle&&this._scopeStyle.nextSibling;n&&(n.textContent=e)}}},_beforeAttached:function(){this._scopeSelector&&!this.__stylePropertiesInvalid||!this._needsStyleProperties()||(this.__stylePropertiesInvalid=!1,this._updateStyleProperties())},_findStyleHost:function(){for(var e,t=this;e=Polymer.dom(t).getOwnerRoot();){if(Polymer.isInstance(e.host))return e.host;t=e.host}return n},_updateStyleProperties:function(){var e,i=this._findStyleHost();i._styleProperties||i._computeStyleProperties(),i._styleCache||(i._styleCache=new Polymer.StyleCache);var n=t.propertyDataFromStyles(i._styles,this),o=!this.__notStyleScopeCacheable;o&&(n.key.customStyle=this.customStyle,e=i._styleCache.retrieve(this.is,n.key,this._styles));var a=Boolean(e);a?this._styleProperties=e._styleProperties:this._computeStyleProperties(n.properties),this._computeOwnStyleProperties(),a||(e=s.retrieve(this.is,this._ownStyleProperties,this._styles));var c=Boolean(e)&&!a,l=this._applyStyleProperties(e);a||(e={style:l=l&&r?l.cloneNode(!0):l,_scopeSelector:this._scopeSelector,_styleProperties:this._styleProperties},o&&(n.key.customStyle={},this.mixin(n.key.customStyle,this.customStyle),i._styleCache.store(this.is,e,n.key,this._styles)),c||s.store(this.is,Object.create(e),this._ownStyleProperties,this._styles))},_computeStyleProperties:function(e){var i=this._findStyleHost();i._styleProperties||i._computeStyleProperties();var n=Object.create(i._styleProperties),r=t.hostAndRootPropertiesForScope(this);this.mixin(n,r.hostProps),e=e||t.propertyDataFromStyles(i._styles,this).properties,this.mixin(n,e),this.mixin(n,r.rootProps),t.mixinCustomStyle(n,this.customStyle),t.reify(n),this._styleProperties=n},_computeOwnStyleProperties:function(){for(var e,t={},i=0;i<this._ownStylePropertyNames.length;i++)t[e=this._ownStylePropertyNames[i]]=this._styleProperties[e];this._ownStyleProperties=t},_scopeCount:0,_applyStyleProperties:function(e){var i=this._scopeSelector;this._scopeSelector=e?e._scopeSelector:this.is+"-"+this.__proto__._scopeCount++;var n=t.applyElementStyle(this,this._styleProperties,this._scopeSelector,e&&e.style);return r||t.applyElementScopeSelector(this,this._scopeSelector,i,this._scopeCssViaAttr),n},serializeValueToAttribute:function(t,i,n){if(n=n||this,"class"===i&&!r){var o=n===this?this.domHost||this.dataHost:this;o&&(t=o._scopeElementClass(n,t))}n=this.shadyRoot&&this.shadyRoot._hasDistributed?Polymer.dom(n):n,e.call(this,t,i,n)},_scopeElementClass:function(e,t){return r||this._scopeCssViaAttr||(t=(t?t+" ":"")+a+" "+this.is+(e._scopeSelector?" "+c+" "+e._scopeSelector:"")),t},updateStyles:function(e){e&&this.mixin(this.customStyle,e),o?t.updateNativeStyleProperties(this,this.customStyle):(this.isAttached?this._needsStyleProperties()?this._updateStyleProperties():this._styleProperties=null:this.__stylePropertiesInvalid=!0,this._styleCache&&this._styleCache.clear(),this._updateRootStyles())},_updateRootStyles:function(e){e=e||this.root;for(var t,i=Polymer.dom(e)._query(function(e){return e.shadyRoot||e.shadowRoot}),n=0,r=i.length;n<r&&(t=i[n]);n++)t.updateStyles&&t.updateStyles()}}),Polymer.updateStyles=function(e){n.updateStyles(e),Polymer.Base._updateRootStyles(document)};var s=new Polymer.StyleCache;Polymer.customStyleCache=s;var a=i.SCOPE_NAME,c=t.XSCOPE_NAME}(),Polymer.Base._addFeature({_registerFeatures:function(){this._prepIs(),this.factoryImpl&&this._prepConstructor(),this._prepStyles()},_finishRegisterFeatures:function(){this._prepTemplate(),this._prepShimStyles(),this._prepAnnotations(),this._prepEffects(),this._prepBehaviors(),this._prepPropertyInfo(),this._prepBindings(),this._prepShady()},_prepBehavior:function(e){this._addPropertyEffects(e.properties),this._addComplexObserverEffects(e.observers),this._addHostAttributes(e.hostAttributes)},_initFeatures:function(){this._setupGestures(),this._setupConfigure(this.__data__),this._setupStyleProperties(),this._setupDebouncers(),this._setupShady(),this._registerHost(),this._template&&(this._validateApplyShim(),this._poolContent(),this._beginHosting(),this._stampTemplate(),this._endHosting(),this._marshalAnnotationReferences()),this._marshalInstanceEffects(),this._marshalBehaviors(),this._marshalHostAttributes(),this._marshalAttributes(),this._tryReady()},_marshalBehavior:function(e){e.listeners&&this._listenListeners(e.listeners)}}),function(){var e,t=Polymer.StyleProperties,i=Polymer.StyleUtil,n=Polymer.CssParse,r=Polymer.StyleDefaults,o=Polymer.StyleTransformer,s=Polymer.ApplyShim,a=Polymer.Debounce,c=Polymer.Settings;Polymer({is:"custom-style",extends:"style",_template:null,properties:{include:String},ready:function(){this.__appliedElement=this.__appliedElement||this,this.__cssBuild=i.getCssBuildType(this),this.__appliedElement!==this&&(this.__appliedElement.__cssBuild=this.__cssBuild),this.ownerDocument!==window.document&&this.__appliedElement===this&&document.head.appendChild(this),this._tryApply()},attached:function(){this._tryApply()},_tryApply:function(){if(!this._appliesToDocument&&this.parentNode&&"dom-module"!==this.parentNode.localName){this._appliesToDocument=!0;var e=this.__appliedElement;if(c.useNativeCSSProperties||(this.__needsUpdateStyles=r.hasStyleProperties(),r.addStyle(e)),e.textContent||this.include)this._apply(!0);else{var t=this,i=new MutationObserver(function(){i.disconnect(),t._apply(!0)});i.observe(e,{childList:!0})}}},_updateStyles:function(){Polymer.updateStyles()},_apply:function(e){var t=this.__appliedElement;if(this.include&&(t.textContent=i.cssFromModules(this.include,!0)+t.textContent),t.textContent){var n=this.__cssBuild,r=i.isTargetedBuild(n);if(!c.useNativeCSSProperties||!r){var a=i.rulesForStyle(t);if(r||(i.forEachRule(a,function(e){o.documentRule(e)}),c.useNativeCSSProperties&&!n&&s.transform([t])),c.useNativeCSSProperties)t.textContent=i.toCssText(a);else{var l=this,d=function(){l._flushCustomProperties()};e?Polymer.RenderStatus.whenReady(d):d()}}}},_flushCustomProperties:function(){this.__needsUpdateStyles?(this.__needsUpdateStyles=!1,e=a(e,this._updateStyles)):this._applyCustomProperties()},_applyCustomProperties:function(){var e=this.__appliedElement;this._computeStyleProperties();var r=this._styleProperties,o=i.rulesForStyle(e);o&&(e.textContent=i.toCssText(o,function(e){var i=e.cssText=e.parsedCssText;e.propertyInfo&&e.propertyInfo.cssText&&(i=n.removeCustomPropAssignment(i),e.cssText=t.valueForProperties(i,r))}))}})}(),Polymer.Templatizer={properties:{__hideTemplateChildren__:{observer:"_showHideChildren"}},_instanceProps:Polymer.nob,_parentPropPrefix:"_parent_",templatize:function(e){if(this._templatized=e,e._content||(e._content=e.content),e._content._ctor)return this.ctor=e._content._ctor,void this._prepParentProperties(this.ctor.prototype,e);var t=Object.create(Polymer.Base);this._customPrepAnnotations(t,e),this._prepParentProperties(t,e),t._prepEffects(),this._customPrepEffects(t),t._prepBehaviors(),t._prepPropertyInfo(),t._prepBindings(),t._notifyPathUp=this._notifyPathUpImpl,t._scopeElementClass=this._scopeElementClassImpl,t.listen=this._listenImpl,t._showHideChildren=this._showHideChildrenImpl,t.__setPropertyOrig=this.__setProperty,t.__setProperty=this.__setPropertyImpl;var i=this._constructorImpl,n=function(e,t){i.call(this,e,t)};n.prototype=t,t.constructor=n,e._content._ctor=n,this.ctor=n},_getRootDataHost:function(){return this.dataHost&&this.dataHost._rootDataHost||this.dataHost},_showHideChildrenImpl:function(e){for(var t=this._children,i=0;i<t.length;i++){var n=t[i];Boolean(e)!=Boolean(n.__hideTemplateChildren__)&&(n.nodeType===Node.TEXT_NODE?e?(n.__polymerTextContent__=n.textContent,n.textContent=""):n.textContent=n.__polymerTextContent__:n.style&&(e?(n.__polymerDisplay__=n.style.display,n.style.display="none"):n.style.display=n.__polymerDisplay__)),n.__hideTemplateChildren__=e}},__setPropertyImpl:function(e,t,i,n){n&&n.__hideTemplateChildren__&&"textContent"==e&&(e="__polymerTextContent__"),this.__setPropertyOrig(e,t,i,n)},_debounceTemplate:function(e){Polymer.dom.addDebouncer(this.debounce("_debounceTemplate",e))},_flushTemplates:function(){Polymer.dom.flush()},_customPrepEffects:function(e){var t=e._parentProps;for(var i in t)e._addPropertyEffect(i,"function",this._createHostPropEffector(i));for(i in this._instanceProps)e._addPropertyEffect(i,"function",this._createInstancePropEffector(i))},_customPrepAnnotations:function(e,t){e._template=t;var i=t._content;if(!i._notes){var n=e._rootDataHost;n&&(Polymer.Annotations.prepElement=function(){n._prepElement()}),i._notes=Polymer.Annotations.parseAnnotations(t),Polymer.Annotations.prepElement=null,this._processAnnotations(i._notes)}e._notes=i._notes,e._parentProps=i._parentProps},_prepParentProperties:function(e,t){var i=this._parentProps=e._parentProps;if(this._forwardParentProp&&i){var n,r=e._parentPropProto;if(!r){for(n in this._instanceProps)delete i[n];r=e._parentPropProto=Object.create(null),t!=this&&(Polymer.Bind.prepareModel(r),Polymer.Base.prepareModelNotifyPath(r));for(n in i){var o=this._parentPropPrefix+n,s=[{kind:"function",effect:this._createForwardPropEffector(n),fn:Polymer.Bind._functionEffect},{kind:"notify",fn:Polymer.Bind._notifyEffect,effect:{event:Polymer.CaseMap.camelToDashCase(o)+"-changed"}}];r._propertyEffects=r._propertyEffects||{},r._propertyEffects[o]=s,Polymer.Bind._createAccessors(r,o,s)}}var a=this;t!=this&&(Polymer.Bind.prepareInstance(t),t._forwardParentProp=function(e,t){a._forwardParentProp(e,t)}),this._extendTemplate(t,r),t._pathEffector=function(e,t,i){return a._pathEffectorImpl(e,t,i)}}},_createForwardPropEffector:function(e){return function(t,i){this._forwardParentProp(e,i)}},_createHostPropEffector:function(e){var t=this._parentPropPrefix;return function(i,n){this.dataHost._templatized[t+e]=n}},_createInstancePropEffector:function(e){return function(t,i,n,r){r||this.dataHost._forwardInstanceProp(this,e,i)}},_extendTemplate:function(e,t){var i=Object.getOwnPropertyNames(t);t._propertySetter&&(e._propertySetter=t._propertySetter);for(var n,r=0;r<i.length&&(n=i[r]);r++){var o=e[n];if(o&&"_propertyEffects"==n){var s=Polymer.Base.mixin({},o);e._propertyEffects=Polymer.Base.mixin(s,t._propertyEffects)}else{var a=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(e,n,a),void 0!==o&&e._propertySetter(n,o)}}},_showHideChildren:function(e){},_forwardInstancePath:function(e,t,i){},_forwardInstanceProp:function(e,t,i){},_notifyPathUpImpl:function(e,t){var i=this.dataHost,n=Polymer.Path.root(e);i._forwardInstancePath.call(i,this,e,t),n in i._parentProps&&i._templatized._notifyPath(i._parentPropPrefix+e,t)},_pathEffectorImpl:function(e,t,i){if(this._forwardParentPath&&0===e.indexOf(this._parentPropPrefix)){var n=e.substring(this._parentPropPrefix.length);Polymer.Path.root(n)in this._parentProps&&this._forwardParentPath(n,t)}Polymer.Base._pathEffector.call(this._templatized,e,t,i)},_constructorImpl:function(e,t){this._rootDataHost=t._getRootDataHost(),this._setupConfigure(e),this._registerHost(t),this._beginHosting(),this.root=this.instanceTemplate(this._template),this.root.__noContent=!this._notes._hasContent,this.root.__styleScoped=!0,this._endHosting(),this._marshalAnnotatedNodes(),this._marshalInstanceEffects(),this._marshalAnnotatedListeners();for(var i=[],n=this.root.firstChild;n;n=n.nextSibling)i.push(n),n._templateInstance=this;this._children=i,t.__hideTemplateChildren__&&this._showHideChildren(!0),this._tryReady()},_listenImpl:function(e,t,i){var n=this,r=this._rootDataHost,o=r._createEventHandler(e,t,i);r._listen(e,t,function(e){e.model=n,o(e)})},_scopeElementClassImpl:function(e,t){var i=this._rootDataHost;return i?i._scopeElementClass(e,t):t},stamp:function(e){if(e=e||{},this._parentProps){var t=this._templatized;for(var i in this._parentProps)void 0===e[i]&&(e[i]=t[this._parentPropPrefix+i])}return new this.ctor(e,this)},modelForElement:function(e){for(var t;e;)if(t=e._templateInstance){if(t.dataHost==this)return t;e=t.dataHost}else e=e.parentNode}},Polymer({is:"dom-template",extends:"template",_template:null,behaviors:[Polymer.Templatizer],ready:function(){this.templatize(this)}}),Polymer._collections=new WeakMap,Polymer.Collection=function(e){Polymer._collections.set(e,this),this.userArray=e,this.store=e.slice(),this.initMap()},Polymer.Collection.prototype={constructor:Polymer.Collection,initMap:function(){for(var e=this.omap=new WeakMap,t=this.pmap={},i=this.store,n=0;n<i.length;n++){var r=i[n];r&&"object"==typeof r?e.set(r,n):t[r]=n}},add:function(e){var t=this.store.push(e)-1;return e&&"object"==typeof e?this.omap.set(e,t):this.pmap[e]=t,"#"+t},removeKey:function(e){(e=this._parseKey(e))&&(this._removeFromMap(this.store[e]),delete this.store[e])},_removeFromMap:function(e){e&&"object"==typeof e?this.omap.delete(e):delete this.pmap[e]},remove:function(e){var t=this.getKey(e);return this.removeKey(t),t},getKey:function(e){var t;if(void 0!=(t=e&&"object"==typeof e?this.omap.get(e):this.pmap[e]))return"#"+t},getKeys:function(){return Object.keys(this.store).map(function(e){return"#"+e})},_parseKey:function(e){if(e&&"#"==e[0])return e.slice(1)},setItem:function(e,t){if(e=this._parseKey(e)){var i=this.store[e];i&&this._removeFromMap(i),t&&"object"==typeof t?this.omap.set(t,e):this.pmap[t]=e,this.store[e]=t}},getItem:function(e){if(e=this._parseKey(e))return this.store[e]},getItems:function(){var e=[],t=this.store;for(var i in t)e.push(t[i]);return e},_applySplices:function(e){for(var t,i,n={},r=0;r<e.length&&(i=e[r]);r++){i.addedKeys=[];for(var o=0;o<i.removed.length;o++)n[t=this.getKey(i.removed[o])]=n[t]?null:-1;for(o=0;o<i.addedCount;o++){var s=this.userArray[i.index+o];n[t=void 0===(t=this.getKey(s))?this.add(s):t]=n[t]?null:1,i.addedKeys.push(t)}}var a=[],c=[];for(t in n)n[t]<0&&(this.removeKey(t),a.push(t)),n[t]>0&&c.push(t);return[{removed:a,added:c}]}},Polymer.Collection.get=function(e){return Polymer._collections.get(e)||new Polymer.Collection(e)},Polymer.Collection.applySplices=function(e,t){var i=Polymer._collections.get(e);return i?i._applySplices(t):null},Polymer({is:"dom-repeat",extends:"template",_template:null,properties:{items:{type:Array},as:{type:String,value:"item"},indexAs:{type:String,value:"index"},sort:{type:Function,observer:"_sortChanged"},filter:{type:Function,observer:"_filterChanged"},observe:{type:String,observer:"_observeChanged"},delay:Number,renderedItemCount:{type:Number,notify:!Polymer.Settings.suppressTemplateNotifications,readOnly:!0},initialCount:{type:Number,observer:"_initializeChunking"},targetFramerate:{type:Number,value:20},notifyDomChange:{type:Boolean},_targetFrameTime:{type:Number,computed:"_computeFrameTime(targetFramerate)"}},behaviors:[Polymer.Templatizer],observers:["_itemsChanged(items.*)"],created:function(){this._instances=[],this._pool=[],this._limit=1/0;var e=this;this._boundRenderChunk=function(){e._renderChunk()}},detached:function(){this.__isDetached=!0;for(var e=0;e<this._instances.length;e++)this._detachInstance(e)},attached:function(){if(this.__isDetached){this.__isDetached=!1;var e,t=Polymer.dom(this).parentNode;t.localName==this.is?(e=t,t=Polymer.dom(t).parentNode):e=this;for(var i=Polymer.dom(t),n=0;n<this._instances.length;n++)this._attachInstance(n,i,e)}},ready:function(){this._instanceProps={__key__:!0},this._instanceProps[this.as]=!0,this._instanceProps[this.indexAs]=!0,this.ctor||this.templatize(this)},_sortChanged:function(e){var t=this._getRootDataHost();this._sortFn=e&&("function"==typeof e?e:function(){return t[e].apply(t,arguments)}),this._needFullRefresh=!0,this.items&&this._debounceTemplate(this._render)},_filterChanged:function(e){var t=this._getRootDataHost();this._filterFn=e&&("function"==typeof e?e:function(){return t[e].apply(t,arguments)}),this._needFullRefresh=!0,this.items&&this._debounceTemplate(this._render)},_computeFrameTime:function(e){return Math.ceil(1e3/e)},_initializeChunking:function(){this.initialCount&&(this._limit=this.initialCount,this._chunkCount=this.initialCount,this._lastChunkTime=performance.now())},_tryRenderChunk:function(){this.items&&this._limit<this.items.length&&this.debounce("renderChunk",this._requestRenderChunk)},_requestRenderChunk:function(){requestAnimationFrame(this._boundRenderChunk)},_renderChunk:function(){var e=performance.now(),t=this._targetFrameTime/(e-this._lastChunkTime);this._chunkCount=Math.round(this._chunkCount*t)||1,this._limit+=this._chunkCount,this._lastChunkTime=e,this._debounceTemplate(this._render)},_observeChanged:function(){this._observePaths=this.observe&&this.observe.replace(".*",".").split(" ")},_itemsChanged:function(e){if("items"==e.path)Array.isArray(this.items)?this.collection=Polymer.Collection.get(this.items):this.items?this._error(this._logf("dom-repeat","expected array for `items`, found",this.items)):this.collection=null,this._keySplices=[],this._indexSplices=[],this._needFullRefresh=!0,this._initializeChunking(),this._debounceTemplate(this._render);else if("items.splices"==e.path)this._keySplices=this._keySplices.concat(e.value.keySplices),this._indexSplices=this._indexSplices.concat(e.value.indexSplices),this._debounceTemplate(this._render);else{var t=e.path.slice(6);this._forwardItemPath(t,e.value),this._checkObservedPaths(t)}},_checkObservedPaths:function(e){if(this._observePaths){e=e.substring(e.indexOf(".")+1);for(var t=this._observePaths,i=0;i<t.length;i++)if(0===e.indexOf(t[i]))return this._needFullRefresh=!0,void(this.delay?this.debounce("render",this._render,this.delay):this._debounceTemplate(this._render))}},render:function(){this._needFullRefresh=!0,this._debounceTemplate(this._render),this._flushTemplates()},_render:function(){this._needFullRefresh?(this._applyFullRefresh(),this._needFullRefresh=!1):this._keySplices.length&&(this._sortFn?this._applySplicesUserSort(this._keySplices):this._filterFn?this._applyFullRefresh():this._applySplicesArrayOrder(this._indexSplices)),this._keySplices=[],this._indexSplices=[];for(var e=this._keyToInstIdx={},t=this._instances.length-1;t>=0;t--){var i=this._instances[t];i.isPlaceholder&&t<this._limit?i=this._insertInstance(t,i.__key__):!i.isPlaceholder&&t>=this._limit&&(i=this._downgradeInstance(t,i.__key__)),e[i.__key__]=t,i.isPlaceholder||i.__setProperty(this.indexAs,t,!0)}this._pool.length=0,this._setRenderedItemCount(this._instances.length),Polymer.Settings.suppressTemplateNotifications&&!this.notifyDomChange||this.fire("dom-change"),this._tryRenderChunk()},_applyFullRefresh:function(){var e,t=this.collection;if(this._sortFn)e=t?t.getKeys():[];else{e=[];var i=this.items;if(i)for(var n=0;n<i.length;n++)e.push(t.getKey(i[n]))}var r=this;for(this._filterFn&&(e=e.filter(function(e){return r._filterFn(t.getItem(e))})),this._sortFn&&e.sort(function(e,i){return r._sortFn(t.getItem(e),t.getItem(i))}),n=0;n<e.length;n++){var o=e[n],s=this._instances[n];s?(s.__key__=o,!s.isPlaceholder&&n<this._limit&&s.__setProperty(this.as,t.getItem(o),!0)):n<this._limit?this._insertInstance(n,o):this._insertPlaceholder(n,o)}for(var a=this._instances.length-1;a>=n;a--)this._detachAndRemoveInstance(a)},_numericSort:function(e,t){return e-t},_applySplicesUserSort:function(e){for(var t,i,n=this.collection,r={},o=0;o<e.length&&(i=e[o]);o++){for(var s=0;s<i.removed.length;s++)r[t=i.removed[s]]=r[t]?null:-1;for(s=0;s<i.added.length;s++)r[t=i.added[s]]=r[t]?null:1}var a=[],c=[];for(t in r)-1===r[t]&&a.push(this._keyToInstIdx[t]),1===r[t]&&c.push(t);if(a.length)for(a.sort(this._numericSort),o=a.length-1;o>=0;o--){var l=a[o];void 0!==l&&this._detachAndRemoveInstance(l)}var d=this;if(c.length){this._filterFn&&(c=c.filter(function(e){return d._filterFn(n.getItem(e))})),c.sort(function(e,t){return d._sortFn(n.getItem(e),n.getItem(t))});var h=0;for(o=0;o<c.length;o++)h=this._insertRowUserSort(h,c[o])}},_insertRowUserSort:function(e,t){for(var i=this.collection,n=i.getItem(t),r=this._instances.length-1,o=-1;e<=r;){var s=e+r>>1,a=this._instances[s].__key__,c=this._sortFn(i.getItem(a),n);if(c<0)e=s+1;else{if(!(c>0)){o=s;break}r=s-1}}return o<0&&(o=r+1),this._insertPlaceholder(o,t),o},_applySplicesArrayOrder:function(e){for(var t,i=0;i<e.length&&(t=e[i]);i++){for(var n=0;n<t.removed.length;n++)this._detachAndRemoveInstance(t.index);for(n=0;n<t.addedKeys.length;n++)this._insertPlaceholder(t.index+n,t.addedKeys[n])}},_detachInstance:function(e){var t=this._instances[e];if(!t.isPlaceholder){for(var i=0;i<t._children.length;i++){var n=t._children[i];Polymer.dom(t.root).appendChild(n)}return t}},_attachInstance:function(e,t,i){var n=this._instances[e];n.isPlaceholder||t.insertBefore(n.root,i)},_detachAndRemoveInstance:function(e){var t=this._detachInstance(e);t&&this._pool.push(t),this._instances.splice(e,1)},_insertPlaceholder:function(e,t){this._instances.splice(e,0,{isPlaceholder:!0,__key__:t})},_stampInstance:function(e,t){var i={__key__:t};return i[this.as]=this.collection.getItem(t),i[this.indexAs]=e,this.stamp(i)},_insertInstance:function(e,t){var i=this._pool.pop();i?(i.__setProperty(this.as,this.collection.getItem(t),!0),i.__setProperty("__key__",t,!0)):i=this._stampInstance(e,t);var n=this._instances[e+1],r=n&&!n.isPlaceholder?n._children[0]:this,o=Polymer.dom(this).parentNode;return o.localName==this.is&&(r==this&&(r=o),o=Polymer.dom(o).parentNode),Polymer.dom(o).insertBefore(i.root,r),this._instances[e]=i,i},_downgradeInstance:function(e,t){var i=this._detachInstance(e);return i&&this._pool.push(i),i={isPlaceholder:!0,__key__:t},this._instances[e]=i,i},_showHideChildren:function(e){for(var t=0;t<this._instances.length;t++)this._instances[t].isPlaceholder||this._instances[t]._showHideChildren(e)},_forwardInstanceProp:function(e,t,i){if(t==this.as){var n;n=this._sortFn||this._filterFn?this.items.indexOf(this.collection.getItem(e.__key__)):e[this.indexAs],this.set("items."+n,i)}},_forwardInstancePath:function(e,t,i){0===t.indexOf(this.as+".")&&this._notifyPath("items."+e.__key__+"."+t.slice(this.as.length+1),i)},_forwardParentProp:function(e,t){for(var i,n=this._instances,r=0;r<n.length&&(i=n[r]);r++)i.isPlaceholder||i.__setProperty(e,t,!0)},_forwardParentPath:function(e,t){for(var i,n=this._instances,r=0;r<n.length&&(i=n[r]);r++)i.isPlaceholder||i._notifyPath(e,t,!0)},_forwardItemPath:function(e,t){if(this._keyToInstIdx){var i=e.indexOf("."),n=e.substring(0,i<0?e.length:i),r=this._keyToInstIdx[n],o=this._instances[r];o&&!o.isPlaceholder&&(i>=0?(e=this.as+"."+e.substring(i+1),o._notifyPath(e,t,!0)):o.__setProperty(this.as,t,!0))}},itemForElement:function(e){var t=this.modelForElement(e);return t&&t[this.as]},keyForElement:function(e){var t=this.modelForElement(e);return t&&t.__key__},indexForElement:function(e){var t=this.modelForElement(e);return t&&t[this.indexAs]}}),Polymer({is:"array-selector",_template:null,properties:{items:{type:Array,observer:"clearSelection"},multi:{type:Boolean,value:!1,observer:"clearSelection"},selected:{type:Object,notify:!0},selectedItem:{type:Object,notify:!0},toggle:{type:Boolean,value:!1}},clearSelection:function(){if(Array.isArray(this.selected))for(var e=0;e<this.selected.length;e++)this.unlinkPaths("selected."+e);else this.unlinkPaths("selected"),this.unlinkPaths("selectedItem");this.multi?this.selected&&!this.selected.length||(this.selected=[],this._selectedColl=Polymer.Collection.get(this.selected)):(this.selected=null,this._selectedColl=null),this.selectedItem=null},isSelected:function(e){return this.multi?void 0!==this._selectedColl.getKey(e):this.selected==e},deselect:function(e){if(this.multi){if(this.isSelected(e)){var t=this._selectedColl.getKey(e);this.arrayDelete("selected",e),this.unlinkPaths("selected."+t)}}else this.selected=null,this.selectedItem=null,this.unlinkPaths("selected"),this.unlinkPaths("selectedItem")},select:function(e){var t=Polymer.Collection.get(this.items).getKey(e);if(this.multi)if(this.isSelected(e))this.toggle&&this.deselect(e);else{this.push("selected",e);var i=this._selectedColl.getKey(e);this.linkPaths("selected."+i,"items."+t)}else this.toggle&&e==this.selected?this.deselect():(this.selected=e,this.selectedItem=e,this.linkPaths("selected","items."+t),this.linkPaths("selectedItem","items."+t))}}),Polymer({is:"dom-if",extends:"template",_template:null,properties:{if:{type:Boolean,value:!1,observer:"_queueRender"},restamp:{type:Boolean,value:!1,observer:"_queueRender"},notifyDomChange:{type:Boolean}},behaviors:[Polymer.Templatizer],_queueRender:function(){this._debounceTemplate(this._render)},detached:function(){var e=this.parentNode;e&&e.localName==this.is&&(e=Polymer.dom(e).parentNode),e&&(e.nodeType!=Node.DOCUMENT_FRAGMENT_NODE||Polymer.Settings.hasShadow&&e instanceof ShadowRoot)||this._teardownInstance()},attached:function(){this.if&&this.ctor&&this.async(this._ensureInstance)},render:function(){this._flushTemplates()},_render:function(){this.if?(this.ctor||this.templatize(this),this._ensureInstance(),this._showHideChildren()):this.restamp&&this._teardownInstance(),!this.restamp&&this._instance&&this._showHideChildren(),this.if!=this._lastIf&&(Polymer.Settings.suppressTemplateNotifications&&!this.notifyDomChange||this.fire("dom-change"),this._lastIf=this.if)},_ensureInstance:function(){var e,t=Polymer.dom(this).parentNode;if(t&&t.localName==this.is?(e=t,t=Polymer.dom(t).parentNode):e=this,t)if(this._instance){var i=this._instance._children;if(i&&i.length){if(Polymer.dom(e).previousSibling!==i[i.length-1])for(var n,r=0;r<i.length&&(n=i[r]);r++)Polymer.dom(t).insertBefore(n,e)}}else{this._instance=this.stamp();var o=this._instance.root;Polymer.dom(t).insertBefore(o,e)}},_teardownInstance:function(){if(this._instance){var e=this._instance._children;if(e&&e.length)for(var t,i=Polymer.dom(Polymer.dom(e[0]).parentNode),n=0;n<e.length&&(t=e[n]);n++)i.removeChild(t);this._instance=null}},_showHideChildren:function(){var e=this.__hideTemplateChildren__||!this.if;this._instance&&this._instance._showHideChildren(e)},_forwardParentProp:function(e,t){this._instance&&this._instance.__setProperty(e,t,!0)},_forwardParentPath:function(e,t){this._instance&&this._instance._notifyPath(e,t,!0)}}),Polymer({is:"dom-bind",properties:{notifyDomChange:{type:Boolean}},extends:"template",_template:null,created:function(){var e=this;Polymer.RenderStatus.whenReady(function(){"loading"==document.readyState?document.addEventListener("DOMContentLoaded",function(){e._markImportsReady()}):e._markImportsReady()})},_ensureReady:function(){this._readied||this._readySelf()},_markImportsReady:function(){this._importsReady=!0,this._ensureReady()},_registerFeatures:function(){this._prepConstructor()},_insertChildren:function(){var e,t=Polymer.dom(this).parentNode;t.localName==this.is?(e=t,t=Polymer.dom(t).parentNode):e=this,Polymer.dom(t).insertBefore(this.root,e)},_removeChildren:function(){if(this._children)for(var e=0;e<this._children.length;e++)this.root.appendChild(this._children[e])},_initFeatures:function(){},_scopeElementClass:function(e,t){return this.dataHost?this.dataHost._scopeElementClass(e,t):t},_configureInstanceProperties:function(){},_prepConfigure:function(){var e={};for(var t in this._propertyEffects)e[t]=this[t];var i=this._setupConfigure;this._setupConfigure=function(){i.call(this,e)}},attached:function(){this._importsReady&&this.render()},detached:function(){this._removeChildren()},render:function(){this._ensureReady(),this._children||(this._template=this,this._prepAnnotations(),this._prepEffects(),this._prepBehaviors(),this._prepConfigure(),this._prepBindings(),this._prepPropertyInfo(),Polymer.Base._initFeatures.call(this),this._children=Polymer.TreeApi.arrayCopyChildNodes(this.root)),this._insertChildren(),Polymer.Settings.suppressTemplateNotifications&&!this.notifyDomChange||this.fire("dom-change")}}),Polymer({is:"paper-toolbar",hostAttributes:{role:"toolbar"},properties:{bottomJustify:{type:String,value:""},justify:{type:String,value:""},middleJustify:{type:String,value:""}},attached:function(){this._observer=this._observe(this),this._updateAriaLabelledBy()},detached:function(){this._observer&&this._observer.disconnect()},_observe:function(e){var t=new MutationObserver(function(){this._updateAriaLabelledBy()}.bind(this));return t.observe(e,{childList:!0,subtree:!0}),t},_updateAriaLabelledBy:function(){for(var e,t=[],i=Polymer.dom(this.root).querySelectorAll("content"),n=0;e=i[n];n++)for(var r,o=Polymer.dom(e).getDistributedNodes(),s=0;r=o[s];s++)if(r.classList&&r.classList.contains("title"))if(r.id)t.push(r.id);else{var a="paper-toolbar-label-"+Math.floor(1e4*Math.random());r.id=a,t.push(a)}t.length>0&&this.setAttribute("aria-labelledby",t.join(" "))},_computeBarExtraClasses:function(e){return e?e+("justified"===e?"":"-justified"):""}}),function(){var e={},t={},i=null;Polymer.IronMeta=Polymer({is:"iron-meta",properties:{type:{type:String,value:"default",observer:"_typeChanged"},key:{type:String,observer:"_keyChanged"},value:{type:Object,notify:!0,observer:"_valueChanged"},self:{type:Boolean,observer:"_selfChanged"},list:{type:Array,notify:!0}},hostAttributes:{hidden:!0},factoryImpl:function(e){if(e)for(var t in e)switch(t){case"type":case"key":case"value":this[t]=e[t]}},created:function(){this._metaDatas=e,this._metaArrays=t},_keyChanged:function(e,t){this._resetRegistration(t)},_valueChanged:function(e){this._resetRegistration(this.key)},_selfChanged:function(e){e&&(this.value=this)},_typeChanged:function(i){this._unregisterKey(this.key),e[i]||(e[i]={}),this._metaData=e[i],t[i]||(t[i]=[]),this.list=t[i],this._registerKeyValue(this.key,this.value)},byKey:function(e){return this._metaData&&this._metaData[e]},_resetRegistration:function(e){this._unregisterKey(e),this._registerKeyValue(this.key,this.value)},_unregisterKey:function(e){this._unregister(e,this._metaData,this.list)},_registerKeyValue:function(e,t){this._register(e,t,this._metaData,this.list)},_register:function(e,t,i,n){e&&i&&void 0!==t&&(i[e]=t,n.push(t))},_unregister:function(e,t,i){if(e&&t&&e in t){var n=t[e];delete t[e],this.arrayDelete(i,n)}}}),Polymer.IronMeta.getIronMeta=function(){return null===i&&(i=new Polymer.IronMeta),i},Polymer.IronMetaQuery=Polymer({is:"iron-meta-query",properties:{type:{type:String,value:"default",observer:"_typeChanged"},key:{type:String,observer:"_keyChanged"},value:{type:Object,notify:!0,readOnly:!0},list:{type:Array,notify:!0}},factoryImpl:function(e){if(e)for(var t in e)switch(t){case"type":case"key":this[t]=e[t]}},created:function(){this._metaDatas=e,this._metaArrays=t},_keyChanged:function(e){this._setValue(this._metaData&&this._metaData[e])},_typeChanged:function(i){this._metaData=e[i],this.list=t[i],this.key&&this._keyChanged(this.key)},byKey:function(e){return this._metaData&&this._metaData[e]}})}(),Polymer.NeonAnimatableBehavior={properties:{animationConfig:{type:Object},entryAnimation:{observer:"_entryAnimationChanged",type:String},exitAnimation:{observer:"_exitAnimationChanged",type:String}},_entryAnimationChanged:function(){this.animationConfig=this.animationConfig||{},this.animationConfig.entry=[{name:this.entryAnimation,node:this}]},_exitAnimationChanged:function(){this.animationConfig=this.animationConfig||{},this.animationConfig.exit=[{name:this.exitAnimation,node:this}]},_copyProperties:function(e,t){for(var i in t)e[i]=t[i]},_cloneConfig:function(e){var t={isClone:!0};return this._copyProperties(t,e),t},_getAnimationConfigRecursive:function(e,t,i){if(this.animationConfig)if(this.animationConfig.value&&"function"==typeof this.animationConfig.value)this._warn(this._logf("playAnimation","Please put 'animationConfig' inside of your components 'properties' object instead of outside of it."));else{var n;if(n=e?this.animationConfig[e]:this.animationConfig,Array.isArray(n)||(n=[n]),n)for(var r,o=0;r=n[o];o++)if(r.animatable)r.animatable._getAnimationConfigRecursive(r.type||e,t,i);else if(r.id){var s=t[r.id];s?(s.isClone||(t[r.id]=this._cloneConfig(s),s=t[r.id]),this._copyProperties(s,r)):t[r.id]=r}else i.push(r)}},getAnimationConfig:function(e){var t={},i=[];this._getAnimationConfigRecursive(e,t,i);for(var n in t)i.push(t[n]);return i}},Polymer.NeonAnimationRunnerBehaviorImpl={_configureAnimations:function(e){var t=[];if(e.length>0)for(var i,n=0;i=e[n];n++){var r=document.createElement(i.name);if(r.isNeonAnimation){var o=null;try{"function"!=typeof(o=r.configure(i)).cancel&&(o=document.timeline.play(o))}catch(e){o=null,console.warn("Couldnt play","(",i.name,").",e)}o&&t.push({neonAnimation:r,config:i,animation:o})}else console.warn(this.is+":",i.name,"not found!")}return t},_shouldComplete:function(e){for(var t=!0,i=0;i<e.length;i++)if("finished"!=e[i].animation.playState){t=!1;break}return t},_complete:function(e){for(t=0;t<e.length;t++)e[t].neonAnimation.complete(e[t].config);for(var t=0;t<e.length;t++)e[t].animation.cancel()},playAnimation:function(e,t){var i=this.getAnimationConfig(e);if(i){this._active=this._active||{},this._active[e]&&(this._complete(this._active[e]),delete this._active[e]);var n=this._configureAnimations(i);if(0!=n.length){this._active[e]=n;for(var r=0;r<n.length;r++)n[r].animation.onfinish=function(){this._shouldComplete(n)&&(this._complete(n),delete this._active[e],this.fire("neon-animation-finish",t,{bubbles:!1}))}.bind(this)}else this.fire("neon-animation-finish",t,{bubbles:!1})}},cancelAnimation:function(){for(var e in this._animations)this._animations[e].cancel();this._animations={}}},Polymer.NeonAnimationRunnerBehavior=[Polymer.NeonAnimatableBehavior,Polymer.NeonAnimationRunnerBehaviorImpl],Polymer.IronFitBehavior={properties:{sizingTarget:{type:Object,value:function(){return this}},fitInto:{type:Object,value:window},noOverlap:{type:Boolean},positionTarget:{type:Element},horizontalAlign:{type:String},verticalAlign:{type:String},dynamicAlign:{type:Boolean},horizontalOffset:{type:Number,value:0,notify:!0},verticalOffset:{type:Number,value:0,notify:!0},autoFitOnAttach:{type:Boolean,value:!1},_fitInfo:{type:Object}},get _fitWidth(){return this.fitInto===window?this.fitInto.innerWidth:this.fitInto.getBoundingClientRect().width},get _fitHeight(){return this.fitInto===window?this.fitInto.innerHeight:this.fitInto.getBoundingClientRect().height},get _fitLeft(){return this.fitInto===window?0:this.fitInto.getBoundingClientRect().left},get _fitTop(){return this.fitInto===window?0:this.fitInto.getBoundingClientRect().top},get _defaultPositionTarget(){var e=Polymer.dom(this).parentNode;return e&&e.nodeType===Node.DOCUMENT_FRAGMENT_NODE&&(e=e.host),e},get _localeHorizontalAlign(){if(this._isRTL){if("right"===this.horizontalAlign)return"left";if("left"===this.horizontalAlign)return"right"}return this.horizontalAlign},attached:function(){void 0===this._isRTL&&(this._isRTL="rtl"==window.getComputedStyle(this).direction),this.positionTarget=this.positionTarget||this._defaultPositionTarget,this.autoFitOnAttach&&("none"===window.getComputedStyle(this).display?setTimeout(function(){this.fit()}.bind(this)):this.fit())},fit:function(){this.position(),this.constrain(),this.center()},_discoverInfo:function(){if(!this._fitInfo){var e=window.getComputedStyle(this),t=window.getComputedStyle(this.sizingTarget);this._fitInfo={inlineStyle:{top:this.style.top||"",left:this.style.left||"",position:this.style.position||""},sizerInlineStyle:{maxWidth:this.sizingTarget.style.maxWidth||"",maxHeight:this.sizingTarget.style.maxHeight||"",boxSizing:this.sizingTarget.style.boxSizing||""},positionedBy:{vertically:"auto"!==e.top?"top":"auto"!==e.bottom?"bottom":null,horizontally:"auto"!==e.left?"left":"auto"!==e.right?"right":null},sizedBy:{height:"none"!==t.maxHeight,width:"none"!==t.maxWidth,minWidth:parseInt(t.minWidth,10)||0,minHeight:parseInt(t.minHeight,10)||0},margin:{top:parseInt(e.marginTop,10)||0,right:parseInt(e.marginRight,10)||0,bottom:parseInt(e.marginBottom,10)||0,left:parseInt(e.marginLeft,10)||0}}}},resetFit:function(){var e=this._fitInfo||{};for(var t in e.sizerInlineStyle)this.sizingTarget.style[t]=e.sizerInlineStyle[t];for(var t in e.inlineStyle)this.style[t]=e.inlineStyle[t];this._fitInfo=null},refit:function(){var e=this.sizingTarget.scrollLeft,t=this.sizingTarget.scrollTop;this.resetFit(),this.fit(),this.sizingTarget.scrollLeft=e,this.sizingTarget.scrollTop=t},position:function(){if(this.horizontalAlign||this.verticalAlign){this._discoverInfo(),this.style.position="fixed",this.sizingTarget.style.boxSizing="border-box",this.style.left="0px",this.style.top="0px";var e=this.getBoundingClientRect(),t=this.__getNormalizedRect(this.positionTarget),i=this.__getNormalizedRect(this.fitInto),n=this._fitInfo.margin,r={width:e.width+n.left+n.right,height:e.height+n.top+n.bottom},o=this.__getPosition(this._localeHorizontalAlign,this.verticalAlign,r,t,i),s=o.left+n.left,a=o.top+n.top,c=Math.min(i.right-n.right,s+e.width),l=Math.min(i.bottom-n.bottom,a+e.height);s=Math.max(i.left+n.left,Math.min(s,c-this._fitInfo.sizedBy.minWidth)),a=Math.max(i.top+n.top,Math.min(a,l-this._fitInfo.sizedBy.minHeight)),this.sizingTarget.style.maxWidth=Math.max(c-s,this._fitInfo.sizedBy.minWidth)+"px",this.sizingTarget.style.maxHeight=Math.max(l-a,this._fitInfo.sizedBy.minHeight)+"px",this.style.left=s-e.left+"px",this.style.top=a-e.top+"px"}},constrain:function(){if(!this.horizontalAlign&&!this.verticalAlign){this._discoverInfo();var e=this._fitInfo;e.positionedBy.vertically||(this.style.position="fixed",this.style.top="0px"),e.positionedBy.horizontally||(this.style.position="fixed",this.style.left="0px"),this.sizingTarget.style.boxSizing="border-box";var t=this.getBoundingClientRect();e.sizedBy.height||this.__sizeDimension(t,e.positionedBy.vertically,"top","bottom","Height"),e.sizedBy.width||this.__sizeDimension(t,e.positionedBy.horizontally,"left","right","Width")}},_sizeDimension:function(e,t,i,n,r){this.__sizeDimension(e,t,i,n,r)},__sizeDimension:function(e,t,i,n,r){var o=this._fitInfo,s=this.__getNormalizedRect(this.fitInto),a="Width"===r?s.width:s.height,c=t===n,l=c?a-e[n]:e[i],d=o.margin[c?i:n],h="offset"+r,u=this[h]-this.sizingTarget[h];this.sizingTarget.style["max"+r]=a-d-l-u+"px"},center:function(){if(!this.horizontalAlign&&!this.verticalAlign){this._discoverInfo();var e=this._fitInfo.positionedBy;if(!e.vertically||!e.horizontally){this.style.position="fixed",e.vertically||(this.style.top="0px"),e.horizontally||(this.style.left="0px");var t=this.getBoundingClientRect(),i=this.__getNormalizedRect(this.fitInto);if(!e.vertically){var n=i.top-t.top+(i.height-t.height)/2;this.style.top=n+"px"}if(!e.horizontally){var r=i.left-t.left+(i.width-t.width)/2;this.style.left=r+"px"}}}},__getNormalizedRect:function(e){return e===document.documentElement||e===window?{top:0,left:0,width:window.innerWidth,height:window.innerHeight,right:window.innerWidth,bottom:window.innerHeight}:e.getBoundingClientRect()},__getCroppedArea:function(e,t,i){var n=Math.min(0,e.top)+Math.min(0,i.bottom-(e.top+t.height)),r=Math.min(0,e.left)+Math.min(0,i.right-(e.left+t.width));return Math.abs(n)*t.width+Math.abs(r)*t.height},__getPosition:function(e,t,i,n,r){var o=[{verticalAlign:"top",horizontalAlign:"left",top:n.top+this.verticalOffset,left:n.left+this.horizontalOffset},{verticalAlign:"top",horizontalAlign:"right",top:n.top+this.verticalOffset,left:n.right-i.width-this.horizontalOffset},{verticalAlign:"bottom",horizontalAlign:"left",top:n.bottom-i.height-this.verticalOffset,left:n.left+this.horizontalOffset},{verticalAlign:"bottom",horizontalAlign:"right",top:n.bottom-i.height-this.verticalOffset,left:n.right-i.width-this.horizontalOffset}];if(this.noOverlap){for(var s=0,a=o.length;s<a;s++){var c={};for(var l in o[s])c[l]=o[s][l];o.push(c)}o[0].top=o[1].top+=n.height,o[2].top=o[3].top-=n.height,o[4].left=o[6].left+=n.width,o[5].left=o[7].left-=n.width}t="auto"===t?null:t,e="auto"===e?null:e;for(var d,s=0;s<o.length;s++){var h=o[s];if(!this.dynamicAlign&&!this.noOverlap&&h.verticalAlign===t&&h.horizontalAlign===e){d=h;break}var u=!(t&&h.verticalAlign!==t||e&&h.horizontalAlign!==e);if(this.dynamicAlign||u){d=d||h,h.croppedArea=this.__getCroppedArea(h,i,r);var p=h.croppedArea-d.croppedArea;if((p<0||0===p&&u)&&(d=h),0===d.croppedArea&&u)break}}return d}},Polymer.IronResizableBehavior={properties:{_parentResizable:{type:Object,observer:"_parentResizableChanged"},_notifyingDescendant:{type:Boolean,value:!1}},listeners:{"iron-request-resize-notifications":"_onIronRequestResizeNotifications"},created:function(){this._interestedResizables=[],this._boundNotifyResize=this.notifyResize.bind(this)},attached:function(){this.fire("iron-request-resize-notifications",null,{node:this,bubbles:!0,cancelable:!0}),this._parentResizable||(window.addEventListener("resize",this._boundNotifyResize),this.notifyResize())},detached:function(){this._parentResizable?this._parentResizable.stopResizeNotificationsFor(this):window.removeEventListener("resize",this._boundNotifyResize),this._parentResizable=null},notifyResize:function(){this.isAttached&&(this._interestedResizables.forEach(function(e){this.resizerShouldNotify(e)&&this._notifyDescendant(e)},this),this._fireResize())},assignParentResizable:function(e){this._parentResizable=e},stopResizeNotificationsFor:function(e){var t=this._interestedResizables.indexOf(e);t>-1&&(this._interestedResizables.splice(t,1),this.unlisten(e,"iron-resize","_onDescendantIronResize"))},resizerShouldNotify:function(e){return!0},_onDescendantIronResize:function(e){this._notifyingDescendant?e.stopPropagation():Polymer.Settings.useShadow||this._fireResize()},_fireResize:function(){this.fire("iron-resize",null,{node:this,bubbles:!1})},_onIronRequestResizeNotifications:function(e){var t=e.path?e.path[0]:e.target;t!==this&&(-1===this._interestedResizables.indexOf(t)&&(this._interestedResizables.push(t),this.listen(t,"iron-resize","_onDescendantIronResize")),t.assignParentResizable(this),this._notifyDescendant(t),e.stopPropagation())},_parentResizableChanged:function(e){e&&window.removeEventListener("resize",this._boundNotifyResize)},_notifyDescendant:function(e){this.isAttached&&(this._notifyingDescendant=!0,e.notifyResize(),this._notifyingDescendant=!1)}},function(){"use strict";function e(e,t){var i="";if(e){var n=e.toLowerCase();" "===n||d.test(n)?i="space":h.test(n)?i="esc":1==n.length?t&&!a.test(n)||(i=n):i=l.test(n)?n.replace("arrow",""):"multiply"==n?"*":n}return i}function t(t,i){return t.key?e(t.key,i):t.detail&&t.detail.key?e(t.detail.key,i):function(e){var t="";return e&&(e in r?t=r[e]:c.test(e)?(e=parseInt(e.replace("U+","0x"),16),t=String.fromCharCode(e).toLowerCase()):t=e.toLowerCase()),t}(t.keyIdentifier)||function(e){var t="";return Number(e)&&(t=e>=65&&e<=90?String.fromCharCode(32+e):e>=112&&e<=123?"f"+(e-112):e>=48&&e<=57?String(e-48):e>=96&&e<=105?String(e-96):o[e]),t}(t.keyCode)||""}function i(e,i){return t(i,e.hasModifiers)===e.key&&(!e.hasModifiers||!!i.shiftKey==!!e.shiftKey&&!!i.ctrlKey==!!e.ctrlKey&&!!i.altKey==!!e.altKey&&!!i.metaKey==!!e.metaKey)}function n(e){return e.trim().split(" ").map(function(e){return function(e){return 1===e.length?{combo:e,key:e,event:"keydown"}:e.split("+").reduce(function(e,t){var i=t.split(":"),n=i[0],r=i[1];return n in s?(e[s[n]]=!0,e.hasModifiers=!0):(e.key=n,e.event=r||"keydown"),e},{combo:e.split(":").shift()})}(e)})}var r={"U+0008":"backspace","U+0009":"tab","U+001B":"esc","U+0020":"space","U+007F":"del"},o={8:"backspace",9:"tab",13:"enter",27:"esc",33:"pageup",34:"pagedown",35:"end",36:"home",32:"space",37:"left",38:"up",39:"right",40:"down",46:"del",106:"*"},s={shift:"shiftKey",ctrl:"ctrlKey",alt:"altKey",meta:"metaKey"},a=/[a-z0-9*]/,c=/U\+/,l=/^arrow/,d=/^space(bar)?/,h=/^escape$/;Polymer.IronA11yKeysBehavior={properties:{keyEventTarget:{type:Object,value:function(){return this}},stopKeyboardEventPropagation:{type:Boolean,value:!1},_boundKeyHandlers:{type:Array,value:function(){return[]}},_imperativeKeyBindings:{type:Object,value:function(){return{}}}},observers:["_resetKeyEventListeners(keyEventTarget, _boundKeyHandlers)"],keyBindings:{},registered:function(){this._prepKeyBindings()},attached:function(){this._listenKeyEventListeners()},detached:function(){this._unlistenKeyEventListeners()},addOwnKeyBinding:function(e,t){this._imperativeKeyBindings[e]=t,this._prepKeyBindings(),this._resetKeyEventListeners()},removeOwnKeyBindings:function(){this._imperativeKeyBindings={},this._prepKeyBindings(),this._resetKeyEventListeners()},keyboardEventMatchesKeys:function(e,t){for(var r=n(t),o=0;o<r.length;++o)if(i(r[o],e))return!0;return!1},_collectKeyBindings:function(){var e=this.behaviors.map(function(e){return e.keyBindings});return-1===e.indexOf(this.keyBindings)&&e.push(this.keyBindings),e},_prepKeyBindings:function(){this._keyBindings={},this._collectKeyBindings().forEach(function(e){for(var t in e)this._addKeyBinding(t,e[t])},this);for(var e in this._imperativeKeyBindings)this._addKeyBinding(e,this._imperativeKeyBindings[e]);for(var t in this._keyBindings)this._keyBindings[t].sort(function(e,t){var i=e[0].hasModifiers;return i===t[0].hasModifiers?0:i?-1:1})},_addKeyBinding:function(e,t){n(e).forEach(function(e){this._keyBindings[e.event]=this._keyBindings[e.event]||[],this._keyBindings[e.event].push([e,t])},this)},_resetKeyEventListeners:function(){this._unlistenKeyEventListeners(),this.isAttached&&this._listenKeyEventListeners()},_listenKeyEventListeners:function(){this.keyEventTarget&&Object.keys(this._keyBindings).forEach(function(e){var t=this._keyBindings[e],i=this._onKeyBindingEvent.bind(this,t);this._boundKeyHandlers.push([this.keyEventTarget,e,i]),this.keyEventTarget.addEventListener(e,i)},this)},_unlistenKeyEventListeners:function(){for(var e,t,i,n;this._boundKeyHandlers.length;)t=(e=this._boundKeyHandlers.pop())[0],i=e[1],n=e[2],t.removeEventListener(i,n)},_onKeyBindingEvent:function(e,t){if(this.stopKeyboardEventPropagation&&t.stopPropagation(),!t.defaultPrevented)for(var n=0;n<e.length;n++){var r=e[n][0],o=e[n][1];if(i(r,t)&&(this._triggerKeyHandler(r,o,t),t.defaultPrevented))return}},_triggerKeyHandler:function(e,t,i){var n=Object.create(e);n.keyboardEvent=i;var r=new CustomEvent(e.event,{detail:n,cancelable:!0});this[t].call(this,r),r.defaultPrevented&&i.preventDefault()}}}(),function(){"use strict";Polymer({is:"iron-overlay-backdrop",properties:{opened:{reflectToAttribute:!0,type:Boolean,value:!1,observer:"_openedChanged"}},listeners:{transitionend:"_onTransitionend"},created:function(){this.__openedRaf=null},attached:function(){this.opened&&this._openedChanged(this.opened)},prepare:function(){this.opened&&!this.parentNode&&Polymer.dom(document.body).appendChild(this)},open:function(){this.opened=!0},close:function(){this.opened=!1},complete:function(){this.opened||this.parentNode!==document.body||Polymer.dom(this.parentNode).removeChild(this)},_onTransitionend:function(e){e&&e.target===this&&this.complete()},_openedChanged:function(e){if(e)this.prepare();else{var t=window.getComputedStyle(this);"0s"!==t.transitionDuration&&0!=t.opacity||this.complete()}this.isAttached&&(this.__openedRaf&&(window.cancelAnimationFrame(this.__openedRaf),this.__openedRaf=null),this.scrollTop=this.scrollTop,this.__openedRaf=window.requestAnimationFrame(function(){this.__openedRaf=null,this.toggleClass("opened",this.opened)}.bind(this)))}})}(),Polymer.IronOverlayManagerClass=function(){this._overlays=[],this._minimumZ=101,this._backdropElement=null,Polymer.Gestures.add(document.documentElement,"tap",null),document.addEventListener("tap",this._onCaptureClick.bind(this),!0),document.addEventListener("focus",this._onCaptureFocus.bind(this),!0),document.addEventListener("keydown",this._onCaptureKeyDown.bind(this),!0)},Polymer.IronOverlayManagerClass.prototype={constructor:Polymer.IronOverlayManagerClass,get backdropElement(){return this._backdropElement||(this._backdropElement=document.createElement("iron-overlay-backdrop")),this._backdropElement},get deepActiveElement(){for(var e=document.activeElement||document.body;e.root&&Polymer.dom(e.root).activeElement;)e=Polymer.dom(e.root).activeElement;return e},_bringOverlayAtIndexToFront:function(e){var t=this._overlays[e];if(t){var i=this._overlays.length-1,n=this._overlays[i];if(n&&this._shouldBeBehindOverlay(t,n)&&i--,!(e>=i)){var r=Math.max(this.currentOverlayZ(),this._minimumZ);for(this._getZ(t)<=r&&this._applyOverlayZ(t,r);e<i;)this._overlays[e]=this._overlays[e+1],e++;this._overlays[i]=t}}},addOrRemoveOverlay:function(e){e.opened?this.addOverlay(e):this.removeOverlay(e)},addOverlay:function(e){var t=this._overlays.indexOf(e);if(t>=0)return this._bringOverlayAtIndexToFront(t),void this.trackBackdrop();var i=this._overlays.length,n=this._overlays[i-1],r=Math.max(this._getZ(n),this._minimumZ),o=this._getZ(e);if(n&&this._shouldBeBehindOverlay(e,n)){this._applyOverlayZ(n,r),i--;var s=this._overlays[i-1];r=Math.max(this._getZ(s),this._minimumZ)}o<=r&&this._applyOverlayZ(e,r),this._overlays.splice(i,0,e),this.trackBackdrop()},removeOverlay:function(e){var t=this._overlays.indexOf(e);-1!==t&&(this._overlays.splice(t,1),this.trackBackdrop())},currentOverlay:function(){var e=this._overlays.length-1;return this._overlays[e]},currentOverlayZ:function(){return this._getZ(this.currentOverlay())},ensureMinimumZ:function(e){this._minimumZ=Math.max(this._minimumZ,e)},focusOverlay:function(){var e=this.currentOverlay();e&&e._applyFocus()},trackBackdrop:function(){var e=this._overlayWithBackdrop();(e||this._backdropElement)&&(this.backdropElement.style.zIndex=this._getZ(e)-1,this.backdropElement.opened=!!e)},getBackdrops:function(){for(var e=[],t=0;t<this._overlays.length;t++)this._overlays[t].withBackdrop&&e.push(this._overlays[t]);return e},backdropZ:function(){return this._getZ(this._overlayWithBackdrop())-1},_overlayWithBackdrop:function(){for(var e=0;e<this._overlays.length;e++)if(this._overlays[e].withBackdrop)return this._overlays[e]},_getZ:function(e){var t=this._minimumZ;if(e){var i=Number(e.style.zIndex||window.getComputedStyle(e).zIndex);i==i&&(t=i)}return t},_setZ:function(e,t){e.style.zIndex=t},_applyOverlayZ:function(e,t){this._setZ(e,t+2)},_overlayInPath:function(e){e=e||[];for(var t=0;t<e.length;t++)if(e[t]._manager===this)return e[t]},_onCaptureClick:function(e){var t=this.currentOverlay();t&&this._overlayInPath(Polymer.dom(e).path)!==t&&t._onCaptureClick(e)},_onCaptureFocus:function(e){var t=this.currentOverlay();t&&t._onCaptureFocus(e)},_onCaptureKeyDown:function(e){var t=this.currentOverlay();t&&(Polymer.IronA11yKeysBehavior.keyboardEventMatchesKeys(e,"esc")?t._onCaptureEsc(e):Polymer.IronA11yKeysBehavior.keyboardEventMatchesKeys(e,"tab")&&t._onCaptureTab(e))},_shouldBeBehindOverlay:function(e,t){return!e.alwaysOnTop&&t.alwaysOnTop}},Polymer.IronOverlayManager=new Polymer.IronOverlayManagerClass,function(){"use strict";var e=Element.prototype,t=e.matches||e.matchesSelector||e.mozMatchesSelector||e.msMatchesSelector||e.oMatchesSelector||e.webkitMatchesSelector;Polymer.IronFocusablesHelper={getTabbableNodes:function(e){var t=[];return this._collectTabbableNodes(e,t)?this._sortByTabIndex(t):t},isFocusable:function(e){return t.call(e,"input, select, textarea, button, object")?t.call(e,":not([disabled])"):t.call(e,"a[href], area[href], iframe, [tabindex], [contentEditable]")},isTabbable:function(e){return this.isFocusable(e)&&t.call(e,':not([tabindex="-1"])')&&this._isVisible(e)},_normalizedTabIndex:function(e){if(this.isFocusable(e)){var t=e.getAttribute("tabindex")||0;return Number(t)}return-1},_collectTabbableNodes:function(e,t){if(e.nodeType!==Node.ELEMENT_NODE||!this._isVisible(e))return!1;var i=e,n=this._normalizedTabIndex(i),r=n>0;n>=0&&t.push(i);var o;o="content"===i.localName?Polymer.dom(i).getDistributedNodes():Polymer.dom(i.root||i).children;for(var s=0;s<o.length;s++){var a=this._collectTabbableNodes(o[s],t);r=r||a}return r},_isVisible:function(e){var t=e.style;return"hidden"!==t.visibility&&"none"!==t.display&&("hidden"!==(t=window.getComputedStyle(e)).visibility&&"none"!==t.display)},_sortByTabIndex:function(e){var t=e.length;if(t<2)return e;var i=Math.ceil(t/2),n=this._sortByTabIndex(e.slice(0,i)),r=this._sortByTabIndex(e.slice(i));return this._mergeSortByTabIndex(n,r)},_mergeSortByTabIndex:function(e,t){for(var i=[];e.length>0&&t.length>0;)this._hasLowerTabOrder(e[0],t[0])?i.push(t.shift()):i.push(e.shift());return i.concat(e,t)},_hasLowerTabOrder:function(e,t){var i=Math.max(e.tabIndex,0),n=Math.max(t.tabIndex,0);return 0===i||0===n?n>i:i>n}}}(),function(){"use strict";Polymer.IronOverlayBehaviorImpl={properties:{opened:{observer:"_openedChanged",type:Boolean,value:!1,notify:!0},canceled:{observer:"_canceledChanged",readOnly:!0,type:Boolean,value:!1},withBackdrop:{observer:"_withBackdropChanged",type:Boolean},noAutoFocus:{type:Boolean,value:!1},noCancelOnEscKey:{type:Boolean,value:!1},noCancelOnOutsideClick:{type:Boolean,value:!1},closingReason:{type:Object},restoreFocusOnClose:{type:Boolean,value:!1},alwaysOnTop:{type:Boolean},_manager:{type:Object,value:Polymer.IronOverlayManager},_focusedChild:{type:Object}},listeners:{"iron-resize":"_onIronResize"},get backdropElement(){return this._manager.backdropElement},get _focusNode(){return this._focusedChild||Polymer.dom(this).querySelector("[autofocus]")||this},get _focusableNodes(){return Polymer.IronFocusablesHelper.getTabbableNodes(this)},ready:function(){this.__isAnimating=!1,this.__shouldRemoveTabIndex=!1,this.__firstFocusableNode=this.__lastFocusableNode=null,this.__raf=null,this.__restoreFocusNode=null,this._ensureSetup()},attached:function(){this.opened&&this._openedChanged(this.opened),this._observer=Polymer.dom(this).observeNodes(this._onNodesChange)},detached:function(){Polymer.dom(this).unobserveNodes(this._observer),this._observer=null,this.__raf&&(window.cancelAnimationFrame(this.__raf),this.__raf=null),this._manager.removeOverlay(this)},toggle:function(){this._setCanceled(!1),this.opened=!this.opened},open:function(){this._setCanceled(!1),this.opened=!0},close:function(){this._setCanceled(!1),this.opened=!1},cancel:function(e){this.fire("iron-overlay-canceled",e,{cancelable:!0}).defaultPrevented||(this._setCanceled(!0),this.opened=!1)},invalidateTabbables:function(){this.__firstFocusableNode=this.__lastFocusableNode=null},_ensureSetup:function(){this._overlaySetup||(this._overlaySetup=!0,this.style.outline="none",this.style.display="none")},_openedChanged:function(e){e?this.removeAttribute("aria-hidden"):this.setAttribute("aria-hidden","true"),this.isAttached&&(this.__isAnimating=!0,this.__onNextAnimationFrame(this.__openedChanged))},_canceledChanged:function(){this.closingReason=this.closingReason||{},this.closingReason.canceled=this.canceled},_withBackdropChanged:function(){this.withBackdrop&&!this.hasAttribute("tabindex")?(this.setAttribute("tabindex","-1"),this.__shouldRemoveTabIndex=!0):this.__shouldRemoveTabIndex&&(this.removeAttribute("tabindex"),this.__shouldRemoveTabIndex=!1),this.opened&&this.isAttached&&this._manager.trackBackdrop()},_prepareRenderOpened:function(){this.__restoreFocusNode=this._manager.deepActiveElement,this._preparePositioning(),this.refit(),this._finishPositioning(),this.noAutoFocus&&document.activeElement===this._focusNode&&(this._focusNode.blur(),this.__restoreFocusNode.focus())},_renderOpened:function(){this._finishRenderOpened()},_renderClosed:function(){this._finishRenderClosed()},_finishRenderOpened:function(){this.notifyResize(),this.__isAnimating=!1,this.fire("iron-overlay-opened")},_finishRenderClosed:function(){this.style.display="none",this.style.zIndex="",this.notifyResize(),this.__isAnimating=!1,this.fire("iron-overlay-closed",this.closingReason)},_preparePositioning:function(){this.style.transition=this.style.webkitTransition="none",this.style.transform=this.style.webkitTransform="none",this.style.display=""},_finishPositioning:function(){this.style.display="none",this.scrollTop=this.scrollTop,this.style.transition=this.style.webkitTransition="",this.style.transform=this.style.webkitTransform="",this.style.display="",this.scrollTop=this.scrollTop},_applyFocus:function(){if(this.opened)this.noAutoFocus||this._focusNode.focus();else{this._focusNode.blur(),this._focusedChild=null,this.restoreFocusOnClose&&this.__restoreFocusNode&&this.__restoreFocusNode.focus(),this.__restoreFocusNode=null;var e=this._manager.currentOverlay();e&&this!==e&&e._applyFocus()}},_onCaptureClick:function(e){this.noCancelOnOutsideClick||this.cancel(e)},_onCaptureFocus:function(e){if(this.withBackdrop){var t=Polymer.dom(e).path;-1===t.indexOf(this)?(e.stopPropagation(),this._applyFocus()):this._focusedChild=t[0]}},_onCaptureEsc:function(e){this.noCancelOnEscKey||this.cancel(e)},_onCaptureTab:function(e){if(this.withBackdrop){this.__ensureFirstLastFocusables();var t=e.shiftKey,i=t?this.__firstFocusableNode:this.__lastFocusableNode,n=t?this.__lastFocusableNode:this.__firstFocusableNode,r=!1;if(i===n)r=!0;else{var o=this._manager.deepActiveElement;r=o===i||o===this}r&&(e.preventDefault(),this._focusedChild=n,this._applyFocus())}},_onIronResize:function(){this.opened&&!this.__isAnimating&&this.__onNextAnimationFrame(this.refit)},_onNodesChange:function(){this.opened&&!this.__isAnimating&&(this.invalidateTabbables(),this.notifyResize())},__ensureFirstLastFocusables:function(){if(!this.__firstFocusableNode||!this.__lastFocusableNode){var e=this._focusableNodes;this.__firstFocusableNode=e[0],this.__lastFocusableNode=e[e.length-1]}},__openedChanged:function(){this.opened?(this._prepareRenderOpened(),this._manager.addOverlay(this),this._applyFocus(),this._renderOpened()):(this._manager.removeOverlay(this),this._applyFocus(),this._renderClosed())},__onNextAnimationFrame:function(e){this.__raf&&window.cancelAnimationFrame(this.__raf);var t=this;this.__raf=window.requestAnimationFrame(function(){t.__raf=null,e.call(t)})}},Polymer.IronOverlayBehavior=[Polymer.IronFitBehavior,Polymer.IronResizableBehavior,Polymer.IronOverlayBehaviorImpl]}(),Polymer.PaperDialogBehaviorImpl={hostAttributes:{role:"dialog",tabindex:"-1"},properties:{modal:{type:Boolean,value:!1}},observers:["_modalChanged(modal, _readied)"],listeners:{tap:"_onDialogClick"},ready:function(){this.__prevNoCancelOnOutsideClick=this.noCancelOnOutsideClick,this.__prevNoCancelOnEscKey=this.noCancelOnEscKey,this.__prevWithBackdrop=this.withBackdrop},_modalChanged:function(e,t){t&&(e?(this.__prevNoCancelOnOutsideClick=this.noCancelOnOutsideClick,this.__prevNoCancelOnEscKey=this.noCancelOnEscKey,this.__prevWithBackdrop=this.withBackdrop,this.noCancelOnOutsideClick=!0,this.noCancelOnEscKey=!0,this.withBackdrop=!0):(this.noCancelOnOutsideClick=this.noCancelOnOutsideClick&&this.__prevNoCancelOnOutsideClick,this.noCancelOnEscKey=this.noCancelOnEscKey&&this.__prevNoCancelOnEscKey,this.withBackdrop=this.withBackdrop&&this.__prevWithBackdrop))},_updateClosingReasonConfirmed:function(e){this.closingReason=this.closingReason||{},this.closingReason.confirmed=e},_onDialogClick:function(e){for(var t=Polymer.dom(e).path,i=0;i<t.indexOf(this);i++){var n=t[i];if(n.hasAttribute&&(n.hasAttribute("dialog-dismiss")||n.hasAttribute("dialog-confirm"))){this._updateClosingReasonConfirmed(n.hasAttribute("dialog-confirm")),this.close(),e.stopPropagation();break}}}},Polymer.PaperDialogBehavior=[Polymer.IronOverlayBehavior,Polymer.PaperDialogBehaviorImpl],Polymer({is:"paper-dialog",behaviors:[Polymer.PaperDialogBehavior,Polymer.NeonAnimationRunnerBehavior],listeners:{"neon-animation-finish":"_onNeonAnimationFinish"},_renderOpened:function(){this.cancelAnimation(),this.playAnimation("entry")},_renderClosed:function(){this.cancelAnimation(),this.playAnimation("exit")},_onNeonAnimationFinish:function(){this.opened?this._finishRenderOpened():this._finishRenderClosed()}}),Polymer.IronRangeBehavior={properties:{value:{type:Number,value:0,notify:!0,reflectToAttribute:!0},min:{type:Number,value:0,notify:!0},max:{type:Number,value:100,notify:!0},step:{type:Number,value:1,notify:!0},ratio:{type:Number,value:0,readOnly:!0,notify:!0}},observers:["_update(value, min, max, step)"],_calcRatio:function(e){return(this._clampValue(e)-this.min)/(this.max-this.min)},_clampValue:function(e){return Math.min(this.max,Math.max(this.min,this._calcStep(e)))},_calcStep:function(e){if(e=parseFloat(e),!this.step)return e;var t=Math.round((e-this.min)/this.step);return this.step<1?t/(1/this.step)+this.min:t*this.step+this.min},_validateValue:function(){var e=this._clampValue(this.value);return this.value=this.oldValue=isNaN(e)?this.oldValue:e,this.value!==e},_update:function(){this._validateValue(),this._setRatio(100*this._calcRatio(this.value))}},Polymer({is:"paper-progress",behaviors:[Polymer.IronRangeBehavior],properties:{secondaryProgress:{type:Number,value:0},secondaryRatio:{type:Number,value:0,readOnly:!0},indeterminate:{type:Boolean,value:!1,observer:"_toggleIndeterminate"},disabled:{type:Boolean,value:!1,reflectToAttribute:!0,observer:"_disabledChanged"}},observers:["_progressChanged(secondaryProgress, value, min, max)"],hostAttributes:{role:"progressbar"},_toggleIndeterminate:function(e){this.toggleClass("indeterminate",e,this.$.primaryProgress)},_transformProgress:function(e,t){var i="scaleX("+t/100+")";e.style.transform=e.style.webkitTransform=i},_mainRatioChanged:function(e){this._transformProgress(this.$.primaryProgress,e)},_progressChanged:function(e,t,i,n){e=this._clampValue(e),t=this._clampValue(t);var r=100*this._calcRatio(e),o=100*this._calcRatio(t);this._setSecondaryRatio(r),this._transformProgress(this.$.secondaryProgress,r),this._transformProgress(this.$.primaryProgress,o),this.secondaryProgress=e,this.setAttribute("aria-valuenow",t),this.setAttribute("aria-valuemin",i),this.setAttribute("aria-valuemax",n)},_disabledChanged:function(e){this.setAttribute("aria-disabled",e?"true":"false")},_hideSecondaryProgress:function(e){return 0===e}}),Polymer.IronControlState={properties:{focused:{type:Boolean,value:!1,notify:!0,readOnly:!0,reflectToAttribute:!0},disabled:{type:Boolean,value:!1,notify:!0,observer:"_disabledChanged",reflectToAttribute:!0},_oldTabIndex:{type:Number},_boundFocusBlurHandler:{type:Function,value:function(){return this._focusBlurHandler.bind(this)}}},observers:["_changedControlState(focused, disabled)"],ready:function(){this.addEventListener("focus",this._boundFocusBlurHandler,!0),this.addEventListener("blur",this._boundFocusBlurHandler,!0)},_focusBlurHandler:function(e){if(e.target===this)this._setFocused("focus"===e.type);else if(!this.shadowRoot){var t=Polymer.dom(e).localTarget;this.isLightDescendant(t)||this.fire(e.type,{sourceEvent:e},{node:this,bubbles:e.bubbles,cancelable:e.cancelable})}},_disabledChanged:function(e,t){this.setAttribute("aria-disabled",e?"true":"false"),this.style.pointerEvents=e?"none":"",e?(this._oldTabIndex=this.tabIndex,this._setFocused(!1),this.tabIndex=-1,this.blur()):void 0!==this._oldTabIndex&&(this.tabIndex=this._oldTabIndex)},_changedControlState:function(){this._controlStateChanged&&this._controlStateChanged()}},Polymer.IronButtonStateImpl={properties:{pressed:{type:Boolean,readOnly:!0,value:!1,reflectToAttribute:!0,observer:"_pressedChanged"},toggles:{type:Boolean,value:!1,reflectToAttribute:!0},active:{type:Boolean,value:!1,notify:!0,reflectToAttribute:!0},pointerDown:{type:Boolean,readOnly:!0,value:!1},receivedFocusFromKeyboard:{type:Boolean,readOnly:!0},ariaActiveAttribute:{type:String,value:"aria-pressed",observer:"_ariaActiveAttributeChanged"}},listeners:{down:"_downHandler",up:"_upHandler",tap:"_tapHandler"},observers:["_focusChanged(focused)","_activeChanged(active, ariaActiveAttribute)"],keyBindings:{"enter:keydown":"_asyncClick","space:keydown":"_spaceKeyDownHandler","space:keyup":"_spaceKeyUpHandler"},_mouseEventRe:/^mouse/,_tapHandler:function(){this.toggles?this._userActivate(!this.active):this.active=!1},_focusChanged:function(e){this._detectKeyboardFocus(e),e||this._setPressed(!1)},_detectKeyboardFocus:function(e){this._setReceivedFocusFromKeyboard(!this.pointerDown&&e)},_userActivate:function(e){this.active!==e&&(this.active=e,this.fire("change"))},_downHandler:function(e){this._setPointerDown(!0),this._setPressed(!0),this._setReceivedFocusFromKeyboard(!1)},_upHandler:function(){this._setPointerDown(!1),this._setPressed(!1)},_spaceKeyDownHandler:function(e){var t=e.detail.keyboardEvent,i=Polymer.dom(t).localTarget;this.isLightDescendant(i)||(t.preventDefault(),t.stopImmediatePropagation(),this._setPressed(!0))},_spaceKeyUpHandler:function(e){var t=e.detail.keyboardEvent,i=Polymer.dom(t).localTarget;this.isLightDescendant(i)||(this.pressed&&this._asyncClick(),this._setPressed(!1))},_asyncClick:function(){this.async(function(){this.click()},1)},_pressedChanged:function(e){this._changedButtonState()},_ariaActiveAttributeChanged:function(e,t){t&&t!=e&&this.hasAttribute(t)&&this.removeAttribute(t)},_activeChanged:function(e,t){this.toggles?this.setAttribute(this.ariaActiveAttribute,e?"true":"false"):this.removeAttribute(this.ariaActiveAttribute),this._changedButtonState()},_controlStateChanged:function(){this.disabled?this._setPressed(!1):this._changedButtonState()},_changedButtonState:function(){this._buttonStateChanged&&this._buttonStateChanged()}},Polymer.IronButtonState=[Polymer.IronA11yKeysBehavior,Polymer.IronButtonStateImpl],function(){function e(e){this.element=e,this.width=this.boundingRect.width,this.height=this.boundingRect.height,this.size=Math.max(this.width,this.height)}function t(e){this.element=e,this.color=window.getComputedStyle(e).color,this.wave=document.createElement("div"),this.waveContainer=document.createElement("div"),this.wave.style.backgroundColor=this.color,this.wave.classList.add("wave"),this.waveContainer.classList.add("wave-container"),Polymer.dom(this.waveContainer).appendChild(this.wave),this.resetInteractionState()}var i={distance:function(e,t,i,n){var r=e-i,o=t-n;return Math.sqrt(r*r+o*o)},now:window.performance&&window.performance.now?window.performance.now.bind(window.performance):Date.now};e.prototype={get boundingRect(){return this.element.getBoundingClientRect()},furthestCornerDistanceFrom:function(e,t){var n=i.distance(e,t,0,0),r=i.distance(e,t,this.width,0),o=i.distance(e,t,0,this.height),s=i.distance(e,t,this.width,this.height);return Math.max(n,r,o,s)}},t.MAX_RADIUS=300,t.prototype={get recenters(){return this.element.recenters},get center(){return this.element.center},get mouseDownElapsed(){var e;return this.mouseDownStart?(e=i.now()-this.mouseDownStart,this.mouseUpStart&&(e-=this.mouseUpElapsed),e):0},get mouseUpElapsed(){return this.mouseUpStart?i.now()-this.mouseUpStart:0},get mouseDownElapsedSeconds(){return this.mouseDownElapsed/1e3},get mouseUpElapsedSeconds(){return this.mouseUpElapsed/1e3},get mouseInteractionSeconds(){return this.mouseDownElapsedSeconds+this.mouseUpElapsedSeconds},get initialOpacity(){return this.element.initialOpacity},get opacityDecayVelocity(){return this.element.opacityDecayVelocity},get radius(){var e=this.containerMetrics.width*this.containerMetrics.width,i=this.containerMetrics.height*this.containerMetrics.height,n=1.1*Math.min(Math.sqrt(e+i),t.MAX_RADIUS)+5,r=1.1-n/t.MAX_RADIUS*.2,o=this.mouseInteractionSeconds/r,s=n*(1-Math.pow(80,-o));return Math.abs(s)},get opacity(){return this.mouseUpStart?Math.max(0,this.initialOpacity-this.mouseUpElapsedSeconds*this.opacityDecayVelocity):this.initialOpacity},get outerOpacity(){var e=.3*this.mouseUpElapsedSeconds,t=this.opacity;return Math.max(0,Math.min(e,t))},get isOpacityFullyDecayed(){return this.opacity<.01&&this.radius>=Math.min(this.maxRadius,t.MAX_RADIUS)},get isRestingAtMaxRadius(){return this.opacity>=this.initialOpacity&&this.radius>=Math.min(this.maxRadius,t.MAX_RADIUS)},get isAnimationComplete(){return this.mouseUpStart?this.isOpacityFullyDecayed:this.isRestingAtMaxRadius},get translationFraction(){return Math.min(1,this.radius/this.containerMetrics.size*2/Math.sqrt(2))},get xNow(){return this.xEnd?this.xStart+this.translationFraction*(this.xEnd-this.xStart):this.xStart},get yNow(){return this.yEnd?this.yStart+this.translationFraction*(this.yEnd-this.yStart):this.yStart},get isMouseDown(){return this.mouseDownStart&&!this.mouseUpStart},resetInteractionState:function(){this.maxRadius=0,this.mouseDownStart=0,this.mouseUpStart=0,this.xStart=0,this.yStart=0,this.xEnd=0,this.yEnd=0,this.slideDistance=0,this.containerMetrics=new e(this.element)},draw:function(){var e,t,i;this.wave.style.opacity=this.opacity,e=this.radius/(this.containerMetrics.size/2),t=this.xNow-this.containerMetrics.width/2,i=this.yNow-this.containerMetrics.height/2,this.waveContainer.style.webkitTransform="translate("+t+"px, "+i+"px)",this.waveContainer.style.transform="translate3d("+t+"px, "+i+"px, 0)",this.wave.style.webkitTransform="scale("+e+","+e+")",this.wave.style.transform="scale3d("+e+","+e+",1)"},downAction:function(e){var t=this.containerMetrics.width/2,n=this.containerMetrics.height/2;this.resetInteractionState(),this.mouseDownStart=i.now(),this.center?(this.xStart=t,this.yStart=n,this.slideDistance=i.distance(this.xStart,this.yStart,this.xEnd,this.yEnd)):(this.xStart=e?e.detail.x-this.containerMetrics.boundingRect.left:this.containerMetrics.width/2,this.yStart=e?e.detail.y-this.containerMetrics.boundingRect.top:this.containerMetrics.height/2),this.recenters&&(this.xEnd=t,this.yEnd=n,this.slideDistance=i.distance(this.xStart,this.yStart,this.xEnd,this.yEnd)),this.maxRadius=this.containerMetrics.furthestCornerDistanceFrom(this.xStart,this.yStart),this.waveContainer.style.top=(this.containerMetrics.height-this.containerMetrics.size)/2+"px",this.waveContainer.style.left=(this.containerMetrics.width-this.containerMetrics.size)/2+"px",this.waveContainer.style.width=this.containerMetrics.size+"px",this.waveContainer.style.height=this.containerMetrics.size+"px"},upAction:function(e){this.isMouseDown&&(this.mouseUpStart=i.now())},remove:function(){Polymer.dom(this.waveContainer.parentNode).removeChild(this.waveContainer)}},Polymer({is:"paper-ripple",behaviors:[Polymer.IronA11yKeysBehavior],properties:{initialOpacity:{type:Number,value:.25},opacityDecayVelocity:{type:Number,value:.8},recenters:{type:Boolean,value:!1},center:{type:Boolean,value:!1},ripples:{type:Array,value:function(){return[]}},animating:{type:Boolean,readOnly:!0,reflectToAttribute:!0,value:!1},holdDown:{type:Boolean,value:!1,observer:"_holdDownChanged"},noink:{type:Boolean,value:!1},_animating:{type:Boolean},_boundAnimate:{type:Function,value:function(){return this.animate.bind(this)}}},get target(){return this.keyEventTarget},keyBindings:{"enter:keydown":"_onEnterKeydown","space:keydown":"_onSpaceKeydown","space:keyup":"_onSpaceKeyup"},attached:function(){11==this.parentNode.nodeType?this.keyEventTarget=Polymer.dom(this).getOwnerRoot().host:this.keyEventTarget=this.parentNode;var e=this.keyEventTarget;this.listen(e,"up","uiUpAction"),this.listen(e,"down","uiDownAction")},detached:function(){this.unlisten(this.keyEventTarget,"up","uiUpAction"),this.unlisten(this.keyEventTarget,"down","uiDownAction"),this.keyEventTarget=null},get shouldKeepAnimating(){for(var e=0;e<this.ripples.length;++e)if(!this.ripples[e].isAnimationComplete)return!0;return!1},simulatedRipple:function(){this.downAction(null),this.async(function(){this.upAction()},1)},uiDownAction:function(e){this.noink||this.downAction(e)},downAction:function(e){if(!(this.holdDown&&this.ripples.length>0)){this.addRipple().downAction(e),this._animating||(this._animating=!0,this.animate())}},uiUpAction:function(e){this.noink||this.upAction(e)},upAction:function(e){this.holdDown||(this.ripples.forEach(function(t){t.upAction(e)}),this._animating=!0,this.animate())},onAnimationComplete:function(){this._animating=!1,this.$.background.style.backgroundColor=null,this.fire("transitionend")},addRipple:function(){var e=new t(this);return Polymer.dom(this.$.waves).appendChild(e.waveContainer),this.$.background.style.backgroundColor=e.color,this.ripples.push(e),this._setAnimating(!0),e},removeRipple:function(e){var t=this.ripples.indexOf(e);t<0||(this.ripples.splice(t,1),e.remove(),this.ripples.length||this._setAnimating(!1))},animate:function(){if(this._animating){var e,t;for(e=0;e<this.ripples.length;++e)(t=this.ripples[e]).draw(),this.$.background.style.opacity=t.outerOpacity,t.isOpacityFullyDecayed&&!t.isRestingAtMaxRadius&&this.removeRipple(t);this.shouldKeepAnimating||0!==this.ripples.length?window.requestAnimationFrame(this._boundAnimate):this.onAnimationComplete()}},_onEnterKeydown:function(){this.uiDownAction(),this.async(this.uiUpAction,1)},_onSpaceKeydown:function(){this.uiDownAction()},_onSpaceKeyup:function(){this.uiUpAction()},_holdDownChanged:function(e,t){void 0!==t&&(e?this.downAction():this.upAction())}})}(),Polymer.PaperRippleBehavior={properties:{noink:{type:Boolean,observer:"_noinkChanged"},_rippleContainer:{type:Object}},_buttonStateChanged:function(){this.focused&&this.ensureRipple()},_downHandler:function(e){Polymer.IronButtonStateImpl._downHandler.call(this,e),this.pressed&&this.ensureRipple(e)},ensureRipple:function(e){if(!this.hasRipple()){this._ripple=this._createRipple(),this._ripple.noink=this.noink;var t=this._rippleContainer||this.root;if(t&&Polymer.dom(t).appendChild(this._ripple),e){var i=Polymer.dom(this._rippleContainer||this),n=Polymer.dom(e).rootTarget;i.deepContains(n)&&this._ripple.uiDownAction(e)}}},getRipple:function(){return this.ensureRipple(),this._ripple},hasRipple:function(){return Boolean(this._ripple)},_createRipple:function(){return document.createElement("paper-ripple")},_noinkChanged:function(e){this.hasRipple()&&(this._ripple.noink=e)}},Polymer.PaperButtonBehaviorImpl={properties:{elevation:{type:Number,reflectToAttribute:!0,readOnly:!0}},observers:["_calculateElevation(focused, disabled, active, pressed, receivedFocusFromKeyboard)","_computeKeyboardClass(receivedFocusFromKeyboard)"],hostAttributes:{role:"button",tabindex:"0",animated:!0},_calculateElevation:function(){var e=1;this.disabled?e=0:this.active||this.pressed?e=4:this.receivedFocusFromKeyboard&&(e=3),this._setElevation(e)},_computeKeyboardClass:function(e){this.toggleClass("keyboard-focus",e)},_spaceKeyDownHandler:function(e){Polymer.IronButtonStateImpl._spaceKeyDownHandler.call(this,e),this.hasRipple()&&this.getRipple().ripples.length<1&&this._ripple.uiDownAction()},_spaceKeyUpHandler:function(e){Polymer.IronButtonStateImpl._spaceKeyUpHandler.call(this,e),this.hasRipple()&&this._ripple.uiUpAction()}},Polymer.PaperButtonBehavior=[Polymer.IronButtonState,Polymer.IronControlState,Polymer.PaperRippleBehavior,Polymer.PaperButtonBehaviorImpl],Polymer({is:"paper-button",behaviors:[Polymer.PaperButtonBehavior],properties:{raised:{type:Boolean,reflectToAttribute:!0,value:!1,observer:"_calculateElevation"}},_calculateElevation:function(){this.raised?Polymer.PaperButtonBehaviorImpl._calculateElevation.apply(this):this._setElevation(0)}}),Polymer({is:"iron-icon",properties:{icon:{type:String},theme:{type:String},src:{type:String},_meta:{value:Polymer.Base.create("iron-meta",{type:"iconset"})}},observers:["_updateIcon(_meta, isAttached)","_updateIcon(theme, isAttached)","_srcChanged(src, isAttached)","_iconChanged(icon, isAttached)"],_DEFAULT_ICONSET:"icons",_iconChanged:function(e){var t=(e||"").split(":");this._iconName=t.pop(),this._iconsetName=t.pop()||this._DEFAULT_ICONSET,this._updateIcon()},_srcChanged:function(e){this._updateIcon()},_usesIconset:function(){return this.icon||!this.src},_updateIcon:function(){this._usesIconset()?(this._img&&this._img.parentNode&&Polymer.dom(this.root).removeChild(this._img),""===this._iconName?this._iconset&&this._iconset.removeIcon(this):this._iconsetName&&this._meta&&(this._iconset=this._meta.byKey(this._iconsetName),this._iconset?(this._iconset.applyIcon(this,this._iconName,this.theme),this.unlisten(window,"iron-iconset-added","_updateIcon")):this.listen(window,"iron-iconset-added","_updateIcon"))):(this._iconset&&this._iconset.removeIcon(this),this._img||(this._img=document.createElement("img"),this._img.style.width="100%",this._img.style.height="100%",this._img.draggable=!1),this._img.src=this.src,Polymer.dom(this.root).appendChild(this._img))}}),Polymer.PaperInkyFocusBehaviorImpl={observers:["_focusedChanged(receivedFocusFromKeyboard)"],_focusedChanged:function(e){e&&this.ensureRipple(),this.hasRipple()&&(this._ripple.holdDown=e)},_createRipple:function(){var e=Polymer.PaperRippleBehavior._createRipple();return e.id="ink",e.setAttribute("center",""),e.classList.add("circle"),e}},Polymer.PaperInkyFocusBehavior=[Polymer.IronButtonState,Polymer.IronControlState,Polymer.PaperRippleBehavior,Polymer.PaperInkyFocusBehaviorImpl],Polymer({is:"paper-icon-button",hostAttributes:{role:"button",tabindex:"0"},behaviors:[Polymer.PaperInkyFocusBehavior],properties:{src:{type:String},icon:{type:String},alt:{type:String,observer:"_altChanged"}},_altChanged:function(e,t){var i=this.getAttribute("aria-label");i&&t!=i||this.setAttribute("aria-label",e)}}),Polymer({is:"iron-iconset-svg",properties:{name:{type:String,observer:"_nameChanged"},size:{type:Number,value:24},rtlMirroring:{type:Boolean,value:!1}},attached:function(){this.style.display="none"},getIconNames:function(){return this._icons=this._createIconMap(),Object.keys(this._icons).map(function(e){return this.name+":"+e},this)},applyIcon:function(e,t){e=e.root||e,this.removeIcon(e);var i=this._cloneIcon(t,this.rtlMirroring&&this._targetIsRTL(e));if(i){var n=Polymer.dom(e);return n.insertBefore(i,n.childNodes[0]),e._svgIcon=i}return null},removeIcon:function(e){(e=e.root||e)._svgIcon&&(Polymer.dom(e).removeChild(e._svgIcon),e._svgIcon=null)},_targetIsRTL:function(e){return null==this.__targetIsRTL&&(e&&e.nodeType!==Node.ELEMENT_NODE&&(e=e.host),this.__targetIsRTL=e&&"rtl"===window.getComputedStyle(e).direction),this.__targetIsRTL},_nameChanged:function(){new Polymer.IronMeta({type:"iconset",key:this.name,value:this}),this.async(function(){this.fire("iron-iconset-added",this,{node:window})})},_createIconMap:function(){var e=Object.create(null);return Polymer.dom(this).querySelectorAll("[id]").forEach(function(t){e[t.id]=t}),e},_cloneIcon:function(e,t){return this._icons=this._icons||this._createIconMap(),this._prepareSvgClone(this._icons[e],this.size,t)},_prepareSvgClone:function(e,t,i){if(e){var n=e.cloneNode(!0),r=document.createElementNS("http://www.w3.org/2000/svg","svg"),o=n.getAttribute("viewBox")||"0 0 "+t+" "+t,s="pointer-events: none; display: block; width: 100%; height: 100%;";return i&&n.hasAttribute("mirror-in-rtl")&&(s+="-webkit-transform:scale(-1,1);transform:scale(-1,1);"),r.setAttribute("viewBox",o),r.setAttribute("preserveAspectRatio","xMidYMid meet"),r.setAttribute("focusable","false"),r.style.cssText=s,r.appendChild(n).removeAttribute("id"),r}return null}}),Polymer({is:"iron-collapse",behaviors:[Polymer.IronResizableBehavior],properties:{horizontal:{type:Boolean,value:!1,observer:"_horizontalChanged"},opened:{type:Boolean,value:!1,notify:!0,observer:"_openedChanged"},transitioning:{type:Boolean,notify:!0,readOnly:!0},noAnimation:{type:Boolean},_desiredSize:{type:String,value:""}},get dimension(){return this.horizontal?"width":"height"},get _dimensionMax(){return this.horizontal?"maxWidth":"maxHeight"},get _dimensionMaxCss(){return this.horizontal?"max-width":"max-height"},hostAttributes:{role:"group","aria-hidden":"true","aria-expanded":"false"},listeners:{transitionend:"_onTransitionEnd"},toggle:function(){this.opened=!this.opened},show:function(){this.opened=!0},hide:function(){this.opened=!1},updateSize:function(e,t){e="auto"===e?"":e;var i=t&&!this.noAnimation&&this.isAttached&&this._desiredSize!==e;if(this._desiredSize=e,this._updateTransition(!1),i){var n=this._calcSize();""===e&&(this.style[this._dimensionMax]="",e=this._calcSize()),this.style[this._dimensionMax]=n,this.scrollTop=this.scrollTop,this._updateTransition(!0),i=e!==n}this.style[this._dimensionMax]=e,i||this._transitionEnd()},enableTransition:function(e){Polymer.Base._warn("`enableTransition()` is deprecated, use `noAnimation` instead."),this.noAnimation=!e},_updateTransition:function(e){this.style.transitionDuration=e&&!this.noAnimation?"":"0s"},_horizontalChanged:function(){this.style.transitionProperty=this._dimensionMaxCss;var e="maxWidth"===this._dimensionMax?"maxHeight":"maxWidth";this.style[e]="",this.updateSize(this.opened?"auto":"0px",!1)},_openedChanged:function(){this.setAttribute("aria-expanded",this.opened),this.setAttribute("aria-hidden",!this.opened),this._setTransitioning(!0),this.toggleClass("iron-collapse-closed",!1),this.toggleClass("iron-collapse-opened",!1),this.updateSize(this.opened?"auto":"0px",!0),this.opened&&this.focus()},_transitionEnd:function(){this.style[this._dimensionMax]=this._desiredSize,this.toggleClass("iron-collapse-closed",!this.opened),this.toggleClass("iron-collapse-opened",this.opened),this._updateTransition(!1),this.notifyResize(),this._setTransitioning(!1)},_onTransitionEnd:function(e){Polymer.dom(e).rootTarget===this&&this._transitionEnd()},_calcSize:function(){return this.getBoundingClientRect()[this.dimension]+"px"}}),Polymer({is:"testrtc-suite",properties:{state:{value:"pending",reflectToAttribute:!0},tests:{type:Array,value:function(){return[]}}},_iconForState:function(e){return"failure"===e?"close":"warning"===e?"warning":"success"===e?"check":"running"===e?"more-horiz":""},toggle:function(){this.$.collapse.toggle()},addTest:function(e,t){var i=document.createElement("testrtc-test");i.name=e,i.testFunction=t,Polymer.dom(this.$.collapse).appendChild(i),this.tests.push(i)},run:function(e){this.opened=!0,this.state="running",runAllSequentially(this.tests,this.allTestsFinished.bind(this,e))},allTestsFinished:function(e){for(var t=0,i=0,n=0,r=0;r!==this.tests.length;++r)t+=this.tests[r].errorCount,i+=this.tests[r].warningCount,n+=this.tests[r].successCount;0===t&&0===i&&n>0?(this.state="success",this.opened=!1):0===t&&i>0?(this.state="warning",this.opened=!0):(this.state="failure",this.opened=!0),e()}});var interval=0;Polymer({is:"line-chart",x:[],y:[],yScale:[0,600],yLabels:[0,50,100,150,200,250,300,350,400,450,500],xStart:null,xOffset:null,lastSlowRender:null,addDatapoint:function(e,t){var i=window.performance.now();this.ctx=this.$.canvas.getContext("2d");var n=this.x.length;this.x.push(e/100*2),this.y.push(this.calculateY(t));var r=this.x[n]-this.xStart;if(null===this.xStart||r>this.$.canvas.width)this.setupChart(),this.xStart=this.x[n]-this.xOffset;else{var o=this.x[n-1]-this.xStart;this.ctx.save(),this.ctx.beginPath(),this.ctx.fillStyle=this.dotColor(this.y[n-1]),this.ctx.fillRect(o-1.5,this.y[n-1]-1.5,3,3),this.ctx.moveTo(o,this.y[n-1]),this.ctx.lineTo(r,this.y[n]),this.ctx.stroke(),this.ctx.closePath(),this.ctx.restore()}var s=window.performance.now();this.maybeAlertAboutRenderPerformance(s-i)},maybeAlertAboutRenderPerformance:function(e){if(!(e<5)){var t=window.performance.now();(null===this.lastSlowRender||t-this.lastSlowRender>5e3)&&(this.lastSlowRender=t,console.log("Updating the graph was slow and might affect results. Graph update took "+e+" ms"))}},setupChart:function(){this.ctx.clearRect(0,0,this.$.canvas.width,this.$.canvas.height),this.ctx.lineWidth=window.devicePixelRatio,this.ctx.strokeStyle="grey",this.ctx.save(),this.ctx.lineWidth=window.devicePixelRatio,this.ctx.strokeStyle="lightgray",this.ctx.lineWidth%2&&this.ctx.translate(.5,.5),this.ctx.textAlign="right",this.ctx.textBaseline="middle",this.ctx.beginPath(),this.xOffset=0;for(r=0;r!=this.yLabels.length;r++){var e=this.yLabels[r]+" ms ",t=this.ctx.measureText(e).width;this.xOffset=Math.max(this.xOffset,t)}for(r=0;r!=this.yLabels.length;r++){o=this.calculateY(this.yLabels[r]);this.ctx.moveTo(this.xOffset-3,o),r%2==1?this.ctx.lineTo(this.xOffset+3,o):this.ctx.lineTo(this.$.canvas.width,o)}var i=this.calculateY(this.yLabels[this.yLabels.length-1]),n=this.calculateY(0);this.ctx.moveTo(this.xOffset,i),this.ctx.lineTo(this.xOffset,n),this.ctx.lineTo(this.$.canvas.width-1,n),this.ctx.lineTo(this.$.canvas.width-1,i),this.ctx.stroke(),this.ctx.closePath();for(var r=0;r!=this.yLabels.length;r++){var o=this.calculateY(this.yLabels[r]);r%2==0&&this.ctx.fillText(this.yLabels[r]+" ms ",this.xOffset,o)}this.ctx.restore()},dotColor:function(e){return e<300?"green":"red"},calculateY:function(e){e>this.yScale[1]&&(e=this.yScale[1]-10);var t=(e-this.yScale[0])/(this.yScale[1]-this.yScale[0]);return this.$.canvas.height*(1-t)-5}});var PREFIX_INFO="[   INFO ]",PREFIX_OK="[     OK ]",PREFIX_FAILED="[ FAILED ]",PREFIX_WARNING="[   WARN ]";Polymer({is:"testrtc-test",properties:{name:{type:String},testFunction:{type:Function},settings:{type:Object,value:function(){return{}}},state:{value:"unknown",reflectToAttribute:!0},progressValue:{value:null},output:{type:Array,value:function(){return[]}}},ready:function(){this.reportMessage_(PREFIX_INFO,"Test not run yet.")},_inProgress:function(e){return null!==e},_iconForState:function(e){return"running"===e?"more-horiz":"success"===e?"check":"warning"===e?"warning":"failure"===e?"close":""},toggle:function(){this.$.collapse.toggle()},run:function(e){this.settings=document.getElementsByTagName("testrtc-main")[0].settings,this.successCount=0,this.warningCount=0,this.errorCount=0,this.doneCallback_=e,this.output=[],this.clearPlots(),this.setProgress(null),this.traceTestEvent=report.traceEventAsync("test-run"),currentTest=this,this.state="running",this.traceTestEvent({name:this.name,status:this.state}),this.isDisabled?(this.reportInfo("Test is disabled."),this.done()):this.testFunction(this)},done:function(){if("running"===this.state){this.setProgress(null);this.errorCount+this.warningCount===0&&this.successCount>0?this.state="success":this.warningCount>0&&0===this.errorCount?this.state="warning":this.isDisabled?this.state="disabled":this.state="failure",this.traceTestEvent({status:this.state}),report.logTestRunResult(this.name,this.state),this.doneCallback_()}},setProgress:function(e){this.progressValue=e},expectEquals:function(e,t,i,n){e!==t?this.reportError("Failed expectation: "+e+" !== "+t+": "+i):n&&this.reportSuccess(n)},reportSuccess:function(e){this.reportMessage_(PREFIX_OK,e),this.successCount++,this.traceTestEvent({success:e})},reportError:function(e){this.reportMessage_(PREFIX_FAILED,e),this.errorCount++,this.traceTestEvent({error:e})},reportWarning:function(e){this.reportMessage_(PREFIX_WARNING,e),this.warningCount++,this.traceTestEvent({warning:e})},reportInfo:function(e){this.reportMessage_(PREFIX_INFO,e),this.traceTestEvent({info:e})},reportFatal:function(e){this.reportError(e),this.done()},reportMessage_:function(e,t){this.output=[].concat(this.output,[{prefix:e,message:t}])},clearPlots:function(){for(;null!==this.$.plot.lastElementChild;)Polymer.dom(this.$.plot).removeChild(this.$.plot.lastElementChild)},createLineChart:function(){var e=document.createElement("line-chart");return Polymer.dom(this.$.plot).appendChild(e),this.$.collapse.opened=!0,e}});var currentTest;Polymer({is:"gum-handler",properties:{pending:{type:Boolean,value:!0,notify:!0},error:{type:Object,value:!1,notify:!0},getUserMedia:{type:Function,value:function(){return navigator.mediaDevices.getUserMedia.bind(navigator.mediaDevices)}},enumerateDevices:{type:Function,value:function(){return navigator.mediaDevices.enumerateDevices.bind(navigator.mediaDevices)}}},ready:function(){"undefined"!==this.getUserMedia?this.triggerGetUserMedia_():this.error="NotSupported"},triggerGetUserMedia_:function(){0!=this.pending&&this.enumerateDevices().then(this.triggerGetUserMediaBasedOnSources_.bind(this)).catch(function(e){console.log("JS Device selection not supported",e),this.triggerGetUserMediaBasedOnSources_([])}.bind(this))},triggerGetUserMediaBasedOnSources_:function(e){var t={};if(0===e.length)t={audio:!0,video:!0};else for(var i=0;i<e.length;i++)"audioinput"===e[i].kind&&(t.audio=!0),"videoinput"===e[i].kind&&(t.video=!0);this.getUserMedia(t).then(function(e){for(var t=0;t<e.getVideoTracks().length;t++)e.getVideoTracks()[t].stop();for(var i=0;i<e.getAudioTracks().length;i++)e.getAudioTracks()[i].stop();this.pending=!1,this.error=!1}.bind(this)).catch(function(e){this.error=e,setTimeout(this.triggerGetUserMedia_.bind(this),1e3)}.bind(this))}}),Polymer({is:"gum-dialog",ready:function(){setTimeout(this.$.dialog.refit.bind(this.$.dialog),0)},_createBugReport:function(){this.fire("bug-report")},_isNotSupported:function(e){return"NotSupported"===e},_isPermissionDenied:function(e){return"PermissionDeniedError"===e},_isDevicesNotFound:function(e){return"DevicesNotFoundError"===e},properties:{pending:{type:Boolean,notify:!0},heading:{type:String}}}),Polymer.IronFormElementBehavior={properties:{name:{type:String},value:{notify:!0,type:String},required:{type:Boolean,value:!1},_parentForm:{type:Object}},attached:function(){this.fire("iron-form-element-register")},detached:function(){this._parentForm&&this._parentForm.fire("iron-form-element-unregister",{target:this})}},function(){"use strict";Polymer.IronA11yAnnouncer=Polymer({is:"iron-a11y-announcer",properties:{mode:{type:String,value:"polite"},_text:{type:String,value:""}},created:function(){Polymer.IronA11yAnnouncer.instance||(Polymer.IronA11yAnnouncer.instance=this),document.body.addEventListener("iron-announce",this._onIronAnnounce.bind(this))},announce:function(e){this._text="",this.async(function(){this._text=e},100)},_onIronAnnounce:function(e){e.detail&&e.detail.text&&this.announce(e.detail.text)}}),Polymer.IronA11yAnnouncer.instance=null,Polymer.IronA11yAnnouncer.requestAvailability=function(){Polymer.IronA11yAnnouncer.instance||(Polymer.IronA11yAnnouncer.instance=document.createElement("iron-a11y-announcer")),document.body.appendChild(Polymer.IronA11yAnnouncer.instance)}}(),Polymer.IronValidatableBehaviorMeta=null,Polymer.IronValidatableBehavior={properties:{validator:{type:String},invalid:{notify:!0,reflectToAttribute:!0,type:Boolean,value:!1},_validatorMeta:{type:Object},validatorType:{type:String,value:"validator"},_validator:{type:Object,computed:"__computeValidator(validator)"}},observers:["_invalidChanged(invalid)"],registered:function(){Polymer.IronValidatableBehaviorMeta=new Polymer.IronMeta({type:"validator"})},_invalidChanged:function(){this.invalid?this.setAttribute("aria-invalid","true"):this.removeAttribute("aria-invalid")},hasValidator:function(){return null!=this._validator},validate:function(e){return this.invalid=!this._getValidity(e),!this.invalid},_getValidity:function(e){return!this.hasValidator()||this._validator.validate(e)},__computeValidator:function(){return Polymer.IronValidatableBehaviorMeta&&Polymer.IronValidatableBehaviorMeta.byKey(this.validator)}},Polymer({is:"iron-input",extends:"input",behaviors:[Polymer.IronValidatableBehavior],properties:{bindValue:{observer:"_bindValueChanged",type:String},preventInvalidInput:{type:Boolean},allowedPattern:{type:String,observer:"_allowedPatternChanged"},_previousValidInput:{type:String,value:""},_patternAlreadyChecked:{type:Boolean,value:!1}},listeners:{input:"_onInput",keypress:"_onKeypress"},registered:function(){this._canDispatchEventOnDisabled()||(this._origDispatchEvent=this.dispatchEvent,this.dispatchEvent=this._dispatchEventFirefoxIE)},created:function(){Polymer.IronA11yAnnouncer.requestAvailability()},_canDispatchEventOnDisabled:function(){var e=document.createElement("input"),t=!1;e.disabled=!0,e.addEventListener("feature-check-dispatch-event",function(){t=!0});try{e.dispatchEvent(new Event("feature-check-dispatch-event"))}catch(e){}return t},_dispatchEventFirefoxIE:function(e){var t=this.disabled;this.disabled=!1;var i=this._origDispatchEvent(e);return this.disabled=t,i},get _patternRegExp(){var e;if(this.allowedPattern)e=new RegExp(this.allowedPattern);else switch(this.type){case"number":e=/[0-9.,e-]/}return e},ready:function(){this.bindValue=this.value},_bindValueChanged:function(){this.value!==this.bindValue&&(this.value=this.bindValue||0===this.bindValue||!1===this.bindValue?this.bindValue:""),this.fire("bind-value-changed",{value:this.bindValue})},_allowedPatternChanged:function(){this.preventInvalidInput=!!this.allowedPattern},_onInput:function(){if(this.preventInvalidInput&&!this._patternAlreadyChecked){this._checkPatternValidity()||(this._announceInvalidCharacter("Invalid string of characters not entered."),this.value=this._previousValidInput)}this.bindValue=this.value,this._previousValidInput=this.value,this._patternAlreadyChecked=!1},_isPrintable:function(e){var t=8==e.keyCode||9==e.keyCode||13==e.keyCode||27==e.keyCode,i=19==e.keyCode||20==e.keyCode||45==e.keyCode||46==e.keyCode||144==e.keyCode||145==e.keyCode||e.keyCode>32&&e.keyCode<41||e.keyCode>111&&e.keyCode<124;return!(t||0==e.charCode&&i)},_onKeypress:function(e){if(this.preventInvalidInput||"number"===this.type){var t=this._patternRegExp;if(t&&!(e.metaKey||e.ctrlKey||e.altKey)){this._patternAlreadyChecked=!0;var i=String.fromCharCode(e.charCode);this._isPrintable(e)&&!t.test(i)&&(e.preventDefault(),this._announceInvalidCharacter("Invalid character "+i+" not entered."))}}},_checkPatternValidity:function(){var e=this._patternRegExp;if(!e)return!0;for(var t=0;t<this.value.length;t++)if(!e.test(this.value[t]))return!1;return!0},validate:function(){var e=this.checkValidity();return e&&(this.required&&""===this.value?e=!1:this.hasValidator()&&(e=Polymer.IronValidatableBehavior.validate.call(this,this.value))),this.invalid=!e,this.fire("iron-input-validate"),e},_announceInvalidCharacter:function(e){this.fire("iron-announce",{text:e})}}),Polymer.PaperInputHelper={},Polymer.PaperInputHelper.NextLabelID=1,Polymer.PaperInputHelper.NextAddonID=1,Polymer.PaperInputBehaviorImpl={properties:{label:{type:String},value:{notify:!0,type:String},disabled:{type:Boolean,value:!1},invalid:{type:Boolean,value:!1,notify:!0},preventInvalidInput:{type:Boolean},allowedPattern:{type:String},type:{type:String},list:{type:String},pattern:{type:String},required:{type:Boolean,value:!1},errorMessage:{type:String},charCounter:{type:Boolean,value:!1},noLabelFloat:{type:Boolean,value:!1},alwaysFloatLabel:{type:Boolean,value:!1},autoValidate:{type:Boolean,value:!1},validator:{type:String},autocomplete:{type:String,value:"off"},autofocus:{type:Boolean,observer:"_autofocusChanged"},inputmode:{type:String},minlength:{type:Number},maxlength:{type:Number},min:{type:String},max:{type:String},step:{type:String},name:{type:String},placeholder:{type:String,value:""},readonly:{type:Boolean,value:!1},size:{type:Number},autocapitalize:{type:String,value:"none"},autocorrect:{type:String,value:"off"},autosave:{type:String},results:{type:Number},accept:{type:String},multiple:{type:Boolean},_ariaDescribedBy:{type:String,value:""},_ariaLabelledBy:{type:String,value:""}},listeners:{"addon-attached":"_onAddonAttached"},keyBindings:{"shift+tab:keydown":"_onShiftTabDown"},hostAttributes:{tabindex:0},get inputElement(){return this.$.input},get _focusableElement(){return this.inputElement},registered:function(){this._typesThatHaveText=["date","datetime","datetime-local","month","time","week","file"]},attached:function(){this._updateAriaLabelledBy(),this.inputElement&&-1!==this._typesThatHaveText.indexOf(this.inputElement.type)&&(this.alwaysFloatLabel=!0)},_appendStringWithSpace:function(e,t){return e=e?e+" "+t:t},_onAddonAttached:function(e){var t=e.path?e.path[0]:e.target;if(t.id)this._ariaDescribedBy=this._appendStringWithSpace(this._ariaDescribedBy,t.id);else{var i="paper-input-add-on-"+Polymer.PaperInputHelper.NextAddonID++;t.id=i,this._ariaDescribedBy=this._appendStringWithSpace(this._ariaDescribedBy,i)}},validate:function(){return this.inputElement.validate()},_focusBlurHandler:function(e){Polymer.IronControlState._focusBlurHandler.call(this,e),this.focused&&!this._shiftTabPressed&&this._focusableElement.focus()},_onShiftTabDown:function(e){var t=this.getAttribute("tabindex");this._shiftTabPressed=!0,this.setAttribute("tabindex","-1"),this.async(function(){this.setAttribute("tabindex",t),this._shiftTabPressed=!1},1)},_handleAutoValidate:function(){this.autoValidate&&this.validate()},updateValueAndPreserveCaret:function(e){try{var t=this.inputElement.selectionStart;this.value=e,this.inputElement.selectionStart=t,this.inputElement.selectionEnd=t}catch(t){this.value=e}},_computeAlwaysFloatLabel:function(e,t){return t||e},_updateAriaLabelledBy:function(){var e=Polymer.dom(this.root).querySelector("label");if(e){var t;e.id?t=e.id:(t="paper-input-label-"+Polymer.PaperInputHelper.NextLabelID++,e.id=t),this._ariaLabelledBy=t}else this._ariaLabelledBy=""},_onChange:function(e){this.shadowRoot&&this.fire(e.type,{sourceEvent:e},{node:this,bubbles:e.bubbles,cancelable:e.cancelable})},_autofocusChanged:function(){if(this.autofocus&&this._focusableElement){var e=document.activeElement;e instanceof HTMLElement&&e!==document.body&&e!==document.documentElement||this._focusableElement.focus()}}},Polymer.PaperInputBehavior=[Polymer.IronControlState,Polymer.IronA11yKeysBehavior,Polymer.PaperInputBehaviorImpl],Polymer.PaperInputAddonBehavior={hostAttributes:{"add-on":""},attached:function(){this.fire("addon-attached")},update:function(e){}},Polymer({is:"paper-input-char-counter",behaviors:[Polymer.PaperInputAddonBehavior],properties:{_charCounterStr:{type:String,value:"0"}},update:function(e){if(e.inputElement){e.value=e.value||"";var t=e.value.toString().length.toString();e.inputElement.hasAttribute("maxlength")&&(t+="/"+e.inputElement.getAttribute("maxlength")),this._charCounterStr=t}}}),Polymer({is:"paper-input-container",properties:{noLabelFloat:{type:Boolean,value:!1},alwaysFloatLabel:{type:Boolean,value:!1},attrForValue:{type:String,value:"bind-value"},autoValidate:{type:Boolean,value:!1},invalid:{observer:"_invalidChanged",type:Boolean,value:!1},focused:{readOnly:!0,type:Boolean,value:!1,notify:!0},_addons:{type:Array},_inputHasContent:{type:Boolean,value:!1},_inputSelector:{type:String,value:"input,textarea,.paper-input-input"},_boundOnFocus:{type:Function,value:function(){return this._onFocus.bind(this)}},_boundOnBlur:{type:Function,value:function(){return this._onBlur.bind(this)}},_boundOnInput:{type:Function,value:function(){return this._onInput.bind(this)}},_boundValueChanged:{type:Function,value:function(){return this._onValueChanged.bind(this)}}},listeners:{"addon-attached":"_onAddonAttached","iron-input-validate":"_onIronInputValidate"},get _valueChangedEvent(){return this.attrForValue+"-changed"},get _propertyForValue(){return Polymer.CaseMap.dashToCamelCase(this.attrForValue)},get _inputElement(){return Polymer.dom(this).querySelector(this._inputSelector)},get _inputElementValue(){return this._inputElement[this._propertyForValue]||this._inputElement.value},ready:function(){this._addons||(this._addons=[]),this.addEventListener("focus",this._boundOnFocus,!0),this.addEventListener("blur",this._boundOnBlur,!0)},attached:function(){this.attrForValue?this._inputElement.addEventListener(this._valueChangedEvent,this._boundValueChanged):this.addEventListener("input",this._onInput),""!=this._inputElementValue?this._handleValueAndAutoValidate(this._inputElement):this._handleValue(this._inputElement)},_onAddonAttached:function(e){this._addons||(this._addons=[]);var t=e.target;-1===this._addons.indexOf(t)&&(this._addons.push(t),this.isAttached&&this._handleValue(this._inputElement))},_onFocus:function(){this._setFocused(!0)},_onBlur:function(){this._setFocused(!1),this._handleValueAndAutoValidate(this._inputElement)},_onInput:function(e){this._handleValueAndAutoValidate(e.target)},_onValueChanged:function(e){this._handleValueAndAutoValidate(e.target)},_handleValue:function(e){var t=this._inputElementValue;t||0===t||"number"===e.type&&!e.checkValidity()?this._inputHasContent=!0:this._inputHasContent=!1,this.updateAddons({inputElement:e,value:t,invalid:this.invalid})},_handleValueAndAutoValidate:function(e){if(this.autoValidate){var t;t=e.validate?e.validate(this._inputElementValue):e.checkValidity(),this.invalid=!t}this._handleValue(e)},_onIronInputValidate:function(e){this.invalid=this._inputElement.invalid},_invalidChanged:function(){this._addons&&this.updateAddons({invalid:this.invalid})},updateAddons:function(e){for(var t,i=0;t=this._addons[i];i++)t.update(e)},_computeInputContentClass:function(e,t,i,n,r){var o="input-content";if(e)r&&(o+=" label-is-hidden"),n&&(o+=" is-invalid");else{var s=this.querySelector("label");t||r?(o+=" label-is-floating",this.$.labelAndInputContainer.style.position="static",n?o+=" is-invalid":i&&(o+=" label-is-highlighted")):(s&&(this.$.labelAndInputContainer.style.position="relative"),n&&(o+=" is-invalid"))}return i&&(o+=" focused"),o},_computeUnderlineClass:function(e,t){var i="underline";return t?i+=" is-invalid":e&&(i+=" is-highlighted"),i},_computeAddOnContentClass:function(e,t){var i="add-on-content";return t?i+=" is-invalid":e&&(i+=" is-highlighted"),i}}),Polymer({is:"paper-input-error",behaviors:[Polymer.PaperInputAddonBehavior],properties:{invalid:{readOnly:!0,reflectToAttribute:!0,type:Boolean}},update:function(e){this._setInvalid(e.invalid)}}),Polymer({is:"paper-input",behaviors:[Polymer.IronFormElementBehavior,Polymer.PaperInputBehavior]}),Polymer({is:"iron-autogrow-textarea",behaviors:[Polymer.IronFormElementBehavior,Polymer.IronValidatableBehavior,Polymer.IronControlState],properties:{bindValue:{observer:"_bindValueChanged",type:String},rows:{type:Number,value:1,observer:"_updateCached"},maxRows:{type:Number,value:0,observer:"_updateCached"},autocomplete:{type:String,value:"off"},autofocus:{type:Boolean,value:!1},inputmode:{type:String},placeholder:{type:String},readonly:{type:String},required:{type:Boolean},minlength:{type:Number},maxlength:{type:Number}},listeners:{input:"_onInput"},observers:["_onValueChanged(value)"],get textarea(){return this.$.textarea},get selectionStart(){return this.$.textarea.selectionStart},get selectionEnd(){return this.$.textarea.selectionEnd},set selectionStart(e){this.$.textarea.selectionStart=e},set selectionEnd(e){this.$.textarea.selectionEnd=e},attached:function(){navigator.userAgent.match(/iP(?:[oa]d|hone)/)&&(this.$.textarea.style.marginLeft="-3px")},validate:function(){if(!this.required&&""==this.value)return this.invalid=!1,!0;var e;return this.hasValidator()?e=Polymer.IronValidatableBehavior.validate.call(this,this.value):(e=this.$.textarea.validity.valid,this.invalid=!e),this.fire("iron-input-validate"),e},_bindValueChanged:function(){var e=this.textarea;e&&(e.value!==this.bindValue&&(e.value=this.bindValue||0===this.bindValue?this.bindValue:""),this.value=this.bindValue,this.$.mirror.innerHTML=this._valueForMirror(),this.fire("bind-value-changed",{value:this.bindValue}))},_onInput:function(e){this.bindValue=e.path?e.path[0].value:e.target.value},_constrain:function(e){var t;for(e=e||[""],t=this.maxRows>0&&e.length>this.maxRows?e.slice(0,this.maxRows):e.slice(0);this.rows>0&&t.length<this.rows;)t.push("");return t.join("<br/>")+"&#160;"},_valueForMirror:function(){var e=this.textarea;if(e)return this.tokens=e&&e.value?e.value.replace(/&/gm,"&amp;").replace(/"/gm,"&quot;").replace(/'/gm,"&#39;").replace(/</gm,"&lt;").replace(/>/gm,"&gt;").split("\n"):[""],this._constrain(this.tokens)},_updateCached:function(){this.$.mirror.innerHTML=this._constrain(this.tokens)},_onValueChanged:function(){this.bindValue=this.value}}),Polymer({is:"paper-textarea",behaviors:[Polymer.PaperInputBehavior,Polymer.IronFormElementBehavior],properties:{_ariaLabelledBy:{observer:"_ariaLabelledByChanged",type:String},_ariaDescribedBy:{observer:"_ariaDescribedByChanged",type:String},rows:{type:Number,value:1},maxRows:{type:Number,value:0}},_ariaLabelledByChanged:function(e){this.$.input.textarea.setAttribute("aria-labelledby",e)},_ariaDescribedByChanged:function(e){this.$.input.textarea.setAttribute("aria-describedby",e)},get _focusableElement(){return this.$.input.textarea}}),Report.prototype={traceEventInstant:function(e,t){this.output_.push({ts:Date.now(),name:e,args:t})},traceEventWithId:function(e,t,i){this.output_.push({ts:Date.now(),name:e,id:t,args:i})},traceEventAsync:function(e){return this.traceEventWithId.bind(this,e,this.nextAsyncId_++)},logTestRunResult:function(e,t){ga("send",{hitType:"event",eventCategory:"Test",eventAction:t,eventLabel:e,nonInteraction:1})},generate:function(e){var t={title:"WebRTC Troubleshooter bug report",description:e||null};return this.getContent_(t)},getContent_:function(e){var t=[];return this.appendEventsAsString_([e]||[],t),this.appendEventsAsString_(this.output_,t),"["+t.join(",\n")+"]"},appendEventsAsString_:function(e,t){for(var i=0;i!==e.length;++i)t.push(JSON.stringify(e[i]))},onWindowError_:function(e){this.traceEventInstant("error",{message:e.message,filename:e.filename+":"+e.lineno})},logHook_:function(){this.traceEventInstant("log",arguments),this.nativeLog_.apply(null,arguments)}},Report.getSystemInfo=function(){var e,t,i,n=navigator.userAgent,r=navigator.appName,o=""+parseFloat(navigator.appVersion);return-1!==(t=n.indexOf("Chrome"))?(r="Chrome",o=n.substring(t+7)):-1!==(t=n.indexOf("MSIE"))?(r="Microsoft Internet Explorer",o=n.substring(t+5)):-1!==(t=n.indexOf("Trident"))?(r="Microsoft Internet Explorer",o=n.substring(t+8)):-1!==(t=n.indexOf("Firefox"))?r="Firefox":-1!==(t=n.indexOf("Safari"))?(r="Safari",o=n.substring(t+7),-1!==(t=n.indexOf("Version"))&&(o=n.substring(t+8))):(e=n.lastIndexOf(" ")+1)<(t=n.lastIndexOf("/"))&&(r=n.substring(e,t),o=n.substring(t+1),r.toLowerCase()===r.toUpperCase()&&(r=navigator.appName)),-1!==(i=o.indexOf(";"))&&(o=o.substring(0,i)),-1!==(i=o.indexOf(" "))&&(o=o.substring(0,i)),{browserName:r,browserVersion:o,platform:navigator.platform}};var report=new Report;Polymer({is:"report-dialog",open:function(){window.a=this.$.mainDialog,this.$.mainDialog.open()},download:function(){var e=report.generate(this.description),t=encodeURIComponent(e),i=document.createElement("a");i.setAttribute("href","data:text/plain;charset=utf-8,"+t),i.setAttribute("download","testrtc-"+(new Date).toJSON()+".log"),i.click()},upload:function(){this.submitting=!0;var e=new XMLHttpRequest;e.open("HEAD","/report/new",!0),e.addEventListener("load",this.onGetUploadUrl_.bind(this),!1),e.send(null)},onGetUploadUrl_:function(e){if(200===e.currentTarget.status){var t="testrtc-"+(new Date).toJSON()+".log",i=report.generate(this.description),n=new Blob([i],{type:"text/plain"}),r=new FormData;r.append(t,n,t);var o=e.currentTarget.getResponseHeader("response-text"),s=new XMLHttpRequest;s.open("POST",o,!0),s.setRequestHeader("X-File-Name",t),s.addEventListener("load",this.onUploadFile_.bind(this),!1),s.send(r)}else this.reportError=e.currentTarget.status,report.traceEventInstant("log-error",{error:this.reportError}),this.$.failure.open()},onUploadFile_:function(e){200===e.currentTarget.status?(this.reportUrl=e.currentTarget.getResponseHeader("response-text"),report.traceEventInstant("log-uploaded",{url:this.reportUrl}),this.$.success.open()):(this.reportError=e.currentTarget.status,report.traceEventInstant("log-error",{error:this.reportError}),this.$.failure.open())},closeFail:function(){this.submitting=!1},closeSuccess:function(){this.submitting=!1,this.description="",this.$.mainDialog.close()}}),Polymer({is:"testrtc-main",properties:{settings:{type:Object,value:function(){return parseUrlParameters()}}},_updateLink:function(){var e=window.location,t=[];for(var i in this.settings)""!==this.settings[i]&&t.push(encodeURIComponent(i)+"="+encodeURIComponent(this.settings[i]));var n=0!=t.length?"?"+t.join("&"):"";this._link=e.protocol+"//"+e.host+e.pathname+n},observers:["_pendingChanged(pending)","_updateLink(settings.*)"],listeners:{"bug-report":"openBugReport"},_pendingChanged:function(e){this.traceEnumDevice=report.traceEventAsync("enumerateDevices"),adapter.disableLog(!0),!1===e&&(navigator.mediaDevices.enumerateDevices().then(this.gotSources.bind(this)).catch(function(e){console.log("JS Device selection not supported",e)}),window.doGetUserMedia=this.doGetUserMedia.bind(this),this.$.startButton.removeAttribute("disabled"))},gotSources:function(e){for(var t=0;t!==e.length;++t){var i=e[t],n=document.createElement("option");n.value=i.deviceId,this.appendOption(i,n)}},appendOption:function(e,t){"audioinput"===e.kind?(t.text=e.label||"microphone "+(this.$.audioSource.length+1),this.$.audioSource.appendChild(t)):"videoinput"===e.kind?(t.text=e.label||"camera "+(this.$.videoSource.length+1),this.$.videoSource.appendChild(t)):this.traceEnumDevice("Some other kind of source: "+e.kind)},doGetUserMedia:function(e,t,i){var n=this,r=report.traceEventAsync("getusermedia");try{this.appendSourceId(this.$.audioSource.value,"audio",e),this.appendSourceId(this.$.videoSource.value,"video",e),r({status:"pending",constraints:e}),navigator.mediaDevices.getUserMedia(e).then(function(e){var i=n.getDeviceName_(e.getVideoTracks()),o=n.getDeviceName_(e.getAudioTracks());r({status:"success",camera:i,microphone:o}),t.apply(this,arguments)}).catch(function(e){r({status:"fail",error:e}),i?i.apply(this,arguments):reportFatal("Failed to get access to local media due to error: "+e.name)})}catch(e){return console.log(e),r({status:"exception",error:e.message}),reportFatal("getUserMedia failed with exception: "+e.message)}},appendSourceId:function(e,t,i){!0===i[t]?i[t]={optional:[{sourceId:e}]}:"object"==typeof i[t]&&(void 0===i[t].optional&&(i[t].optional=[]),i[t].optional.push({sourceId:e}))},getDeviceName_:function(e){return 0===e.length?null:e[0].label},run:function(){var e=this;this.$.startButton.setAttribute("disabled",null),runAllSequentially(enumeratedTestSuites,function(){e.$.startButton.removeAttribute("disabled")})},openBugReport:function(){this.pending=!1,this.$.bugreport.open()},openSettingsDialog:function(){this.$.settings.open()}});try{window.AudioContext=window.AudioContext||window.webkitAudioContext;var audioContext=new AudioContext}catch(e){console.log("Failed to instantiate an audio context, error: "+e)}var enumeratedTestSuites=[],enumeratedTestFilters=[],parameters=parseUrlParameters(),filterParameterName="test_filter";filterParameterName in parameters&&(enumeratedTestFilters=parameters[filterParameterName].split(",")),Call.prototype={establishConnection:function(){this.traceEvent({state:"start"}),this.pc1.createOffer().then(this.gotOffer_.bind(this),this.test.reportFatal.bind(this.test))},close:function(){this.traceEvent({state:"end"}),this.pc1.close(),this.pc2.close()},setIceCandidateFilter:function(e){this.iceCandidateFilter_=e},constrainVideoBitrate:function(e){this.constrainVideoBitrateKbps_=e},disableVideoFec:function(){this.constrainOfferToRemoveVideoFec_=!0},gatherStats:function(e,t,i,n){function r(){if("closed"===e.signalingState)return h.statsGatheringRunning=!1,void n(a,l,c,d);e.getStats().then(s).catch(function(e){h.test.reportError("Could not gather stats: "+e),h.statsGatheringRunning=!1,n(a,l)}.bind(h)),t&&t.getStats().then(o)}function o(e){if("chrome"===adapter.browserDetails.browser){var t=enumerateStats(e,h.localTrackIds,h.remoteTrackIds);c.push(t),d.push(Date.now())}else if("firefox"===adapter.browserDetails.browser)for(var i in e){var n=e[i];c.push(n),d.push(Date.now())}else h.test.reportError("Only Firefox and Chrome getStats implementations are supported.")}function s(e){if("chrome"===adapter.browserDetails.browser){var t=enumerateStats(e,h.localTrackIds,h.remoteTrackIds);a.push(t),l.push(Date.now())}else if("firefox"===adapter.browserDetails.browser)for(var i in e){var n=e[i];a.push(n),l.push(Date.now())}else h.test.reportError("Only Firefox and Chrome getStats implementations are supported.");setTimeout(r,u)}var a=[],c=[],l=[],d=[],h=this,u=100;h.localTrackIds={audio:"",video:""},h.remoteTrackIds={audio:"",video:""},e.getSenders().forEach(function(e){"audio"===e.track.kind?h.localTrackIds.audio=e.track.id:"video"===e.track.kind&&(h.localTrackIds.video=e.track.id)}.bind(h)),t&&t.getReceivers().forEach(function(e){"audio"===e.track.kind?h.remoteTrackIds.audio=e.track.id:"video"===e.track.kind&&(h.remoteTrackIds.video=e.track.id)}.bind(h)),this.statsGatheringRunning=!0,r()},gotOffer_:function(e){this.constrainOfferToRemoveVideoFec_&&(e.sdp=e.sdp.replace(/(m=video 1 [^\r]+)(116 117)(\r\n)/g,"$1\r\n"),e.sdp=e.sdp.replace(/a=rtpmap:116 red\/90000\r\n/g,""),e.sdp=e.sdp.replace(/a=rtpmap:117 ulpfec\/90000\r\n/g,""),e.sdp=e.sdp.replace(/a=rtpmap:98 rtx\/90000\r\n/g,""),e.sdp=e.sdp.replace(/a=fmtp:98 apt=116\r\n/g,"")),this.pc1.setLocalDescription(e),this.pc2.setRemoteDescription(e),this.pc2.createAnswer().then(this.gotAnswer_.bind(this),this.test.reportFatal.bind(this.test))},gotAnswer_:function(e){this.constrainVideoBitrateKbps_&&(e.sdp=e.sdp.replace(/a=mid:video\r\n/g,"a=mid:video\r\nb=AS:"+this.constrainVideoBitrateKbps_+"\r\n")),this.pc2.setLocalDescription(e),this.pc1.setRemoteDescription(e)},onIceCandidate_:function(e,t){if(t.candidate){var i=Call.parseCandidate(t.candidate.candidate);this.iceCandidateFilter_(i)&&e.addIceCandidate(t.candidate)}}},Call.noFilter=function(){return!0},Call.isRelay=function(e){return"relay"===e.type},Call.isNotHostCandidate=function(e){return"host"!==e.type},Call.isReflexive=function(e){return"srflx"===e.type},Call.isHost=function(e){return"host"===e.type},Call.isIpv6=function(e){return-1!==e.address.indexOf(":")},Call.parseCandidate=function(e){var t=e.indexOf("candidate:")+"candidate:".length,i=e.substr(t).split(" ");return{type:i[7],protocol:i[2],address:i[4]}},Call.cachedIceServers_=null,Call.cachedIceConfigFetchTime_=null,Call.asyncCreateTurnConfig=function(e,t){var i=currentTest.settings;if("string"==typeof i.turnURI&&""!==i.turnURI){var n={iceServers:[{username:i.turnUsername||"",credential:i.turnCredential||"",urls:i.turnURI.split(",")}]};report.traceEventInstant("turn-config",n),setTimeout(e.bind(null,n),0)}else Call.fetchTurnConfig_(function(t){var i={iceServers:t.iceServers};report.traceEventInstant("turn-config",i),e(i)},t)},Call.asyncCreateStunConfig=function(e,t){var i=currentTest.settings;if("string"==typeof i.stunURI&&""!==i.stunURI){var n={iceServers:[{urls:i.stunURI.split(",")}]};report.traceEventInstant("stun-config",n),setTimeout(e.bind(null,n),0)}else Call.fetchTurnConfig_(function(t){var i={iceServers:t.iceServers.urls};report.traceEventInstant("stun-config",i),e(i)},t)},Call.fetchTurnConfig_=function(e,t){if(Call.cachedIceServers_){if(!((Date.now()-Call.cachedIceConfigFetchTime_)/1e3>parseInt(Call.cachedIceServers_.lifetimeDuration)-240))return report.traceEventInstant("fetch-ice-config","Using cached credentials."),void e(Call.getCachedIceCredentials_())}var i=new XMLHttpRequest;i.onreadystatechange=function(){if(4===i.readyState)if(200===i.status){var n=JSON.parse(i.responseText);Call.cachedIceServers_=n,Call.getCachedIceCredentials_=function(){return JSON.parse(JSON.stringify(Call.cachedIceServers_))},Call.cachedIceConfigFetchTime_=Date.now(),report.traceEventInstant("fetch-ice-config","Fetching new credentials."),e(Call.getCachedIceCredentials_())}else t("TURN request failed")},i.open("POST","/talks/v1/v1alpha/iceconfig?key=AIzaSyDX4ctY_VWUm7lDdO6i_-bx7J-CDkxS16I",!0),i.send()},StatisticsAggregate.prototype={add:function(e,t){0===this.startTime_&&(this.startTime_=e),this.sum_+=t,this.max_=Math.max(this.max_,t),this.rampUpTime_===1/0&&t>this.rampUpThreshold_&&(this.rampUpTime_=e),this.count_++},getAverage:function(){return 0===this.count_?0:Math.round(this.sum_/this.count_)},getMax:function(){return this.max_},getRampUpTime:function(){return Math.round(this.rampUpTime_-this.startTime_)}},Ssim.prototype={statistics:function(e){var t,i=0;for(t=0;t<e.length;++t)i+=e[t];var n=i/(e.length-1),r=0;for(t=1;t<e.length;++t)r=e[t-1]-n,i+=e[t]+r*r;return{mean:n,variance:i/e.length}},covariance:function(e,t,i,n){for(var r=0,o=0;o<e.length;o+=1)r+=(e[o]-i)*(t[o]-n);return r/e.length},calculate:function(e,t){if(e.length!==t.length)return 0;var i=.03*255*(.03*255),n=i/2,r=this.statistics(e),o=r.mean,s=r.variance,a=Math.sqrt(s),c=this.statistics(t),l=c.mean,d=c.variance,h=Math.sqrt(d);return(2*o*l+6.502500000000001)/(o*o+l*l+6.502500000000001)*((2*a*h+i)/(s+d+i))*((this.covariance(e,t,o,l)+n)/(a*h+n))}},"object"==typeof exports&&(module.exports=Ssim),VideoFrameChecker.prototype={stop:function(){this.videoElement_.removeEventListener("play",this.listener_),this.running_=!1},getCurrentImageData_:function(){this.canvas_.width=this.videoElement_.width,this.canvas_.height=this.videoElement_.height;var e=this.canvas_.getContext("2d");return e.drawImage(this.videoElement_,0,0,this.canvas_.width,this.canvas_.height),e.getImageData(0,0,this.canvas_.width,this.canvas_.height)},checkVideoFrame_:function(){if(this.running_&&!this.videoElement_.ended){var e=this.getCurrentImageData_();this.isBlackFrame_(e.data,e.data.length)&&this.frameStats.numBlackFrames++,this.frameComparator.calculate(this.previousFrame_,e.data)>this.identicalFrameSsimThreshold&&this.frameStats.numFrozenFrames++,this.previousFrame_=e.data,this.frameStats.numFrames++,setTimeout(this.checkVideoFrame_.bind(this),20)}},isBlackFrame_:function(e,t){for(var i=this.nonBlackPixelLumaThreshold,n=0,r=4;r<t;r+=4)if((n+=.21*e[r]+.72*e[r+1]+.07*e[r+2])>i*r/4)return!1;return!0}},"object"==typeof exports&&(module.exports=VideoFrameChecker);var testCaseName=new TestCaseNames,testSuiteName=new TestSuiteNames;addTest(testSuiteName.MICROPHONE,testCaseName.AUDIOCAPTURE,function(e){new MicTest(e).run()}),MicTest.prototype={run:function(){void 0===audioContext?(this.test.reportError("WebAudio is not supported, test cannot run."),this.test.done()):doGetUserMedia(this.constraints,this.gotStream.bind(this))},gotStream:function(e){this.checkAudioTracks(e)?this.createAudioBuffer(e):this.test.done()},checkAudioTracks:function(e){this.stream=e;var t=e.getAudioTracks();return t.length<1?(this.test.reportError("No audio track in returned stream."),!1):(this.test.reportSuccess("Audio track created using device="+t[0].label),!0)},createAudioBuffer:function(){this.audioSource=audioContext.createMediaStreamSource(this.stream),this.scriptNode=audioContext.createScriptProcessor(this.bufferSize,this.inputChannelCount,this.outputChannelCount),this.audioSource.connect(this.scriptNode),this.scriptNode.connect(audioContext.destination),this.scriptNode.onaudioprocess=this.collectAudio.bind(this),this.stopCollectingAudio=setTimeoutWithProgressBar(this.onStopCollectingAudio.bind(this),5e3)},collectAudio:function(e){for(var t=e.inputBuffer.length,i=!0,n=0;n<e.inputBuffer.numberOfChannels;n++){var r,o=e.inputBuffer.getChannelData(n),s=Math.abs(o[0]),a=Math.abs(o[t-1]);s>this.silentThreshold||a>this.silentThreshold?((r=new Float32Array(t)).set(o),i=!1):r=new Float32Array,this.collectedAudio[n].push(r)}i||(this.collectedSampleCount+=t,this.collectedSampleCount/e.inputBuffer.sampleRate>=this.collectSeconds&&this.stopCollectingAudio())},onStopCollectingAudio:function(){this.stream.getAudioTracks()[0].stop(),this.audioSource.disconnect(this.scriptNode),this.scriptNode.disconnect(audioContext.destination),this.analyzeAudio(this.collectedAudio),this.test.done()},analyzeAudio:function(e){for(var t=[],i=0;i<e.length;i++)this.channelStats(i,e[i])&&t.push(i);0===t.length?this.test.reportError("No active input channels detected. Microphone is most likely muted or broken, please check if muted in the sound settings or physically on the device. Then rerun the test."):this.test.reportSuccess("Active audio input channels: "+t.length),2===t.length&&this.detectMono(e[t[0]],e[t[1]])},channelStats:function(e,t){for(var i=0,n=0,r=0,o=0,s=0;s<t.length;s++){var a=t[s];if(a.length>0){for(var c=0,l=0,d=0;d<a.length;d++)l+=(c=Math.abs(a[d]))*c,(i=Math.max(i,c))>=this.clipThreshold?(r++,o=Math.max(o,r)):r=0;l=Math.sqrt(l/a.length),n=Math.max(n,l)}}if(i>this.silentThreshold){var h=this.dBFS(i),u=this.dBFS(n);return this.test.reportInfo("Channel "+e+" levels: "+h.toFixed(1)+" dB (peak), "+u.toFixed(1)+" dB (RMS)"),u<this.lowVolumeThreshold&&this.test.reportError("Microphone input level is low, increase input volume or move closer to the microphone."),o>this.clipCountThreshold&&this.test.reportWarning("Clipping detected! Microphone input level is high. Decrease input volume or move away from the microphone."),!0}return!1},detectMono:function(e,t){for(var i=0,n=0;n<e.length;n++){var r=e[n],o=t[n];if(r.length===o.length)for(var s=0;s<r.length;s++)Math.abs(r[s]-o[s])>this.monoDetectThreshold&&i++;else i++}i>0?this.test.reportInfo("Stereo microphone detected."):this.test.reportInfo("Mono microphone detected.")},dBFS:function(e){var t=20*Math.log(e)/Math.log(10);return Math.round(10*t)/10}},addTest(testSuiteName.CAMERA,testCaseName.CHECKRESOLUTION240,function(e){new CamResolutionsTest(e,[[320,240]]).run()}),addTest(testSuiteName.CAMERA,testCaseName.CHECKRESOLUTION480,function(e){new CamResolutionsTest(e,[[640,480]]).run()}),addTest(testSuiteName.CAMERA,testCaseName.CHECKRESOLUTION720,function(e){new CamResolutionsTest(e,[[1280,720]]).run()}),addTest(testSuiteName.CAMERA,testCaseName.CHECKSUPPORTEDRESOLUTIONS,function(e){new CamResolutionsTest(e,[[160,120],[320,180],[320,240],[640,360],[640,480],[768,576],[1024,576],[1280,720],[1280,768],[1280,800],[1920,1080],[1920,1200],[3840,2160],[4096,2160]]).run()}),CamResolutionsTest.prototype={run:function(){this.startGetUserMedia(this.resolutions[this.currentResolution])},startGetUserMedia:function(e){var t={audio:!1,video:{width:{exact:e[0]},height:{exact:e[1]}}};navigator.mediaDevices.getUserMedia(t).then(function(t){this.resolutions.length>1?(this.test.reportSuccess("Supported: "+e[0]+"x"+e[1]),t.getTracks().forEach(function(e){e.stop()}),this.maybeContinueGetUserMedia()):this.collectAndAnalyzeStats_(t,e)}.bind(this)).catch(function(t){this.resolutions.length>1?this.test.reportInfo(e[0]+"x"+e[1]+" not supported"):this.test.reportError("getUserMedia failed with error: "+t.name),this.maybeContinueGetUserMedia()}.bind(this))},maybeContinueGetUserMedia:function(){this.currentResolution!==this.resolutions.length?this.startGetUserMedia(this.resolutions[this.currentResolution++]):this.test.done()},collectAndAnalyzeStats_:function(e,t){var i=e.getVideoTracks();if(i.length<1)return this.test.reportError("No video track in returned stream."),void this.maybeContinueGetUserMedia();var n=i[0];"function"==typeof n.addEventListener&&(n.addEventListener("ended",function(){this.isShuttingDown||this.test.reportError("Video track ended, camera stopped working")}.bind(this)),n.addEventListener("mute",function(){this.isShuttingDown||(this.test.reportWarning("Your camera reported itself as muted."),this.isMuted=!0)}.bind(this)),n.addEventListener("unmute",function(){this.isShuttingDown||(this.test.reportInfo("Your camera reported itself as unmuted."),this.isMuted=!1)}.bind(this)));var r=document.createElement("video");r.setAttribute("autoplay",""),r.setAttribute("muted",""),r.width=t[0],r.height=t[1],r.srcObject=e;var o=new VideoFrameChecker(r),s=new Call(null,this.test);s.pc1.addStream(e),s.establishConnection(),s.gatherStats(s.pc1,null,e,this.onCallEnded_.bind(this,t,r,e,o),100),setTimeoutWithProgressBar(this.endCall_.bind(this,s,e),8e3)},onCallEnded_:function(e,t,i,n,r,o){this.analyzeStats_(e,t,i,n,r,o),n.stop(),this.test.done()},analyzeStats_:function(e,t,i,n,r,o){var s=[],a=[],c=[],l={},d=n.frameStats;for(var h in r)"ssrc"===r[h].type&&parseInt(r[h].googFrameRateInput)>0&&(s.push(parseInt(r[h].googAvgEncodeMs)),a.push(parseInt(r[h].googFrameRateInput)),c.push(parseInt(r[h].googFrameRateSent)));l.cameraName=i.getVideoTracks()[0].label||NaN,l.actualVideoWidth=t.videoWidth,l.actualVideoHeight=t.videoHeight,l.mandatoryWidth=e[0],l.mandatoryHeight=e[1],l.encodeSetupTimeMs=this.extractEncoderSetupTime_(r,o),l.avgEncodeTimeMs=arrayAverage(s),l.minEncodeTimeMs=arrayMin(s),l.maxEncodeTimeMs=arrayMax(s),l.avgInputFps=arrayAverage(a),l.minInputFps=arrayMin(a),l.maxInputFps=arrayMax(a),l.avgSentFps=arrayAverage(c),l.minSentFps=arrayMin(c),l.maxSentFps=arrayMax(c),l.isMuted=this.isMuted,l.testedFrames=d.numFrames,l.blackFrames=d.numBlackFrames,l.frozenFrames=d.numFrozenFrames,report.traceEventInstant("video-stats",l),this.testExpectations_(l)},endCall_:function(e,t){this.isShuttingDown=!0,t.getTracks().forEach(function(e){e.stop()}),e.close()},extractEncoderSetupTime_:function(e,t){for(var i=0;i!==e.length;i++)if("ssrc"===e[i].type&&parseInt(e[i].googFrameRateInput)>0)return JSON.stringify(t[i]-t[0]);return NaN},resolutionMatchesIndependentOfRotationOrCrop_:function(e,t,i,n){var r=Math.min(i,n);return e===i&&t===n||e===n&&t===i||e===r&&n===r},testExpectations_:function(e){var t=[];for(var i in e)e.hasOwnProperty(i)&&("number"==typeof e[i]&&isNaN(e[i])?t.push(i):this.test.reportInfo(i+": "+e[i]));0!==t.length&&this.test.reportInfo("Not available: "+t.join(", ")),isNaN(e.avgSentFps)?this.test.reportInfo("Cannot verify sent FPS."):e.avgSentFps<5?this.test.reportError("Low average sent FPS: "+e.avgSentFps):this.test.reportSuccess("Average FPS above threshold"),this.resolutionMatchesIndependentOfRotationOrCrop_(e.actualVideoWidth,e.actualVideoHeight,e.mandatoryWidth,e.mandatoryHeight)?this.test.reportSuccess("Captured video using expected resolution."):this.test.reportError("Incorrect captured resolution."),0===e.testedFrames?this.test.reportError("Could not analyze any video frame."):(e.blackFrames>e.testedFrames/3&&this.test.reportError("Camera delivering lots of black frames."),e.frozenFrames>e.testedFrames/3&&this.test.reportError("Camera delivering lots of frozen frames."))}},addTest(testSuiteName.NETWORK,testCaseName.UDPENABLED,function(e){new NetworkTest(e,"udp",null,Call.isRelay).run()}),addTest(testSuiteName.NETWORK,testCaseName.TCPENABLED,function(e){new NetworkTest(e,"tcp",null,Call.isRelay).run()}),addTest(testSuiteName.NETWORK,testCaseName.IPV6ENABLED,function(e){new NetworkTest(e,null,{optional:[{googIPv6:!0}]},Call.isIpv6).run()});var NetworkTest=function(e,t,i,n){this.test=e,this.protocol=t,this.params=i,this.iceCandidateFilter=n};NetworkTest.prototype={run:function(){this.iceCandidateFilter.toString()===Call.isIpv6.toString()?this.gatherCandidates(null,this.params,this.iceCandidateFilter):Call.asyncCreateTurnConfig(this.start.bind(this),this.test.reportFatal.bind(this.test))},start:function(e){this.filterConfig(e,this.protocol),this.gatherCandidates(e,this.params,this.iceCandidateFilter)},filterConfig:function(e,t){for(var i="transport="+t,n=[],r=0;r<e.iceServers.length;++r){for(var o=e.iceServers[r],s=[],a=0;a<o.urls.length;++a){var c=o.urls[a];-1!==c.indexOf(i)?s.push(c):-1===c.indexOf("?transport=")&&c.startsWith("turn")&&s.push(c+"?"+i)}0!==s.length&&(o.urls=s,n.push(o))}e.iceServers=n},gatherCandidates:function(e,t,i){var n;try{n=new RTCPeerConnection(e,t)}catch(e){return null!==t&&t.optional[0].googIPv6?this.test.reportWarning("Failed to create peer connection, IPv6 might not be setup/supported on the network."):this.test.reportError("Failed to create peer connection: "+e),void this.test.done()}n.addEventListener("icecandidate",function(e){if("closed"!==e.currentTarget.signalingState)if(e.candidate){var r=Call.parseCandidate(e.candidate.candidate);i(r)&&(this.test.reportSuccess("Gathered candidate of Type: "+r.type+" Protocol: "+r.protocol+" Address: "+r.address),n.close(),n=null,this.test.done())}else n.close(),n=null,null!==t&&t.optional[0].googIPv6?this.test.reportWarning("Failed to gather IPv6 candidates, it might not be setup/supported on the network."):this.test.reportError("Failed to gather specified candidates"),this.test.done()}.bind(this)),this.createAudioOnlyReceiveOffer(n)},createAudioOnlyReceiveOffer:function(e){function t(){}e.createOffer({offerToReceiveAudio:1}).then(function(i){e.setLocalDescription(i).then(t,t)},t)}},addTest(testSuiteName.CONNECTIVITY,testCaseName.RELAYCONNECTIVITY,function(e){new RunConnectivityTest(e,Call.isRelay).run()}),addTest(testSuiteName.CONNECTIVITY,testCaseName.REFLEXIVECONNECTIVITY,function(e){new RunConnectivityTest(e,Call.isReflexive).run()}),addTest(testSuiteName.CONNECTIVITY,testCaseName.HOSTCONNECTIVITY,function(e){new RunConnectivityTest(e,Call.isHost).start()}),RunConnectivityTest.prototype={run:function(){Call.asyncCreateTurnConfig(this.start.bind(this),this.test.reportFatal.bind(this.test))},start:function(e){this.call=new Call(e,this.test),this.call.setIceCandidateFilter(this.iceCandidateFilter),this.call.pc1.addEventListener("icecandidate",function(e){if(e.candidate){var t=Call.parseCandidate(e.candidate.candidate);this.parsedCandidates.push(t),this.iceCandidateFilter(t)&&this.test.reportInfo("Gathered candidate of Type: "+t.type+" Protocol: "+t.protocol+" Address: "+t.address)}}.bind(this));var t=this.call.pc1.createDataChannel(null);t.addEventListener("open",function(){t.send("hello")}),t.addEventListener("message",function(e){"world"!==e.data?this.test.reportError("Invalid data transmitted."):this.test.reportSuccess("Data successfully transmitted between peers."),this.hangup()}.bind(this)),this.call.pc2.addEventListener("datachannel",function(e){var t=e.channel;t.addEventListener("message",function(e){"hello"!==e.data?this.hangup("Invalid data transmitted."):t.send("world")}.bind(this))}.bind(this)),this.call.establishConnection(),this.timeout=setTimeout(this.hangup.bind(this,"Timed out"),5e3)},findParsedCandidateOfSpecifiedType:function(e){for(var t in this.parsedCandidates)if(e(this.parsedCandidates[t]))return e(this.parsedCandidates[t])},hangup:function(e){e&&("Timed out"===e&&this.iceCandidateFilter.toString()===Call.isReflexive.toString()&&this.findParsedCandidateOfSpecifiedType(Call.isReflexive)?this.test.reportWarning("Could not connect using reflexive candidates, likely due to the network environment/configuration."):this.test.reportError(e)),clearTimeout(this.timeout),this.call.close(),this.test.done()}},addTest(testSuiteName.THROUGHPUT,testCaseName.DATATHROUGHPUT,function(e){new DataChannelThroughputTest(e).run()}),DataChannelThroughputTest.prototype={run:function(){Call.asyncCreateTurnConfig(this.start.bind(this),this.test.reportFatal.bind(this.test))},start:function(e){this.call=new Call(e,this.test),this.call.setIceCandidateFilter(Call.isRelay),this.senderChannel=this.call.pc1.createDataChannel(null),this.senderChannel.addEventListener("open",this.sendingStep.bind(this)),this.call.pc2.addEventListener("datachannel",this.onReceiverChannel.bind(this)),this.call.establishConnection()},onReceiverChannel:function(e){this.receiveChannel=e.channel,this.receiveChannel.addEventListener("message",this.onMessageReceived.bind(this))},sendingStep:function(){var e=new Date;this.startTime||(this.startTime=e,this.lastBitrateMeasureTime=e);for(var t=0;t!==this.maxNumberOfPacketsToSend&&!(this.senderChannel.bufferedAmount>=this.bytesToKeepBuffered);++t)this.sentPayloadBytes+=this.samplePacket.length,this.senderChannel.send(this.samplePacket);e-this.startTime>=1e3*this.testDurationSeconds?(this.test.setProgress(100),this.stopSending=!0):(this.test.setProgress((e-this.startTime)/(10*this.testDurationSeconds)),setTimeout(this.sendingStep.bind(this),1))},onMessageReceived:function(e){this.receivedPayloadBytes+=e.data.length;var t=new Date;if(t-this.lastBitrateMeasureTime>=1e3){var i=(this.receivedPayloadBytes-this.lastReceivedPayloadBytes)/(t-this.lastBitrateMeasureTime);i=Math.round(1e3*i*8)/1e3,this.test.reportSuccess("Transmitting at "+i+" kbps."),this.lastReceivedPayloadBytes=this.receivedPayloadBytes,this.lastBitrateMeasureTime=t}if(this.stopSending&&this.sentPayloadBytes===this.receivedPayloadBytes){this.call.close(),this.call=null;var n=Math.round(10*(t-this.startTime))/1e4,r=8*this.receivedPayloadBytes/1e3;this.test.reportSuccess("Total transmitted: "+r+" kilo-bits in "+n+" seconds."),this.test.done()}}},addTest(testSuiteName.THROUGHPUT,testCaseName.VIDEOBANDWIDTH,function(e){new VideoBandwidthTest(e).run()}),VideoBandwidthTest.prototype={run:function(){Call.asyncCreateTurnConfig(this.start.bind(this),this.test.reportFatal.bind(this.test))},start:function(e){this.call=new Call(e,this.test),this.call.setIceCandidateFilter(Call.isRelay),this.call.disableVideoFec(),this.call.constrainVideoBitrate(this.maxVideoBitrateKbps),doGetUserMedia(this.constraints,this.gotStream.bind(this))},gotStream:function(e){this.call.pc1.addStream(e),this.call.establishConnection(),this.startTime=new Date,this.localStream=e.getVideoTracks()[0],setTimeout(this.gatherStats.bind(this),this.statStepMs)},gatherStats:function(){var e=new Date;if(e-this.startTime>this.durationMs)return this.test.setProgress(100),void this.hangup();this.call.statsGatheringRunning||this.call.gatherStats(this.call.pc1,this.call.pc2,this.localStream,this.gotStats.bind(this)),this.test.setProgress(100*(e-this.startTime)/this.durationMs),setTimeout(this.gatherStats.bind(this),this.statStepMs)},gotStats:function(e,t,i,n){if("chrome"===adapter.browserDetails.browser)for(var r in e)void 0!==e[r].connection&&(this.bweStats.add(e[r].connection.timestamp,parseInt(e[r].connection.availableOutgoingBitrate)),this.rttStats.add(e[r].connection.timestamp,parseInt(1e3*e[r].connection.currentRoundTripTime)),this.videoStats[0]=e[r].video.local.frameWidth,this.videoStats[1]=e[r].video.local.frameHeight,this.nackCount=e[r].video.local.nackCount,this.packetsLost=i[r].video.remote.packetsLost,this.qpSum=i[r].video.remote.qpSum,this.pliCount=e[r].video.local.pliCount,this.packetsSent=e[r].video.local.packetsSent,this.packetsReceived=i[r].video.remote.packetsReceived,this.framesEncoded=e[r].video.local.framesEncoded,this.framesDecoded=i[r].video.remote.framesDecoded);else if("firefox"===adapter.browserDetails.browser)for(var o in e)"outbound_rtcp_video_0"===e[o].id?(this.rttStats.add(Date.parse(e[o].timestamp),parseInt(e[o].mozRtt)),this.jitter=e[o].jitter,this.packetsLost=e[o].packetsLost):"outbound_rtp_video_0"===e[o].id&&(this.videoStats[0]="Not supported on Firefox",this.videoStats[1]="Not supported on Firefox",this.bitrateMean=e[o].bitrateMean,this.bitrateStdDev=e[o].bitrateStdDev,this.framerateMean=e[o].framerateMean);else this.test.reportError("Only Firefox and Chrome getStats implementations are supported.");this.completed()},hangup:function(){this.call.pc1.getLocalStreams()[0].getTracks().forEach(function(e){e.stop()}),this.call.close(),this.call=null},completed:function(){"chrome"===adapter.browserDetails.browser?this.videoStats[0]<2&&this.videoStats[1]<2?this.test.reportError("Camera failure: "+this.videoStats[0]+"x"+this.videoStats[1]+". Cannot test bandwidth without a working  camera."):(this.test.reportSuccess("Video resolution: "+this.videoStats[0]+"x"+this.videoStats[1]),this.test.reportInfo("Send bandwidth estimate average: "+Math.round(this.bweStats.getAverage()/1e3)+" kbps"),this.test.reportInfo("Send bandwidth estimate max: "+this.bweStats.getMax()/1e3+" kbps"),this.test.reportInfo("Send bandwidth ramp-up time: "+this.bweStats.getRampUpTime()+" ms"),this.test.reportInfo("Packets sent: "+this.packetsSent),this.test.reportInfo("Packets received: "+this.packetsReceived),this.test.reportInfo("NACK count: "+this.nackCount),this.test.reportInfo("Picture loss indications: "+this.pliCount),this.test.reportInfo("Quality predictor sum: "+this.qpSum),this.test.reportInfo("Frames encoded: "+this.framesEncoded),this.test.reportInfo("Frames decoded: "+this.framesDecoded)):"firefox"===adapter.browserDetails.browser&&(parseInt(this.framerateMean)>0?this.test.reportSuccess("Frame rate mean: "+parseInt(this.framerateMean)):this.test.reportError("Frame rate mean is 0, cannot test bandwidth without a working camera."),this.test.reportInfo("Send bitrate mean: "+parseInt(this.bitrateMean)/1e3+" kbps"),this.test.reportInfo("Send bitrate standard deviation: "+parseInt(this.bitrateStdDev)/1e3+" kbps")),this.test.reportInfo("RTT average: "+this.rttStats.getAverage()+" ms"),this.test.reportInfo("RTT max: "+this.rttStats.getMax()+" ms"),this.test.reportInfo("Packets lost: "+this.packetsLost),this.test.done()}},addExplicitTest(testSuiteName.THROUGHPUT,testCaseName.NETWORKLATENCY,function(e){new WiFiPeriodicScanTest(e,Call.isNotHostCandidate).run()}),addExplicitTest(testSuiteName.THROUGHPUT,testCaseName.NETWORKLATENCYRELAY,function(e){new WiFiPeriodicScanTest(e,Call.isRelay).run()}),WiFiPeriodicScanTest.prototype={run:function(){Call.asyncCreateTurnConfig(this.start.bind(this),this.test.reportFatal.bind(this.test))},start:function(e){this.running=!0,this.call=new Call(e,this.test),this.chart=this.test.createLineChart(),this.call.setIceCandidateFilter(this.candidateFilter),this.senderChannel=this.call.pc1.createDataChannel({ordered:!1,maxRetransmits:0}),this.senderChannel.addEventListener("open",this.send.bind(this)),this.call.pc2.addEventListener("datachannel",this.onReceiverChannel.bind(this)),this.call.establishConnection(),setTimeoutWithProgressBar(this.finishTest.bind(this),this.testDurationMs)},onReceiverChannel:function(e){this.receiveChannel=e.channel,this.receiveChannel.addEventListener("message",this.receive.bind(this))},send:function(){this.running&&(this.senderChannel.send(""+Date.now()),setTimeout(this.send.bind(this),this.sendIntervalMs))},receive:function(e){if(this.running){var t=parseInt(e.data),i=Date.now()-t;this.recvTimeStamps.push(t),this.delays.push(i),this.chart.addDatapoint(t+i,i)}},finishTest:function(){report.traceEventInstant("periodic-delay",{delays:this.delays,recvTimeStamps:this.recvTimeStamps}),this.running=!1,this.call.close(),this.call=null,this.chart.parentElement.removeChild(this.chart);var e=arrayAverage(this.delays),t=arrayMax(this.delays),i=arrayMin(this.delays);this.test.reportInfo("Average delay: "+e+" ms."),this.test.reportInfo("Min delay: "+i+" ms."),this.test.reportInfo("Max delay: "+t+" ms."),this.delays.length<.8*this.testDurationMs/this.sendIntervalMs?this.test.reportError("Not enough samples gathered. Keep the page on  the foreground while the test is running."):this.test.reportSuccess("Collected "+this.delays.length+" delay samples."),t>2*(i+100)&&this.test.reportError("There is a big difference between the min and max delay of packets. Your network appears unstable."),this.test.done()}};